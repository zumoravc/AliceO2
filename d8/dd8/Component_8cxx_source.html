<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/travis/build/AliceO2Group/AliceO2/Utilities/aliceHLTwrapper/src/Component.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d8/dd8/Component_8cxx_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Component.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d8/dd8/Component_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright CERN and copyright holders of ALICE O2. This software is</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// distributed under the terms of the GNU General Public License v3 (GPL</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See http://alice-o2.web.cern.ch/license for full licensing information.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//****************************************************************************</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//* This file is free software: you can redistribute it and/or modify        *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//* it under the terms of the GNU General Public License as published by     *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//* the Free Software Foundation, either version 3 of the License, or        *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//* (at your option) any later version.                                      *</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//*                                                                          *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//* Primary Authors: Matthias Richter &lt;richterm@scieq.net&gt;                   *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//*                                                                          *</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//* The authors make no claims about the suitability of this software for    *</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//* any purpose. It is provided &quot;as is&quot; without express or implied warranty. *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//****************************************************************************</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//  @file   Component.cxx</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//  @author Matthias Richter</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//  @since  2014-05-07</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//  @brief  A component running ALICE HLT code</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/da1/Component_8h.html">aliceHLTwrapper/Component.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d34/AliHLTDataTypes_8h.html">aliceHLTwrapper/AliHLTDataTypes.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d1d/SystemInterface_8h.html">aliceHLTwrapper/SystemInterface.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;FairMQLogger.h&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;cerrno&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;getopt.h&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d4/d6a/namespaceo2_1_1alice__hlt.html">o2::alice_hlt</a>;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">using</span> std::endl;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">using</span> std::string;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">using</span> std::unique_ptr;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using</span> <a class="code" href="../../dd/d2d/namespaceo2_1_1pmr.html#aeea588f6ab06f06d4131f84d8eea272b">std::vector</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">using</span> std::stringstream;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a8775db6d1a2c1afc2e77cd3c8f39da6f">   50</a></span>&#160;<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a8775db6d1a2c1afc2e77cd3c8f39da6f">Component::Component</a>()</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  : mOutputBuffer()</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  , mpSystem(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a>)</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  , mProcessor(<a class="code" href="../../d6/d34/AliHLTDataTypes_8h.html#ac54af0a2f87c6cd527f7ddb1abfbd1aa">kEmptyHLTComponentHandle</a>)</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  , mFormatHandler()</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  , mEventCount(-1)</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab8378fa275af98e568a7e91d33d867af">Component::~Component</a>()</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;= <span class="keywordflow">default</span>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;constexpr <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">Component::OptionKeys</a>[];</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a8d11d057b6867d11c1f401952f9980b9">   64</a></span>&#160;<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a914ca181718316cf7ebf4d3b644571e6">bpo::options_description</a> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a8d11d057b6867d11c1f401952f9980b9">Component::GetOptionsDescription</a>()</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// clang-format off</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a914ca181718316cf7ebf4d3b644571e6">bpo::options_description</a> od(<span class="stringliteral">&quot;HLT Component options&quot;</span>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  od.add_options()</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    ((std::string(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728aca48fc29aa98a561c8fe5b4325906d88">OptionKeyLibrary</a>]) + <span class="stringliteral">&quot;,l&quot;</span>).c_str(),</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;     bpo::value&lt;string&gt;()-&gt;required(),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;     <span class="stringliteral">&quot;component library&quot;</span>)</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    ((std::string(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a8fb9d0c41b9776d13ad15ea8db229e93">OptionKeyComponent</a>]) + <span class="stringliteral">&quot;,c&quot;</span>).c_str(),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;     bpo::value&lt;string&gt;()-&gt;required(),</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;     <span class="stringliteral">&quot;component id&quot;</span>)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    ((std::string(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a0ff905b8daa4016896cbeb271ae9c7bc">OptionKeyParameter</a>]) + <span class="stringliteral">&quot;,p&quot;</span>).c_str(),</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;     bpo::value&lt;string&gt;()-&gt;default_value(<span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;     <span class="stringliteral">&quot;component command line parameter&quot;</span>)</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    ((std::string(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a07fae1a48915596e840ea7b294f2037e">OptionKeyRun</a>]) + <span class="stringliteral">&quot;,r&quot;</span>).c_str(),</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;     bpo::value&lt;string&gt;()-&gt;required(),</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;     <span class="stringliteral">&quot;run number&quot;</span>)</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    ((std::string(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a5fa2911b6cdb4d027ec874df2d60ac1f">OptionKeyOCDB</a>])).c_str(),</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;     bpo::value&lt;string&gt;(),</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;     <span class="stringliteral">&quot;ocdb uri&quot;</span>)</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    ((std::string(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728ac22ebb6e272af6b85795a6440836540d">OptionKeyMsgsize</a>]) + <span class="stringliteral">&quot;,s&quot;</span>).c_str(),</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;     bpo::value&lt;string&gt;()-&gt;default_value(<span class="stringliteral">&quot;0&quot;</span>),</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;     <span class="stringliteral">&quot;maximum size of output buffer/msg&quot;</span>)</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    ((std::string(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728ac4be109e9a57583517de973ad2ec8e3a">OptionKeyOutputMode</a>]) + <span class="stringliteral">&quot;,m&quot;</span>).c_str(),</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;     bpo::value&lt;string&gt;()-&gt;default_value(<span class="stringliteral">&quot;3&quot;</span>),</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;     <span class="stringliteral">&quot;output mode&quot;</span>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// clang-format on</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">return</span> od;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ad1d472571029278f211917bdf3af0529">   94</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ad1d472571029278f211917bdf3af0529">Component::init</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// the hidden options are not exposed to the outside</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a914ca181718316cf7ebf4d3b644571e6">bpo::options_description</a> od(<span class="stringliteral">&quot;component options&quot;</span>);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  od.add_options()</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    (<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a1abba587c6d3bffe133bd6d2b590200a">OptionKeyInstanceId</a>],</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;     bpo::value&lt;string&gt;()-&gt;required(),</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;     <span class="stringliteral">&quot;internal instance id&quot;</span>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// now add all the visible options</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  od.add(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a8d11d057b6867d11c1f401952f9980b9">GetOptionsDescription</a>());</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// HLT components are implemented in shared libraries, the library name</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// and component id are used to factorize a component</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// optionally, a list of configuration parameters can be specified as</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// one single string which is translated in an array of string in the</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// argc/argv format</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">string</span> componentParameter;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordtype">string</span> instanceId;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// the configuration and calibration is fixed for every run and identified</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// by the run no</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordtype">int</span> runNumber = 0;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  bpo::variables_map varmap;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  bpo::store(bpo::parse_command_line(argc, argv, od), varmap);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> option = 0; option &lt; <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a4e6595717a2d832d68dec19d1b1e7113">OptionKeyLast</a>; ++option) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (varmap.count(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[option]) == 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">switch</span> (option) {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728aca48fc29aa98a561c8fe5b4325906d88">OptionKeyLibrary</a>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a8fb9d0c41b9776d13ad15ea8db229e93">OptionKeyComponent</a>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a0ff905b8daa4016896cbeb271ae9c7bc">OptionKeyParameter</a>:</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      componentParameter = varmap[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[option]].as&lt;<span class="keywordtype">string</span>&gt;();</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a07fae1a48915596e840ea7b294f2037e">OptionKeyRun</a>:</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      stringstream(varmap[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[option]].as&lt;string&gt;()) &gt;&gt; runNumber;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a5fa2911b6cdb4d027ec874df2d60ac1f">OptionKeyOCDB</a>:</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">if</span> (getenv(<span class="stringliteral">&quot;ALIHLT_HCDBDIR&quot;</span>) != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(WARN) &lt;&lt; <span class="stringliteral">&quot;overriding value of ALICEHLT_HCDBDIR by --ocdb command option&quot;</span>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      setenv(<span class="stringliteral">&quot;ALIHLT_HCDBDIR&quot;</span>, varmap[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[option]].as&lt;string&gt;().c_str(), 1);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728ac22ebb6e272af6b85795a6440836540d">OptionKeyMsgsize</a>: {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a> = 0;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      stringstream(varmap[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[option]].as&lt;string&gt;()) &gt;&gt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      mOutputBuffer.resize(size);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728ac4be109e9a57583517de973ad2ec8e3a">OptionKeyOutputMode</a>: {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a1e71d9c196e4683cc06c4b54d53f7ef5">mode</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      stringstream(varmap[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[option]].as&lt;string&gt;()) &gt;&gt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a1e71d9c196e4683cc06c4b54d53f7ef5">mode</a>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      mFormatHandler.<a class="code" href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a7ea422f79ca8cbf1db960a5d45f5a96f">setOutputMode</a>(mode);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a1abba587c6d3bffe133bd6d2b590200a">OptionKeyInstanceId</a>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      instanceId = varmap[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[option]].as&lt;<span class="keywordtype">string</span>&gt;();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// TODO: this can be a loop over all required options</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// probably we won&#39;t come here anyhow as the parser will detect</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// the absence of a required parameter, check and handle the parser</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// exception</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">if</span> (varmap.count(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728aca48fc29aa98a561c8fe5b4325906d88">OptionKeyLibrary</a>]) == 0 ||</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      varmap.count(<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a8fb9d0c41b9776d13ad15ea8db229e93">OptionKeyComponent</a>]) == 0 ||</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      runNumber &lt; 0) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(<a class="code" href="../../d1/df4/namespaceo2_1_1data__flow.html#a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;missing argument, required options: library, component,run&quot;</span>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// check the OCDB URI</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// the HLT code relies on ALIHLT_HCDBDIR environment variable to be set</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">if</span> (!getenv(<span class="stringliteral">&quot;ALIHLT_HCDBDIR&quot;</span>)) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(<a class="code" href="../../d1/df4/namespaceo2_1_1data__flow.html#a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;FATAL: OCDB URI is needed, use option --ocdb or environment variable ALIHLT_HCDBDIR&quot;</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">// temporary fix to regain compilation on MacOS (which on some platforms does not define ENOKEY)</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#ifndef ENOKEY</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#define ENOKEY 126</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> -<a class="code" href="../../d8/dd8/Component_8cxx.html#a21e1aad43086cf76131101b31ca391cc">ENOKEY</a>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordtype">int</span> iResult = 0;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// TODO: make the SystemInterface a singleton</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  unique_ptr&lt;o2::alice_hlt::SystemInterface&gt; iface(<span class="keyword">new</span> <a class="code" href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html">SystemInterface</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (iface.get() == <span class="keyword">nullptr</span> || ((iResult = iface-&gt;initSystem(runNumber))) &lt; 0) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// LOG(ERROR) &lt;&lt; &quot;failed to set up SystemInterface &quot; &lt;&lt; iface.get() &lt;&lt; &quot; (&quot; &lt;&lt; iResult &lt;&lt; &quot;)&quot;;</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> -ENOSYS;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// basic initialization succeeded, make the instances persistent</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  mpSystem = iface.release();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// load the component library</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">if</span> ((iResult = mpSystem-&gt;<a class="code" href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html#aa6aee7bbc925d0771aeac61c4ab9695c">loadLibrary</a>(varmap[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[OptionKeyLibrary]].as&lt;<span class="keywordtype">string</span>&gt;().c_str())) != 0)</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> iResult &gt; 0 ? -iResult : iResult;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// chop the parameter string in order to provide parameters in the argc/argv format</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="../../d4/d7c/namespaceo2.html#a884658a1ce846c09b0f6fea1a44a6a46">vector&lt;const char*&gt;</a> parameters;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordtype">unsigned</span> parameterLength = componentParameter.length();</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  unique_ptr&lt;char&gt; parameterBuffer(<span class="keyword">new</span> <span class="keywordtype">char</span>[parameterLength + 1]);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">if</span> (parameterLength &gt; 0 &amp;&amp; parameterBuffer.get() != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    strcpy(parameterBuffer.get(), componentParameter.c_str());</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">char</span>* iterator = parameterBuffer.get();</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    parameters.emplace_back(iterator);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">for</span> (; *iterator != 0; iterator++) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">if</span> (*iterator != <span class="charliteral">&#39; &#39;</span>) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      *iterator = 0; <span class="comment">// separate strings</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (*(iterator + 1) != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *(iterator + 1) != 0) parameters.emplace_back(iterator + 1);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// create component</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordtype">string</span> description;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  description+=<span class="stringliteral">&quot; chainid=&quot;</span> + instanceId;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">if</span> ((iResult=mpSystem-&gt;<a class="code" href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html#a5215dcfa4a5674c3abc11ef7d46a4d7d">createComponent</a>(varmap[<a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">OptionKeys</a>[OptionKeyComponent]].as&lt;<span class="keywordtype">string</span>&gt;().c_str(), <span class="keyword">nullptr</span>, parameters.size(), &amp;parameters[0], &amp;mProcessor, description.c_str()))&lt;0) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// the ALICE HLT external interface uses the following error definition</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// 0 success</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// &gt;0 error number</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> iResult &gt; 0 ? -iResult : iResult;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  mEventCount = 0;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">return</span> iResult;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a5fbbb25429bbcd089af880705ff34fff">  222</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a5fbbb25429bbcd089af880705ff34fff">Component::process</a>(<a class="code" href="../../d4/d7c/namespaceo2.html#a884658a1ce846c09b0f6fea1a44a6a46">vector&lt;MessageFormat::BufferDesc_t&gt;</a>&amp; dataArray,</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                       <a class="code" href="../../d0/da1/Component_8h.html#a78e5861fb365f3ca89bda1c6fadc8c04">cballoc_signal_t</a>* cbAllocate)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">if</span> (!mpSystem) <span class="keywordflow">return</span> -ENOSYS;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordtype">int</span> iResult = 0;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordtype">unsigned</span> outputBufferSize = 0;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="../../dd/d2f/structAliHLTComponentEventData.html">AliHLTComponentEventData</a> evtData;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  memset(&amp;evtData, 0, <span class="keyword">sizeof</span>(evtData));</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  evtData.<a class="code" href="../../dd/d2f/structAliHLTComponentEventData.html#a99a73e4bcd560dd38d3384d8c8df0fe7">fStructSize</a> = <span class="keyword">sizeof</span>(evtData);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">if</span> (mEventCount &gt;= 0) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// very simple approach to provide an event ID</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// TODO: adjust to the relevant format if available</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    evtData.<a class="code" href="../../dd/d2f/structAliHLTComponentEventData.html#a60c29f9052e668338f19119c8b68920c">fEventID</a> = mEventCount++;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="../../df/da3/structAliHLTComponentTriggerData.html">AliHLTComponentTriggerData</a> trigData;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  memset(&amp;trigData, 0, <span class="keyword">sizeof</span>(trigData));</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  trigData.<a class="code" href="../../df/da3/structAliHLTComponentTriggerData.html#acf6d2865053c146e5e50d56f55d7daae">fStructSize</a> = <span class="keyword">sizeof</span>(trigData);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  uint32_t outputBlockCnt = 0;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html">AliHLTComponentBlockData</a>* pOutputBlocks = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="../../d8/d91/structAliHLTComponentEventDoneData.html">AliHLTComponentEventDoneData</a>* pEventDoneData = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// prepare input structure for the ALICE HLT component</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  mFormatHandler.<a class="code" href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a1d67b8da93e9fd5a424d5d95d953b7eb">clear</a>();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  mFormatHandler.<a class="code" href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a92d95bda7ae942838ca41d259c35001e">addMessages</a>(dataArray);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <a class="code" href="../../d4/d7c/namespaceo2.html#a884658a1ce846c09b0f6fea1a44a6a46">vector&lt;BlockDescriptor&gt;</a>&amp; inputBlocks = mFormatHandler.<a class="code" href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#aa69a193f8e58c56b427c1a780b9c3a68">getBlockDescriptors</a>();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordtype">unsigned</span> nofInputBlocks = inputBlocks.size();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">if</span> (dataArray.size() &gt; 0 &amp;&amp; nofInputBlocks == 0 &amp;&amp; mFormatHandler.<a class="code" href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a0332b6db2acf778e9f1a8eec8a8f0ff4">getEvtDataList</a>().size() == 0) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(<a class="code" href="../../d1/df4/namespaceo2_1_1data__flow.html#a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;warning: none of &quot;</span> &lt;&lt; dataArray.size() &lt;&lt; <span class="stringliteral">&quot; input buffer(s) recognized as valid input&quot;</span>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  dataArray.clear();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">if</span> (mFormatHandler.<a class="code" href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a0332b6db2acf778e9f1a8eec8a8f0ff4">getEvtDataList</a>().size()&gt;0) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">// copy the oldest event header</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    memcpy(&amp;evtData, &amp;mFormatHandler.<a class="code" href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a0332b6db2acf778e9f1a8eec8a8f0ff4">getEvtDataList</a>().front(), <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d2f/structAliHLTComponentEventData.html">AliHLTComponentEventData</a>));</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// determine the total input size, needed later on for the calculation of the output buffer size</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordtype">int</span> totalInputSize = 0;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp; ci : inputBlocks) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    totalInputSize += ci.fSize;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// add event type data block</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// this data block describes the type of the event, set it</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// to &#39;data&#39; by using specification gkAliEventTypeData</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../df/dcd/structAliHLTComponentDataType.html">AliHLTComponentDataType</a> kDataTypeEvent = <a class="code" href="../../d5/d8c/group__alihlt__component__datatypes.html#ga31a4fbc4ad8ff078a3c51df8440394b2">AliHLTComponentDataTypeInitializer</a>(<span class="stringliteral">&quot;EVENTTYP&quot;</span>, <span class="stringliteral">&quot;PRIV&quot;</span>);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  inputBlocks.emplace_back(<span class="keyword">nullptr</span>, 0, kDataTypeEvent, <a class="code" href="../../d6/d34/AliHLTDataTypes_8h.html#a0a96ae73d5fc148bbf561e38e8a3304a">gkAliEventTypeData</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// process</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  evtData.<a class="code" href="../../dd/d2f/structAliHLTComponentEventData.html#ac076ab6770fb9fb4a960f65e6b55f92f">fBlockCnt</a> = inputBlocks.size();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordtype">int</span> nofTrials = 2;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> constEventBase = 0;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> constBlockBase = 0;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordtype">double</span> inputBlockMultiplier = 0.;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    mpSystem-&gt;<a class="code" href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html#aa1eda5cfd6c1f8a759b009ebbe95c74c">getOutputSize</a>(mProcessor, &amp;constEventBase, &amp;constBlockBase, &amp;inputBlockMultiplier);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    outputBufferSize = constEventBase + nofInputBlocks * constBlockBase + totalInputSize * inputBlockMultiplier;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    outputBufferSize+=<span class="keyword">sizeof</span>(<a class="code" href="../../df/de7/structAliHLTComponentStatistics.html">AliHLTComponentStatistics</a>) + <span class="keyword">sizeof</span>(<a class="code" href="../../dd/dd2/structAliHLTComponentTableEntry.html">AliHLTComponentTableEntry</a>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// take the full available buffer and increase if that</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// is too little</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    mOutputBuffer.resize(mOutputBuffer.capacity());</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (mOutputBuffer.size() &lt; outputBufferSize) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      mOutputBuffer.resize(outputBufferSize);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nofTrials &lt; 2) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="comment">// component did not update the output size</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    outputBufferSize = mOutputBuffer.size();</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    outputBlockCnt = 0;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// TODO: check if that is working with the corresponding allocation method of the</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">// component environment</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span> (pOutputBlocks) <span class="keyword">delete</span>[] pOutputBlocks;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    pOutputBlocks = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (pEventDoneData) <span class="keyword">delete</span> pEventDoneData;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    pEventDoneData = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    iResult = mpSystem-&gt;<a class="code" href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html#a0cf5745ccd8f722b69c9e855a572d406">processEvent</a>(mProcessor, &amp;evtData, &amp;inputBlocks[0], &amp;trigData,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                     &amp;mOutputBuffer[0], &amp;outputBufferSize,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                     &amp;outputBlockCnt, &amp;pOutputBlocks,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                     &amp;pEventDoneData);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (outputBufferSize &gt; 0) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">if</span> (outputBufferSize &gt; mOutputBuffer.size()) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(<a class="code" href="../../d1/df4/namespaceo2_1_1data__flow.html#a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;FATAL: fatal error: component writing beyond buffer capacity&quot;</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">return</span> -EFAULT;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (outputBufferSize &lt; mOutputBuffer.size()) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        mOutputBuffer.resize(outputBufferSize);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      mOutputBuffer.clear();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  } <span class="keywordflow">while</span> (iResult == ENOSPC &amp;&amp; --nofTrials &gt; 0);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// prepare output</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  { <span class="comment">// keep this after removing condition to preserve formatting</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    uint8_t* pOutputBufferStart = &amp;mOutputBuffer[0];</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    uint8_t* pOutputBufferEnd = pOutputBufferStart + mOutputBuffer.size();</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// consistency check for data blocks</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// 1) all specified data must be either inside the output buffer given</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">//    to the component or in one of the input buffers</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// 2) filter out special data blocks if they have been forwarded</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// Some components set both pointer and offset in the block descriptor as data</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// reference for blocks in the output buffer. Due to a misinterpretation in the</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// early days of development that is only allowed if fPtr is set to the beginning</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// of output buffer. The block is however fully described by offset relative to</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// beginning of output buffer.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordtype">unsigned</span> validBlocks = 0;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordtype">unsigned</span> totalPayloadSize = 0;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html">AliHLTComponentBlockData</a>* pOutputBlock = pOutputBlocks;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html">AliHLTComponentBlockData</a>* pFiltered = pOutputBlocks;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> blockIndex = 0; blockIndex &lt; outputBlockCnt; blockIndex++, pOutputBlock++) {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="comment">// filter special data blocks</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">if</span> (pOutputBlock-&gt;<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html#ac681d45448dde27bc0be6674746a3163">fDataType</a> == kDataTypeEvent) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// block descriptors without any attached payload are propagated</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordtype">bool</span> bValid = pOutputBlock-&gt;<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html#acd8177c2c180923181bdabf99b071435">fSize</a> == 0;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">// calculate the data reference</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      uint8_t* pStart =</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        pOutputBlock-&gt;<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html#ac58abcad516b0dcb60f5e8c19cd56791">fPtr</a> != <span class="keyword">nullptr</span> ? <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(pOutputBlock-&gt;<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html#ac58abcad516b0dcb60f5e8c19cd56791">fPtr</a>) : &amp;mOutputBuffer[0];</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      pStart += pOutputBlock-&gt;<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html#a717a40d9fa7aa7891f59d62e81b3639c">fOffset</a>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      uint8_t* pEnd = pStart + pOutputBlock-&gt;<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html#acd8177c2c180923181bdabf99b071435">fSize</a>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      pOutputBlock-&gt;<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html#ac58abcad516b0dcb60f5e8c19cd56791">fPtr</a> = pStart;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      pOutputBlock-&gt;<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html#a717a40d9fa7aa7891f59d62e81b3639c">fOffset</a> = 0;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="comment">// first search in the output buffer</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      bValid = bValid || (pStart &gt;= pOutputBufferStart &amp;&amp; pEnd &lt;= pOutputBufferEnd);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="comment">// possibly a forwarded data block, try the input buffers</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">if</span> (!bValid) {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp; ci : inputBlocks) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          uint8_t* pInputBufferStart = <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(ci.fPtr);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;          uint8_t* pInputBufferEnd = pInputBufferStart + ci.fSize;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          <span class="keywordflow">if</span> ((bValid = (pStart &gt;= pInputBufferStart &amp;&amp; pEnd &lt;= pInputBufferEnd))) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;          }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordflow">if</span> (bValid) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        totalPayloadSize += pOutputBlock-&gt;<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html#acd8177c2c180923181bdabf99b071435">fSize</a>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        validBlocks++;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        memcpy(pFiltered, pOutputBlock, <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d8d/structAliHLTComponentBlockData.html">AliHLTComponentBlockData</a>));</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        pFiltered++;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(<a class="code" href="../../d1/df4/namespaceo2_1_1data__flow.html#a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;Inconsistent data reference in output block &quot;</span> &lt;&lt; blockIndex;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    evtData.<a class="code" href="../../dd/d2f/structAliHLTComponentEventData.html#ac076ab6770fb9fb4a960f65e6b55f92f">fBlockCnt</a>=validBlocks;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// create the messages</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// TODO: for now there is an extra copy of the data, but it should be</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// handled in place</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="../../d4/d7c/namespaceo2.html#a884658a1ce846c09b0f6fea1a44a6a46">vector&lt;MessageFormat::BufferDesc_t&gt;</a> outputMessages =</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      mFormatHandler.<a class="code" href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a3cca4e1f2cc1f746d6c3ac9cdd81ed57">createMessages</a>(pOutputBlocks, validBlocks, totalPayloadSize, &amp;evtData, cbAllocate);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    dataArray.insert(dataArray.end(), outputMessages.begin(), outputMessages.end());</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// cleanup</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// NOTE: don&#39;t cleanup mOutputBuffer as the data is going to be used outside the class</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// until released.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  inputBlocks.clear();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  outputBlockCnt = 0;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">if</span> (pOutputBlocks) <span class="keyword">delete</span>[] pOutputBlocks;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  pOutputBlocks = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">if</span> (pEventDoneData) <span class="keyword">delete</span> pEventDoneData;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  pEventDoneData = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">return</span> -iResult;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div><div class="ttc" id="group__alihlt__component__datatypes_html_ga31a4fbc4ad8ff078a3c51df8440394b2"><div class="ttname"><a href="../../d5/d8c/group__alihlt__component__datatypes.html#ga31a4fbc4ad8ff078a3c51df8440394b2">AliHLTComponentDataTypeInitializer</a></div><div class="ttdeci">AliHLTComponentDataType AliHLTComponentDataTypeInitializer(const char id[kAliHLTComponentDataTypefIDsize], const char *origin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l01652">AliHLTDataTypes.h:1652</a></div></div>
<div class="ttc" id="structAliHLTComponentBlockData_html_ac681d45448dde27bc0be6674746a3163"><div class="ttname"><a href="../../d7/d8d/structAliHLTComponentBlockData.html#ac681d45448dde27bc0be6674746a3163">AliHLTComponentBlockData::fDataType</a></div><div class="ttdeci">AliHLTComponentDataType fDataType</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00868">AliHLTDataTypes.h:868</a></div></div>
<div class="ttc" id="structAliHLTComponentStatistics_html"><div class="ttname"><a href="../../df/de7/structAliHLTComponentStatistics.html">AliHLTComponentStatistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00919">AliHLTDataTypes.h:919</a></div></div>
<div class="ttc" id="Component_8cxx_html_a21e1aad43086cf76131101b31ca391cc"><div class="ttname"><a href="../../d8/dd8/Component_8cxx.html#a21e1aad43086cf76131101b31ca391cc">ENOKEY</a></div><div class="ttdeci">#define ENOKEY</div></div>
<div class="ttc" id="structAliHLTComponentEventData_html"><div class="ttname"><a href="../../dd/d2f/structAliHLTComponentEventData.html">AliHLTComponentEventData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00800">AliHLTDataTypes.h:800</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_a4e97b838ac96d726227da91ec35a9650"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events Simulate correct bunch interactions instead of placing only the average number of events A value [n] sets TFlen for [n] collisions in Number of bunches per train Number of bunch trains Instantaneous interaction rate Do not simulate border Total number of collisions to be placed in the interior of all time Do not select random but walk over array of events in stride steps h QA settings const char Legend entries for data from comparison histogram files const char nullptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00044">qconfigoptions.h:44</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab41197126363a090706e84fc055b2728ac22ebb6e272af6b85795a6440836540d"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728ac22ebb6e272af6b85795a6440836540d">o2::alice_hlt::Component::OptionKeyMsgsize</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00102">Component.h:102</a></div></div>
<div class="ttc" id="GPUCommonLogger_8h_html_aea3d0edfe28fc0325c636b2b33f0527a"><div class="ttname"><a href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a></div><div class="ttdeci">#define LOG(type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5b/GPUCommonLogger_8h_source.html#l00028">GPUCommonLogger.h:28</a></div></div>
<div class="ttc" id="structAliHLTComponentTriggerData_html_acf6d2865053c146e5e50d56f55d7daae"><div class="ttname"><a href="../../df/da3/structAliHLTComponentTriggerData.html#acf6d2865053c146e5e50d56f55d7daae">AliHLTComponentTriggerData::fStructSize</a></div><div class="ttdeci">AliHLTUInt32_t fStructSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l01034">AliHLTDataTypes.h:1034</a></div></div>
<div class="ttc" id="structAliHLTComponentTableEntry_html"><div class="ttname"><a href="../../dd/dd2/structAliHLTComponentTableEntry.html">AliHLTComponentTableEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00954">AliHLTDataTypes.h:954</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1SystemInterface_html_a5215dcfa4a5674c3abc11ef7d46a4d7d"><div class="ttname"><a href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html#a5215dcfa4a5674c3abc11ef7d46a4d7d">o2::alice_hlt::SystemInterface::createComponent</a></div><div class="ttdeci">int createComponent(const char *componentId, void *environParam, int argc, const char **argv, AliHLTComponentHandle *handle, const char *description)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/SystemInterface_8cxx_source.html#l00192">SystemInterface.cxx:192</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1SystemInterface_html_aa1eda5cfd6c1f8a759b009ebbe95c74c"><div class="ttname"><a href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html#aa1eda5cfd6c1f8a759b009ebbe95c74c">o2::alice_hlt::SystemInterface::getOutputSize</a></div><div class="ttdeci">int getOutputSize(AliHLTComponentHandle handle, unsigned long *constEventBase, unsigned long *constBlockBase, double *inputBlockMultiplier)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/SystemInterface_8cxx_source.html#l00231">SystemInterface.cxx:231</a></div></div>
<div class="ttc" id="namespaceo2_1_1pmr_html_aeea588f6ab06f06d4131f84d8eea272b"><div class="ttname"><a href="../../dd/d2d/namespaceo2_1_1pmr.html#aeea588f6ab06f06d4131f84d8eea272b">o2::pmr::vector</a></div><div class="ttdeci">std::vector&lt; T, o2::pmr::polymorphic_allocator&lt; T &gt; &gt; vector</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d03/MemoryResources_8h_source.html#l00282">MemoryResources.h:282</a></div></div>
<div class="ttc" id="namespaceo2_1_1data__flow_html_a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873"><div class="ttname"><a href="../../d1/df4/namespaceo2_1_1data__flow.html#a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873">o2::data_flow::ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/TimeframeParser_8cxx_source.html#l00049">TimeframeParser.cxx:49</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab41197126363a090706e84fc055b2728a4e6595717a2d832d68dec19d1b1e7113"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a4e6595717a2d832d68dec19d1b1e7113">o2::alice_hlt::Component::OptionKeyLast</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00105">Component.h:105</a></div></div>
<div class="ttc" id="Component_8h_html"><div class="ttname"><a href="../../d0/da1/Component_8h.html">Component.h</a></div></div>
<div class="ttc" id="structAliHLTComponentTriggerData_html"><div class="ttname"><a href="../../df/da3/structAliHLTComponentTriggerData.html">AliHLTComponentTriggerData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l01033">AliHLTDataTypes.h:1033</a></div></div>
<div class="ttc" id="SystemInterface_8h_html"><div class="ttname"><a href="../../d8/d1d/SystemInterface_8h.html">SystemInterface.h</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1MessageFormat_html_a1d67b8da93e9fd5a424d5d95d953b7eb"><div class="ttname"><a href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a1d67b8da93e9fd5a424d5d95d953b7eb">o2::alice_hlt::MessageFormat::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d62/MessageFormat_8cxx_source.html#l00066">MessageFormat.cxx:66</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a3d1e3edfcf61ca2d831883e1afbad89e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a></div><div class="ttdeci">GLsizeiptr size</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00659">glcorearb.h:659</a></div></div>
<div class="ttc" id="AliHLTDataTypes_8h_html"><div class="ttname"><a href="../../d6/d34/AliHLTDataTypes_8h.html">AliHLTDataTypes.h</a></div><div class="ttdoc">Data type declaration for the HLT module. </div></div>
<div class="ttc" id="AliHLTDataTypes_8h_html_ac54af0a2f87c6cd527f7ddb1abfbd1aa"><div class="ttname"><a href="../../d6/d34/AliHLTDataTypes_8h.html#ac54af0a2f87c6cd527f7ddb1abfbd1aa">kEmptyHLTComponentHandle</a></div><div class="ttdeci">const AliHLTComponentHandle kEmptyHLTComponentHandle</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l01522">AliHLTDataTypes.h:1522</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_a8d11d057b6867d11c1f401952f9980b9"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a8d11d057b6867d11c1f401952f9980b9">o2::alice_hlt::Component::GetOptionsDescription</a></div><div class="ttdeci">static bpo::options_description GetOptionsDescription()</div><div class="ttdoc">get description of options </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd8/Component_8cxx_source.html#l00064">Component.cxx:64</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1SystemInterface_html"><div class="ttname"><a href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html">o2::alice_hlt::SystemInterface</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1d/SystemInterface_8h_source.html#l00043">SystemInterface.h:43</a></div></div>
<div class="ttc" id="namespaceo2_html_a884658a1ce846c09b0f6fea1a44a6a46"><div class="ttname"><a href="../../d4/d7c/namespaceo2.html#a884658a1ce846c09b0f6fea1a44a6a46">o2::vector</a></div><div class="ttdeci">std::vector&lt; T, o2::pmr::polymorphic_allocator&lt; T &gt; &gt; vector</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d03/MemoryResources_8h_source.html#l00304">MemoryResources.h:304</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab41197126363a090706e84fc055b2728a1abba587c6d3bffe133bd6d2b590200a"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a1abba587c6d3bffe133bd6d2b590200a">o2::alice_hlt::Component::OptionKeyInstanceId</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00104">Component.h:104</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1SystemInterface_html_a0cf5745ccd8f722b69c9e855a572d406"><div class="ttname"><a href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html#a0cf5745ccd8f722b69c9e855a572d406">o2::alice_hlt::SystemInterface::processEvent</a></div><div class="ttdeci">int processEvent(AliHLTComponentHandle handle, const AliHLTComponentEventData *evtData, const AliHLTComponentBlockData *blocks, AliHLTComponentTriggerData *trigData, AliHLTUInt8_t *outputPtr, AliHLTUInt32_t *size, AliHLTUInt32_t *outputBlockCnt, AliHLTComponentBlockData **outputBlocks, AliHLTComponentEventDoneData **edd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/SystemInterface_8cxx_source.html#l00211">SystemInterface.cxx:211</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab41197126363a090706e84fc055b2728a8fb9d0c41b9776d13ad15ea8db229e93"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a8fb9d0c41b9776d13ad15ea8db229e93">o2::alice_hlt::Component::OptionKeyComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00098">Component.h:98</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ad1d472571029278f211917bdf3af0529"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ad1d472571029278f211917bdf3af0529">o2::alice_hlt::Component::init</a></div><div class="ttdeci">int init(int argc, char **argv)</div><div class="ttdoc">Init the component. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd8/Component_8cxx_source.html#l00094">Component.cxx:94</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab41197126363a090706e84fc055b2728a07fae1a48915596e840ea7b294f2037e"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a07fae1a48915596e840ea7b294f2037e">o2::alice_hlt::Component::OptionKeyRun</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00100">Component.h:100</a></div></div>
<div class="ttc" id="Component_8h_html_a78e5861fb365f3ca89bda1c6fadc8c04"><div class="ttname"><a href="../../d0/da1/Component_8h.html#a78e5861fb365f3ca89bda1c6fadc8c04">cballoc_signal_t</a></div><div class="ttdeci">boost::signals2::signal&lt; unsigned char *(unsigned int)&gt; cballoc_signal_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00036">Component.h:36</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a1e71d9c196e4683cc06c4b54d53f7ef5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a1e71d9c196e4683cc06c4b54d53f7ef5">mode</a></div><div class="ttdeci">GLenum mode</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00266">glcorearb.h:266</a></div></div>
<div class="ttc" id="structAliHLTComponentEventData_html_ac076ab6770fb9fb4a960f65e6b55f92f"><div class="ttname"><a href="../../dd/d2f/structAliHLTComponentEventData.html#ac076ab6770fb9fb4a960f65e6b55f92f">AliHLTComponentEventData::fBlockCnt</a></div><div class="ttdeci">AliHLTUInt32_t fBlockCnt</div><div class="ttdoc">Fractional event creation time in micro seconds. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00805">AliHLTDataTypes.h:805</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_a5fbbb25429bbcd089af880705ff34fff"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a5fbbb25429bbcd089af880705ff34fff">o2::alice_hlt::Component::process</a></div><div class="ttdeci">int process(std::vector&lt; o2::alice_hlt::MessageFormat::BufferDesc_t &gt; &amp;dataArray, cballoc_signal_t *cbAllocate=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd8/Component_8cxx_source.html#l00222">Component.cxx:222</a></div></div>
<div class="ttc" id="structAliHLTComponentBlockData_html_a717a40d9fa7aa7891f59d62e81b3639c"><div class="ttname"><a href="../../d7/d8d/structAliHLTComponentBlockData.html#a717a40d9fa7aa7891f59d62e81b3639c">AliHLTComponentBlockData::fOffset</a></div><div class="ttdeci">AliHLTUInt32_t fOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00862">AliHLTDataTypes.h:862</a></div></div>
<div class="ttc" id="AliHLTDataTypes_8h_html_a0a96ae73d5fc148bbf561e38e8a3304a"><div class="ttname"><a href="../../d6/d34/AliHLTDataTypes_8h.html#a0a96ae73d5fc148bbf561e38e8a3304a">gkAliEventTypeData</a></div><div class="ttdeci">const AliHLTUInt32_t gkAliEventTypeData</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l01050">AliHLTDataTypes.h:1050</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab41197126363a090706e84fc055b2728a0ff905b8daa4016896cbeb271ae9c7bc"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a0ff905b8daa4016896cbeb271ae9c7bc">o2::alice_hlt::Component::OptionKeyParameter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00099">Component.h:99</a></div></div>
<div class="ttc" id="namespaceo2_1_1alice__hlt_html"><div class="ttname"><a href="../../d4/d6a/namespaceo2_1_1alice__hlt.html">o2::alice_hlt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00042">Component.h:42</a></div></div>
<div class="ttc" id="structAliHLTComponentBlockData_html_acd8177c2c180923181bdabf99b071435"><div class="ttname"><a href="../../d7/d8d/structAliHLTComponentBlockData.html#acd8177c2c180923181bdabf99b071435">AliHLTComponentBlockData::fSize</a></div><div class="ttdeci">AliHLTUInt32_t fSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00866">AliHLTDataTypes.h:866</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_a8775db6d1a2c1afc2e77cd3c8f39da6f"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#a8775db6d1a2c1afc2e77cd3c8f39da6f">o2::alice_hlt::Component::Component</a></div><div class="ttdeci">Component()</div><div class="ttdoc">default constructor </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd8/Component_8cxx_source.html#l00050">Component.cxx:50</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1MessageFormat_html_a92d95bda7ae942838ca41d259c35001e"><div class="ttname"><a href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a92d95bda7ae942838ca41d259c35001e">o2::alice_hlt::MessageFormat::addMessages</a></div><div class="ttdeci">int addMessages(const std::vector&lt; BufferDesc_t &gt; &amp;list)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d62/MessageFormat_8cxx_source.html#l00131">MessageFormat.cxx:131</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1SystemInterface_html_aa6aee7bbc925d0771aeac61c4ab9695c"><div class="ttname"><a href="../../de/d1a/classo2_1_1alice__hlt_1_1SystemInterface.html#aa6aee7bbc925d0771aeac61c4ab9695c">o2::alice_hlt::SystemInterface::loadLibrary</a></div><div class="ttdeci">int loadLibrary(const char *libname)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/SystemInterface_8cxx_source.html#l00178">SystemInterface.cxx:178</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab8378fa275af98e568a7e91d33d867af"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab8378fa275af98e568a7e91d33d867af">o2::alice_hlt::Component::~Component</a></div><div class="ttdeci">~Component()</div><div class="ttdoc">destructor </div></div>
<div class="ttc" id="structAliHLTComponentEventDoneData_html"><div class="ttname"><a href="../../d8/d91/structAliHLTComponentEventDoneData.html">AliHLTComponentEventDoneData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00880">AliHLTDataTypes.h:880</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1MessageFormat_html_a0332b6db2acf778e9f1a8eec8a8f0ff4"><div class="ttname"><a href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a0332b6db2acf778e9f1a8eec8a8f0ff4">o2::alice_hlt::MessageFormat::getEvtDataList</a></div><div class="ttdeci">const std::vector&lt; AliHLTComponentEventData &gt; &amp; getEvtDataList() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dda/MessageFormat_8h_source.html#l00182">MessageFormat.h:182</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ac451f0cc05b86746832570bf53c77754"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ac451f0cc05b86746832570bf53c77754">o2::alice_hlt::Component::OptionKeys</a></div><div class="ttdeci">static constexpr const char * OptionKeys[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00108">Component.h:108</a></div></div>
<div class="ttc" id="structAliHLTComponentBlockData_html_ac58abcad516b0dcb60f5e8c19cd56791"><div class="ttname"><a href="../../d7/d8d/structAliHLTComponentBlockData.html#ac58abcad516b0dcb60f5e8c19cd56791">AliHLTComponentBlockData::fPtr</a></div><div class="ttdeci">void * fPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00864">AliHLTDataTypes.h:864</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab41197126363a090706e84fc055b2728a5fa2911b6cdb4d027ec874df2d60ac1f"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728a5fa2911b6cdb4d027ec874df2d60ac1f">o2::alice_hlt::Component::OptionKeyOCDB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00101">Component.h:101</a></div></div>
<div class="ttc" id="structAliHLTComponentBlockData_html"><div class="ttname"><a href="../../d7/d8d/structAliHLTComponentBlockData.html">AliHLTComponentBlockData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00856">AliHLTDataTypes.h:856</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_a914ca181718316cf7ebf4d3b644571e6"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a914ca181718316cf7ebf4d3b644571e6">o2::framework::options_description</a></div><div class="ttdeci">boost::program_options::options_description options_description</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2b/ConfigParamsHelper_8h_source.html#l00026">ConfigParamsHelper.h:26</a></div></div>
<div class="ttc" id="structAliHLTComponentEventData_html_a60c29f9052e668338f19119c8b68920c"><div class="ttname"><a href="../../dd/d2f/structAliHLTComponentEventData.html#a60c29f9052e668338f19119c8b68920c">AliHLTComponentEventData::fEventID</a></div><div class="ttdeci">AliHLTEventID_t fEventID</div><div class="ttdoc">Size of this structure in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00802">AliHLTDataTypes.h:802</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab41197126363a090706e84fc055b2728ac4be109e9a57583517de973ad2ec8e3a"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728ac4be109e9a57583517de973ad2ec8e3a">o2::alice_hlt::Component::OptionKeyOutputMode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00103">Component.h:103</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1MessageFormat_html_a3cca4e1f2cc1f746d6c3ac9cdd81ed57"><div class="ttname"><a href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a3cca4e1f2cc1f746d6c3ac9cdd81ed57">o2::alice_hlt::MessageFormat::createMessages</a></div><div class="ttdeci">std::vector&lt; BufferDesc_t &gt; createMessages(const AliHLTComponentBlockData *blocks, unsigned count, unsigned totalPayloadSize, const AliHLTComponentEventData *evtData=nullptr, boost::signals2::signal&lt; unsigned char *(unsigned int)&gt; *cbAllocate=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d62/MessageFormat_8cxx_source.html#l00279">MessageFormat.cxx:279</a></div></div>
<div class="ttc" id="structAliHLTComponentDataType_html"><div class="ttname"><a href="../../df/dcd/structAliHLTComponentDataType.html">AliHLTComponentDataType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00838">AliHLTDataTypes.h:838</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1Component_html_ab41197126363a090706e84fc055b2728aca48fc29aa98a561c8fe5b4325906d88"><div class="ttname"><a href="../../d2/dcf/classo2_1_1alice__hlt_1_1Component.html#ab41197126363a090706e84fc055b2728aca48fc29aa98a561c8fe5b4325906d88">o2::alice_hlt::Component::OptionKeyLibrary</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da1/Component_8h_source.html#l00097">Component.h:97</a></div></div>
<div class="ttc" id="structAliHLTComponentEventData_html_a99a73e4bcd560dd38d3384d8c8df0fe7"><div class="ttname"><a href="../../dd/d2f/structAliHLTComponentEventData.html#a99a73e4bcd560dd38d3384d8c8df0fe7">AliHLTComponentEventData::fStructSize</a></div><div class="ttdeci">AliHLTUInt32_t fStructSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/AliHLTDataTypes_8h_source.html#l00801">AliHLTDataTypes.h:801</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1MessageFormat_html_a7ea422f79ca8cbf1db960a5d45f5a96f"><div class="ttname"><a href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#a7ea422f79ca8cbf1db960a5d45f5a96f">o2::alice_hlt::MessageFormat::setOutputMode</a></div><div class="ttdeci">void setOutputMode(unsigned mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dda/MessageFormat_8h_source.html#l00132">MessageFormat.h:132</a></div></div>
<div class="ttc" id="classo2_1_1alice__hlt_1_1MessageFormat_html_aa69a193f8e58c56b427c1a780b9c3a68"><div class="ttname"><a href="../../d5/d57/classo2_1_1alice__hlt_1_1MessageFormat.html#aa69a193f8e58c56b427c1a780b9c3a68">o2::alice_hlt::MessageFormat::getBlockDescriptors</a></div><div class="ttdeci">std::vector&lt; BlockDescriptor &gt; &amp; getBlockDescriptors()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dda/MessageFormat_8h_source.html#l00148">MessageFormat.h:148</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_b05a5fa85f84bfc9013183c9d87f9a36.html">Utilities</a></li><li class="navelem"><a class="el" href="../../dir_89404594baeba009a250b72877027579.html">aliceHLTwrapper</a></li><li class="navelem"><a class="el" href="../../dir_468a7cabf80e2295683d860d132e9318.html">src</a></li><li class="navelem"><a class="el" href="../../d8/dd8/Component_8cxx.html">Component.cxx</a></li>
    <li class="footer">Generated on Thu Jun 4 2020 09:30:36 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
