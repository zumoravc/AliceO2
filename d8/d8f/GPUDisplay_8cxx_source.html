<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/travis/build/AliceO2Group/AliceO2/GPU/GPUTracking/Standalone/display/GPUDisplay.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d8/d8f/GPUDisplay_8cxx_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GPUDisplay.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d8/d8f/GPUDisplay_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright CERN and copyright holders of ALICE O2. This software is</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// distributed under the terms of the GNU General Public License v3 (GPL</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See http://alice-o2.web.cern.ch/license for full licensing information.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d69/GPUDisplay_8h.html">GPUDisplay.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#ifdef GPUCA_BUILD_EVENT_DISPLAY</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/dab/GPUTPCDef_8h.html">GPUTPCDef.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;GL/glu.h&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#ifndef _WIN32</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d5f/bitmapfile_8h.html">bitmapfile.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;../utils/linux_helpers.h&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#ifdef WITH_OPENMP</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;omp.h&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/de2/GPUTPCMCInfo_8h.html">GPUTPCMCInfo.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/ded/GPUChainTracking_8h.html">GPUChainTracking.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/dcc/GPUQA_8h.html">GPUQA.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d4a/GPUTPCSliceData_8h.html">GPUTPCSliceData.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/ded/GPUChainTracking_8h.html">GPUChainTracking.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d88/GPUTPCTrack_8h.html">GPUTPCTrack.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d25/GPUTPCTracker_8h.html">GPUTPCTracker.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d44/GPUTRDTracker_8h.html">GPUTRDTracker.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dfd/GPUTPCGMMergedTrack_8h.html">GPUTPCGMMergedTrack.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/dd8/GPUTPCGMPropagator_8h.html">GPUTPCGMPropagator.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/dde/GPUTPCClusterData_8h.html">GPUTPCClusterData.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d3c/GPUTRDTrackletWord_8h.html">GPUTRDTrackletWord.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d05/GPUTRDGeometry_8h.html">GPUTRDGeometry.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d5c/GPUO2DataTypes_8h.html">GPUO2DataTypes.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;GPUParam.inc&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d2e/GPUTPCConvertImpl_8h.html">GPUTPCConvertImpl.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d08/qconfig_8h.html">utils/qconfig.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#ifdef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7c/GPUDisplayShaders_8h.html">GPUDisplayShaders.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;constexpr <a class="code" href="../../d1/d78/unionhmm__mat4.html">hmm_mat4</a> MY_HMM_IDENTITY = {{{1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {0, 0, 0, 1}}};</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;constexpr <a class="code" href="../../d1/d78/unionhmm__mat4.html">hmm_mat4</a> MY_HMM_FROM(<span class="keywordtype">float</span> (&amp;<a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)[16]) { <span class="keywordflow">return</span> {{{<a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>[0], <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>[1], v[2], v[3]}, {v[4], v[5], v[6], v[7]}, {v[8], v[9], v[10], v[11]}, {v[12], v[13], v[14], v[15]}}}; }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html">GPUCA_NAMESPACE::gpu</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//#define CHKERR(cmd) {cmd;}</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#define CHKERR(cmd)                                                                           \</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">  do {                                                                                        \</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">    (cmd);                                                                                    \</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">    GLenum err = glGetError();                                                                \</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">    while (err != GL_NO_ERROR) {                                                              \</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">      GPUError(&quot;OpenGL Error %d: %s (%s: %d)&quot;, err, gluErrorString(err), __FILE__, __LINE__); \</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">      throw std::runtime_error(&quot;OpenGL Failure&quot;);                                             \</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">    }                                                                                         \</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">  } while (false)</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#define OPENGL_EMULATE_MULTI_DRAW 0</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#define GL_SCALE_FACTOR 100.f</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#define SEPERATE_GLOBAL_TRACKS_LIMIT (mSeparateGlobalTracks ? tGLOBALTRACK : TRACK_TYPE_ID_LIMIT)</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#define GET_CID(slice, i) (tracker.Param().earlyTpcTransform ? tracker.ClusterData()[i].id : (tracker.GetConstantMem()-&gt;ioPtrs.clustersNative-&gt;clusterOffset[slice][0] + i))</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#ad5c8a39728d9c3aaf832f4f49623cc24">GPUDisplay::configDisplay</a>&amp; GPUDisplay_GetConfig(<a class="code" href="../../d5/d5f/classGPUCA__NAMESPACE_1_1gpu_1_1GPUChainTracking.html">GPUChainTracking</a>* <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>)</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#if !defined(GPUCA_STANDALONE)</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">static</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#ad5c8a39728d9c3aaf832f4f49623cc24">GPUDisplay::configDisplay</a> defaultConfig;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">if</span> (rec-&gt;<a class="code" href="../../d5/d5f/classGPUCA__NAMESPACE_1_1gpu_1_1GPUChainTracking.html#a069e62e9b04213c4e5df158c27f2a636">mConfigDisplay</a>) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> *((<span class="keyword">const</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#ad5c8a39728d9c3aaf832f4f49623cc24">GPUDisplay::configDisplay</a>*)rec-&gt;<a class="code" href="../../d5/d5f/classGPUCA__NAMESPACE_1_1gpu_1_1GPUChainTracking.html#a069e62e9b04213c4e5df158c27f2a636">mConfigDisplay</a>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> defaultConfig;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a6f1b7c22899bd6bcfe619dc6d85eba53">configStandalone</a>.configGL;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a9d5b3232d365f4dd0f40e5f50c4f7ffd">GPUDisplay::GPUDisplay</a>(<a class="code" href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html">GPUDisplayBackend</a>* backend, <a class="code" href="../../d5/d5f/classGPUCA__NAMESPACE_1_1gpu_1_1GPUChainTracking.html">GPUChainTracking</a>* rec, <a class="code" href="../../d0/dd9/classGPUCA__NAMESPACE_1_1gpu_1_1GPUQA.html">GPUQA</a>* <a class="code" href="../../d8/de9/qconfigoptions_8h.html#acabef52906f11a350c9ef63315532265">qa</a>) : mBackend(backend), mChain(rec), mConfig(GPUDisplay_GetConfig(rec)), mQA(qa), mMerger(rec-&gt;GetTPCMerger()) { backend-&gt;<a class="code" href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#a05d89716975c79685e3b90cb7cc5b06b">mDisplay</a> = <span class="keyword">this</span>; }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keyword">const</span> <a class="code" href="../../da/daf/structGPUCA__NAMESPACE_1_1gpu_1_1GPUParam.html">GPUParam</a>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">GPUDisplay::param</a>() { <span class="keywordflow">return</span> mChain-&gt;GetParam(); }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; GPUDisplay::sliceTracker(<span class="keywordtype">int</span> <a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>) { <span class="keywordflow">return</span> mChain-&gt;GetTPCSliceTrackers()[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>]; }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">const</span> <a class="code" href="../../db/db5/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTRDTracker__t.html">GPUTRDTrackerGPU</a>&amp; GPUDisplay::trdTracker() { <span class="keywordflow">return</span> *mChain-&gt;GetTRDTracker(); }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keyword">const</span> <a class="code" href="../../d2/d7f/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTrackingInOutPointers.html">GPUTrackingInOutPointers</a> GPUDisplay::ioptrs() { <span class="keywordflow">return</span> mChain-&gt;mIOPtrs; }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::drawVertices(<span class="keyword">const</span> vboList&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>, <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a2cdbb9508b46bd8f3a6039b702ebd16d">t</a>)</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keyword">auto</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a> = std::get&lt;0&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keyword">auto</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a> = std::get&lt;1&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keyword">auto</span> iSlice = std::get&lt;2&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">if</span> (count == 0) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  mNDrawCalls += <a class="code" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">if</span> (mUseMultiVBO) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#ifdef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a4c13098a615d32e7f04aa4105149564f">glBindVertexArray</a>(mVertexArray));</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a7180045dcb52b22af2cd0366026bc3ed">GL_ARRAY_BUFFER</a>, mVBOId[iSlice]));</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    CHKERR(glVertexPointer(3, <a class="code" href="../../dc/da3/glcorearb_8h.html#a6d19915d4237cb559505bd3e5dcfcf3c">GL_FLOAT</a>, 0, <span class="keyword">nullptr</span>));</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a8afadc1fe36886688a02097cc63a17cb">glVertexAttribPointer</a>(0, 3, <a class="code" href="../../dc/da3/glcorearb_8h.html#a6d19915d4237cb559505bd3e5dcfcf3c">GL_FLOAT</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#abca6d43f43fae31f49dcb883b2f301f6">GL_FALSE</a>, 0, <span class="keyword">nullptr</span>));</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a6e8ee482001ee8fb9b3d4851116779b4">glEnableVertexAttribArray</a>(0);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">if</span> (mUseGLIndirectDraw) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ab083224e5301beae09d783d2dd1b142a">glMultiDrawArraysIndirect</a>(t, (<span class="keywordtype">void</span>*)(<span class="keywordtype">size_t</span>)((mIndirectSliceOffset[iSlice] + <a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a>) * <span class="keyword">sizeof</span>(DrawArraysIndirectCommand)), count, 0));</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (OPENGL_EMULATE_MULTI_DRAW) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>; k++) {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a89377449aceadc060b577926b5413bd2">glDrawArrays</a>(t, mVertexBufferStart[iSlice][<a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a> + k], mVertexBufferCount[iSlice][<a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a> + k]));</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a541a3beb46078c868d8c1c308ea3bac8">glMultiDrawArrays</a>(t, mVertexBufferStart[iSlice].<a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>() + <a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a>, mVertexBufferCount[iSlice].<a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>() + <a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a>, count));</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::insertVertexList(std::pair&lt;<a class="code" href="../../d5/d2f/vecpod_8h.html#a9b2666adbe662721e5de763dc5c70a83">vecpod&lt;GLint&gt;</a>*, <a class="code" href="../../d5/d2f/vecpod_8h.html#a9b2666adbe662721e5de763dc5c70a83">vecpod&lt;GLsizei&gt;</a>*&gt;&amp; vBuf, <span class="keywordtype">size_t</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a>, <span class="keywordtype">size_t</span> last)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">if</span> (first == last) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  vBuf.first-&gt;emplace_back(first);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  vBuf.second-&gt;emplace_back(last - first);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::insertVertexList(<span class="keywordtype">int</span> iSlice, <span class="keywordtype">size_t</span> first, <span class="keywordtype">size_t</span> last)</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  std::pair&lt;vecpod&lt;GLint&gt;*, <a class="code" href="../../d5/d2f/vecpod_8h.html#a9b2666adbe662721e5de763dc5c70a83">vecpod&lt;GLsizei&gt;</a>*&gt; vBuf(mVertexBufferStart + iSlice, mVertexBufferCount + iSlice);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  insertVertexList(vBuf, first, last);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keywordtype">void</span> GPUDisplay::calcXYZ(<span class="keyword">const</span> <span class="keywordtype">float</span>* matrix)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  mXYZ[0] = -(matrix[0] * matrix[12] + matrix[1] * matrix[13] + matrix[2] * matrix[14]);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  mXYZ[1] = -(matrix[4] * matrix[12] + matrix[5] * matrix[13] + matrix[6] * matrix[14]);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  mXYZ[2] = -(matrix[8] * matrix[12] + matrix[9] * matrix[13] + matrix[10] * matrix[14]);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  mAngle[0] = -asinf(matrix[6]); <span class="comment">// Invert rotY*rotX*rotZ</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../d2/d88/classA.html">A</a> = cosf(mAngle[0]);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">if</span> (fabsf(A) &gt; 0.005) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    mAngle[1] = atan2f(-matrix[2] / A, matrix[10] / A);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    mAngle[2] = atan2f(matrix[4] / A, matrix[5] / A);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    mAngle[1] = 0;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    mAngle[2] = atan2f(-matrix[1], -matrix[0]);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  mRPhiTheta[0] = sqrtf(mXYZ[0] * mXYZ[0] + mXYZ[1] * mXYZ[1] + mXYZ[2] * mXYZ[2]);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  mRPhiTheta[1] = atan2f(mXYZ[0], mXYZ[2]);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  mRPhiTheta[2] = atan2f(mXYZ[1], sqrtf(mXYZ[0] * mXYZ[0] + mXYZ[2] * mXYZ[2]));</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  createQuaternionFromMatrix(mQuat, matrix);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">/*float mAngle[1] = -asinf(matrix[2]); //Calculate Y-axis angle - for rotX*rotY*rotZ</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">  float C = cosf( angle_y );</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">  if (fabsf(C) &gt; 0.005) //Gimball lock?</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">  {</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">      mAngle[0]  = atan2f(-matrix[6] / C, matrix[10] / C);</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">      mAngle[2]  = atan2f(-matrix[1] / C, matrix[0] / C);</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">  else</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">  {</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">      mAngle[0]  = 0; //set x-angle</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">      mAngle[2]  = atan2f(matrix[4], matrix[5]);</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">  }*/</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a28ef843074bd923f8e71bae2ba8c53f3">GPUDisplay::SetCollisionFirstCluster</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> collision, <span class="keywordtype">int</span> slice, <span class="keywordtype">int</span> cluster)</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  mNCollissions = collision + 1;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  mCollisionClusters.resize(mNCollissions);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  mCollisionClusters[collision][slice] = cluster;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">void</span> GPUDisplay::mAnimationCloseAngle(<span class="keywordtype">float</span>&amp; newangle, <span class="keywordtype">float</span> lastAngle)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> delta = lastAngle &gt; newangle ? (2 * M_PI) : (-2 * M_PI);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">while</span> (fabsf(newangle + delta - lastAngle) &lt; fabsf(newangle - lastAngle)) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    newangle += delta;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="keywordtype">void</span> GPUDisplay::mAnimateCloseQuaternion(<span class="keywordtype">float</span>* v, <span class="keywordtype">float</span> lastx, <span class="keywordtype">float</span> lasty, <span class="keywordtype">float</span> lastz, <span class="keywordtype">float</span> lastw)</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">float</span> distPos2 = (lastx - v[0]) * (lastx - v[0]) + (lasty - v[1]) * (lasty - v[1]) + (lastz - v[2]) * (lastz - v[2]) + (lastw - v[3]) * (lastw - v[3]);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordtype">float</span> distNeg2 = (lastx + v[0]) * (lastx + v[0]) + (lasty + v[1]) * (lasty + v[1]) + (lastz + v[2]) * (lastz + v[2]) + (lastw + v[3]) * (lastw + v[3]);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span> (distPos2 &gt; distNeg2) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      v[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = -v[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keywordtype">void</span> GPUDisplay::setAnimationPoint()</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">if</span> (mCfg.animationMode &amp; 4) <span class="comment">// Spherical</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">float</span> rxy = sqrtf(mXYZ[0] * mXYZ[0] + mXYZ[2] * mXYZ[2]);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">float</span> anglePhi = atan2f(mXYZ[0], mXYZ[2]);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">float</span> angleTheta = atan2f(mXYZ[1], rxy);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (mAnimateVectors[0].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>()) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      mAnimationCloseAngle(anglePhi, mAnimateVectors[2].back());</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">if</span> (mAnimateVectors[0].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>()) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      mAnimationCloseAngle(angleTheta, mAnimateVectors[3].back());</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    mAnimateVectors[1].emplace_back(0);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    mAnimateVectors[2].emplace_back(anglePhi);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    mAnimateVectors[3].emplace_back(angleTheta);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      mAnimateVectors[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1].emplace_back(mXYZ[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// Cartesian</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a> = sqrtf(mXYZ[0] * mXYZ[0] + mXYZ[1] * mXYZ[1] + mXYZ[2] * mXYZ[2]);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  mAnimateVectors[4].emplace_back(r);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> (mCfg.animationMode &amp; 1) <span class="comment">// Euler-angles</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordtype">float</span> newangle = mAngle[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordflow">if</span> (mAnimateVectors[0].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>()) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        mAnimationCloseAngle(newangle, mAnimateVectors[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 5].back());</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      mAnimateVectors[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 5].emplace_back(newangle);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    mAnimateVectors[8].emplace_back(0);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  } <span class="keywordflow">else</span> { <span class="comment">// Quaternions</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">float</span> v[4];</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    createQuaternionFromMatrix(v, mViewMatrixP);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (mAnimateVectors[0].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>()) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      mAnimateCloseQuaternion(v, mAnimateVectors[5].back(), mAnimateVectors[6].back(), mAnimateVectors[7].back(), mAnimateVectors[8].back());</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      mAnimateVectors[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 5].emplace_back(v[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">float</span> delay = 0.f;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">if</span> (mAnimateVectors[0].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>()) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    delay = mAnimateVectors[0].back() + ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#ad08a37964429d340d966dfa679443e8f">int</a>)(mAnimationDelay * 20)) / 20.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  mAnimateVectors[0].emplace_back(delay);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  mAnimateConfig.emplace_back(mCfg);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keywordtype">void</span> GPUDisplay::resetAnimation()</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;{</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 9; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    mAnimateVectors[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].clear();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  mAnimateConfig.clear();</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  mAnimate = 0;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="keywordtype">void</span> GPUDisplay::removeAnimationPoint()</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">if</span> (mAnimateVectors[0].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() == 0) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 9; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    mAnimateVectors[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].pop_back();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  mAnimateConfig.pop_back();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="keywordtype">void</span> GPUDisplay::startAnimation()</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;{</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    mAnimationSplines[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].create(mAnimateVectors[0], mAnimateVectors[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1]);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  mAnimationTimer.ResetStart();</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  mAnimationFrame = 0;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  mAnimate = 1;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  mAnimationLastBase = 0;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::ActivateColor()</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;{</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  glColor3f(mDrawColor[0], mDrawColor[1], mDrawColor[2]);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a264e119325884947733141031ec9ff68">glUniform3fv</a>(mColorId, 1, &amp;mDrawColor[0]);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorClusters()</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">if</span> (mCfg.colorCollisions) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    mDrawColor = {0, 0.3, 0.7};</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    mDrawColor = {0, 0.7, 1.0};</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  ActivateColor();</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorTRD()</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;{</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (mCfg.colorCollisions) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    mDrawColor = {0.7, 0.3, 0};</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    mDrawColor = {1.0, 0.7, 0};</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  ActivateColor();</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorInitLinks()</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    mDrawColor = {0.42, 0.4, 0.1};</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    mDrawColor = {0.42, 0.4, 0.1};</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  ActivateColor();</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorLinks()</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    mDrawColor = {0.6, 0.1, 0.1};</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    mDrawColor = {0.8, 0.2, 0.2};</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  ActivateColor();</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorSeeds()</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    mDrawColor = {0.6, 0.0, 0.65};</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    mDrawColor = {0.8, 0.1, 0.85};</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  ActivateColor();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorTracklets()</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    mDrawColor = {0, 0, 0};</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    mDrawColor = {1, 1, 1};</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  ActivateColor();</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorTracks()</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    mDrawColor = {0.6, 0, 0.1};</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    mDrawColor = {0.8, 1., 0.15};</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  ActivateColor();</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorGlobalTracks()</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;{</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    mDrawColor = {0.8, 0.2, 0};</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    mDrawColor = {1.0, 0.4, 0};</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  ActivateColor();</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorFinal()</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;{</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordflow">if</span> (mCfg.colorCollisions) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    mDrawColor = {0, 0.6, 0.1};</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    mDrawColor = {0, 0.7, 0.2};</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  ActivateColor();</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorGrid()</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;{</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    mDrawColor = {0.5, 0.5, 0};</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    mDrawColor = {0.7, 0.7, 0.0};</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  ActivateColor();</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetColorMarked()</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    mDrawColor = {0.8, 0, 0};</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    mDrawColor = {1.0, 0.0, 0.0};</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  ActivateColor();</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::SetCollisionColor(<span class="keywordtype">int</span> col)</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;{</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordtype">int</span> red = (col * 2) % 5;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ab4fcc6ff520ae4d9de259c8468a5cd93">blue</a> = (2 + col * 3) % 7;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/dc3/classfloat.html">green</a> = (4 + col * 5) % 6;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (mInvertColors &amp;&amp; red == 4 &amp;&amp; blue == 5 &amp;&amp; green == 6) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    red = 0;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">if</span> (!mInvertColors &amp;&amp; red == 0 &amp;&amp; blue == 0 &amp;&amp; green == 0) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    red = 4;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  mDrawColor = {red / 4.f, green / 5.f, blue / 6.f};</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  ActivateColor();</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="keywordtype">void</span> GPUDisplay::setQuality()</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;{</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// Doesn&#39;t seem to make a difference in this applicattion</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">if</span> (mDrawQualityMSAA &gt; 1) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa2b6486ff7ecee8bf04e3371f197527a">GL_MULTISAMPLE</a>));</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa2b6486ff7ecee8bf04e3371f197527a">GL_MULTISAMPLE</a>));</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keywordtype">void</span> GPUDisplay::setDepthBuffer()</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;{</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">if</span> (mCfg.depthBuffer) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4ccf1dc093190cc3798b9abea3655f98">GL_DEPTH_TEST</a>)); <span class="comment">// Enables Depth Testing</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a5489df792b3263170eea381093ee6111">glDepthFunc</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8b778a06f153b4d59ebc6aa1d0996191">GL_LEQUAL</a>));  <span class="comment">// The Type Of Depth Testing To Do</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4ccf1dc093190cc3798b9abea3655f98">GL_DEPTH_TEST</a>));</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="keywordtype">void</span> GPUDisplay::createFB_texture(<a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a>&amp; <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> msaa, <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> storage, <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad8f97111cc6514af5f352219d1cceb40">attachment</a>)</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;{</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> textureType = msaa ? <a class="code" href="../../dc/da3/glcorearb_8h.html#aaa829d0cb1208a8931ea4ef30f8747f1">GL_TEXTURE_2D_MULTISAMPLE</a> : <a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a82ac4415f852b8b5bfe7356202ca934e">glGenTextures</a>(1, &amp;<span class="keywordtype">id</span>));</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a987aecafceffb9afaef11412d42e605b">glBindTexture</a>(textureType, <span class="keywordtype">id</span>));</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">if</span> (msaa) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ab21d2eb7b3ec168bda12feeb60824f19">glTexImage2DMultisample</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aaa829d0cb1208a8931ea4ef30f8747f1">GL_TEXTURE_2D_MULTISAMPLE</a>, mDrawQualityMSAA, storage, mRenderwidth, mRenderheight, <span class="keyword">false</span>));</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a7da97095b562f67f161b50104776a66d">glTexImage2D</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>, 0, storage, mRenderwidth, mRenderheight, 0, storage, <a class="code" href="../../dc/da3/glcorearb_8h.html#a80a33c79f69417372d65d2a65ca36d49">GL_UNSIGNED_BYTE</a>, <span class="keyword">nullptr</span>));</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a173a2b2453322dd8d613df6cf2e72480">GL_TEXTURE_MIN_FILTER</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>));</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#acb47a41b5963d44826f44b7370bccc26">GL_TEXTURE_MAG_FILTER</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>));</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3fb0b694bf693bcd13fae76b3213ba92">glFramebufferTexture2D</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, attachment, textureType, <span class="keywordtype">id</span>, 0));</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="keywordtype">void</span> GPUDisplay::createFB_renderbuffer(<a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a>&amp; <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> msaa, <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> storage, <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> attachment)</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a8b800cc6117d08d5ec34b32421563799">glGenRenderbuffers</a>(1, &amp;<span class="keywordtype">id</span>));</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#aa25172732c3d88c7c23d93f9e7d672be">glBindRenderbuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, <span class="keywordtype">id</span>));</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">if</span> (msaa) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a514c77ac5c52216d1318b2afc72df793">glRenderbufferStorageMultisample</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, mDrawQualityMSAA, storage, mRenderwidth, mRenderheight));</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ad9d72969a26069958dea3598cfecb687">glRenderbufferStorage</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, storage, mRenderwidth, mRenderheight));</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#aa915643d0b21023b01d4dc82f69e5646">glFramebufferRenderbuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, attachment, <a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, <span class="keywordtype">id</span>));</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="keywordtype">void</span> GPUDisplay::createFB(GLfb&amp; fb, <span class="keywordtype">bool</span> tex, <span class="keywordtype">bool</span> withDepth, <span class="keywordtype">bool</span> msaa)</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;{</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  fb.tex = tex;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  fb.depth = withDepth;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  fb.msaa = msaa;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> drawFboId = 0, readFboId = 0;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ab39dd6b552305d6b928b29a2ff880ab1">GL_DRAW_FRAMEBUFFER_BINDING</a>, &amp;drawFboId);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ae64973345479169d6b1a2698bb9d30f8">GL_READ_FRAMEBUFFER_BINDING</a>, &amp;readFboId);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#afa884c4d2bb798b2161823f81ad56bce">glGenFramebuffers</a>(1, &amp;fb.fb_id));</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, fb.fb_id));</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordflow">if</span> (tex) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    createFB_texture(fb.fbCol_id, fb.msaa, <a class="code" href="../../dc/da3/glcorearb_8h.html#a9f2854f4a91a0d83d2d54cb8110bfca4">GL_RGBA</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a>);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    createFB_renderbuffer(fb.fbCol_id, fb.msaa, <a class="code" href="../../dc/da3/glcorearb_8h.html#a9f2854f4a91a0d83d2d54cb8110bfca4">GL_RGBA</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keywordflow">if</span> (withDepth) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">if</span> (tex &amp;&amp; fb.msaa) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      createFB_texture(fb.fbDepth_id, fb.msaa, <a class="code" href="../../dc/da3/glcorearb_8h.html#ad871b289b8410082db98e4b3af0301f1">GL_DEPTH_COMPONENT24</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#ac4dc812a285640570b56acc55822dffe">GL_DEPTH_ATTACHMENT</a>);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      createFB_renderbuffer(fb.fbDepth_id, fb.msaa, <a class="code" href="../../dc/da3/glcorearb_8h.html#ad871b289b8410082db98e4b3af0301f1">GL_DEPTH_COMPONENT24</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#ac4dc812a285640570b56acc55822dffe">GL_DEPTH_ATTACHMENT</a>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> status = <a class="code" href="../../db/d2b/gl3w_8h.html#a2097cfa52d11568f886cf6d3cf888f1c">glCheckFramebufferStatus</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span> (status != <a class="code" href="../../dc/da3/glcorearb_8h.html#a7a5ca562c069ca1294283df0c7d192ad">GL_FRAMEBUFFER_COMPLETE</a>) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="../../df/ddc/GPULogging_8h.html#a2700ed3728abe6f865af253f6ec5830f">GPUError</a>(<span class="stringliteral">&quot;Error creating framebuffer (tex %d) - incomplete (%d)&quot;</span>, (<span class="keywordtype">int</span>)tex, status);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    exit(1);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a7ebcdfa478fe099b5ab4a5399fe37ddb">GL_DRAW_FRAMEBUFFER</a>, drawFboId));</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ab54b4b110b532b903bf44599fd6a1b2c">GL_READ_FRAMEBUFFER</a>, readFboId));</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  fb.created = <span class="keyword">true</span>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="keywordtype">void</span> GPUDisplay::deleteFB(GLfb&amp; fb)</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordflow">if</span> (fb.tex) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#aedf2546140e2c0f0e8d6f62e9998ae73">glDeleteTextures</a>(1, &amp;fb.fbCol_id));</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ad2c7045354de0b7817406b1590f69efd">glDeleteRenderbuffers</a>(1, &amp;fb.fbCol_id));</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">if</span> (fb.depth) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">if</span> (fb.tex &amp;&amp; fb.msaa) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#aedf2546140e2c0f0e8d6f62e9998ae73">glDeleteTextures</a>(1, &amp;fb.fbDepth_id));</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ad2c7045354de0b7817406b1590f69efd">glDeleteRenderbuffers</a>(1, &amp;fb.fbDepth_id));</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#aa7c5c636d1f609455e73ceee2eed8ba1">glDeleteFramebuffers</a>(1, &amp;fb.fb_id));</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  fb.created = <span class="keyword">false</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="keywordtype">void</span> GPUDisplay::setFrameBuffer(<span class="keywordtype">int</span> updateCurrent, <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> newID)</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;{</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">if</span> (updateCurrent == 1) {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    mMainBufferStack.push_back(newID);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (updateCurrent == 2) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    mMainBufferStack.back() = newID;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (updateCurrent == -2) {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    newID = mMainBufferStack.back();</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (updateCurrent == -1) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    mMainBufferStack.pop_back();</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    newID = mMainBufferStack.back();</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">if</span> (newID == 0) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, 0));</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a3bc66a02ab7134459ee7f3307dd1eb65">glDrawBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a688ad6fbf908a39f7197da6d4e4dd083">GL_BACK</a>);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, newID));</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> drawBuffer = <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#ae4f8384133dc7f9a68ffde907193ca68">glDrawBuffers</a>(1, &amp;drawBuffer);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="keywordtype">void</span> GPUDisplay::UpdateOffscreenBuffers(<span class="keywordtype">bool</span> clean)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;{</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">if</span> (mMixBuffer.created) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    deleteFB(mMixBuffer);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordflow">if</span> (mOffscreenBuffer.created) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    deleteFB(mOffscreenBuffer);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">if</span> (mOffscreenBufferNoMSAA.created) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    deleteFB(mOffscreenBufferNoMSAA);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordflow">if</span> (clean) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> (mDrawQualityDownsampleFSAA &gt; 1) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    mRenderwidth = mScreenwidth * mDrawQualityDownsampleFSAA;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    mRenderheight = mScreenheight * mDrawQualityDownsampleFSAA;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    mRenderwidth = mScreenwidth;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    mRenderheight = mScreenheight;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordflow">if</span> (mDrawQualityMSAA &gt; 1 || mDrawQualityDownsampleFSAA &gt; 1) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    createFB(mOffscreenBuffer, <span class="keyword">false</span>, <span class="keyword">true</span>, mDrawQualityMSAA &gt; 1);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> (mDrawQualityMSAA &gt; 1 &amp;&amp; mDrawQualityDownsampleFSAA &gt; 1) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      createFB(mOffscreenBufferNoMSAA, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  createFB(mMixBuffer, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ab54b002beb984f066acd0dd7fff469dc">glViewport</a>(0, 0, mRenderwidth, mRenderheight);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  setQuality();</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a5245b930adb2edf6785968ae3d91b0ad">GPUDisplay::ReSizeGLScene</a>(<span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a6879d830f164725df67adeeabca3ea47">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a60075de22f90a1223dc0bea98d2ee4d5">height</a>, <span class="keywordtype">bool</span> init)</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordflow">if</span> (height == 0) { <span class="comment">// Prevent A Divide By Zero By</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    height = 1;      <span class="comment">// Making Height Equal One</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  mScreenwidth = <a class="code" href="../../dc/da3/glcorearb_8h.html#a6879d830f164725df67adeeabca3ea47">width</a>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  mScreenheight = <a class="code" href="../../dc/da3/glcorearb_8h.html#a60075de22f90a1223dc0bea98d2ee4d5">height</a>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  UpdateOffscreenBuffers();</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">if</span> (init) {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    mResetScene = 1;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    mViewMatrix = MY_HMM_IDENTITY;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="keywordtype">void</span> GPUDisplay::updateConfig()</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;{</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  setQuality();</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  setDepthBuffer();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a2b3ff9e7c180d9a4604bad8ddbb9ed0e">GPUDisplay::InitGL</a>(<span class="keywordtype">bool</span> initFailure)</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordtype">int</span> retVal = initFailure;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (!initFailure) {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      retVal = InitGL_internal();</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::runtime_error&amp; <a class="code" href="../../d8/de9/qconfigoptions_8h.html#acc2760558000045ec0803d60d4d01c98">e</a>) {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    retVal = 1;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  }</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  mInitResult = retVal == 0 ? 1 : -1;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">return</span> (retVal);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="keywordtype">int</span> GPUDisplay::InitGL_internal()</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;{</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordtype">int</span> glVersion[2] = {0, 0};</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a2b2319323c7cfb4ed795be005209d73d">GL_MAJOR_VERSION</a>, &amp;glVersion[0]);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad45fb154a63b2b32a07732388e8251ad">GL_MINOR_VERSION</a>, &amp;glVersion[1]);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keywordflow">if</span> (glVersion[0] &lt; <a class="code" href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#a96c65445a519a024ec55827f892d638b">GPUDisplayBackend::GL_MIN_VERSION_MAJOR</a> || (glVersion[0] == <a class="code" href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#a96c65445a519a024ec55827f892d638b">GPUDisplayBackend::GL_MIN_VERSION_MAJOR</a> &amp;&amp; glVersion[1] &lt; <a class="code" href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#ad78d6d63bbce7624ccad74c242ecc68b">GPUDisplayBackend::GL_MIN_VERSION_MINOR</a>)) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="../../df/ddc/GPULogging_8h.html#a2700ed3728abe6f865af253f6ec5830f">GPUError</a>(<span class="stringliteral">&quot;Unsupported OpenGL runtime %d.%d &lt; %d.%d&quot;</span>, glVersion[0], glVersion[1], <a class="code" href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#a96c65445a519a024ec55827f892d638b">GPUDisplayBackend::GL_MIN_VERSION_MAJOR</a>, <a class="code" href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#ad78d6d63bbce7624ccad74c242ecc68b">GPUDisplayBackend::GL_MIN_VERSION_MINOR</a>);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">return</span> (1);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a26f35fe7275274970d56847046119dbb">glCreateBuffers</a>(<a class="code" href="../../dd/d48/classGPUCA__NAMESPACE_1_1gpu_1_1GPUChain.html#aca12546d88480e5c2ea96ffb5dad4f7f">GPUChainTracking::NSLICES</a>, mVBOId));</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a7180045dcb52b22af2cd0366026bc3ed">GL_ARRAY_BUFFER</a>, mVBOId[0]));</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a1b33d322b89d94ad4938461db0a0424a">glGenBuffers</a>(1, &amp;mIndirectId));</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#af57dbe61f04ea19c60697f13bb2bb8f3">GL_DRAW_INDIRECT_BUFFER</a>, mIndirectId));</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  CHKERR(glShadeModel(GL_SMOOTH)); <span class="comment">// Enable Smooth Shading</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  setDepthBuffer();</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  setQuality();</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a5245b930adb2edf6785968ae3d91b0ad">ReSizeGLScene</a>(<a class="code" href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#a15b0169eb36df6e93ad99b6b24638655">GPUDisplayBackend::INIT_WIDTH</a>, <a class="code" href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#ac9b39b267d3bc4ef43430dcea79cb572">GPUDisplayBackend::INIT_HEIGHT</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="preprocessor">#ifdef WITH_OPENMP</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keywordtype">int</span> maxThreads = mChain-&gt;GetDeviceProcessingSettings().nThreads &gt; 1 ? mChain-&gt;GetDeviceProcessingSettings().nThreads : 1;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  omp_set_num_threads(maxThreads);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordtype">int</span> maxThreads = 1;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  mThreadBuffers.resize(maxThreads);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  mThreadTracks.resize(maxThreads);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="preprocessor">#ifdef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  CHKERR(mVertexShader = <a class="code" href="../../db/d2b/gl3w_8h.html#a4d3447ff3caf454bc686968fbe5f04bf">glCreateShader</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aceb29bc16e885f956eb9e351a7dd6276">GL_VERTEX_SHADER</a>));</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a369ec108462c247e3028edc9070117a0">glShaderSource</a>(mVertexShader, 1, &amp;<a class="code" href="../../d3/dde/structGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayShaders.html#a76c2f7eaef099bd1da3b103684311b05">GPUDisplayShaders::vertexShader</a>, NULL));</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#acf7a528ef1ef237d2a7676dcb0f22473">glCompileShader</a>(mVertexShader));</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  CHKERR(mFragmentShader = <a class="code" href="../../db/d2b/gl3w_8h.html#a4d3447ff3caf454bc686968fbe5f04bf">glCreateShader</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a1a0294662b50921555cae95fb20740d4">GL_FRAGMENT_SHADER</a>));</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a369ec108462c247e3028edc9070117a0">glShaderSource</a>(mFragmentShader, 1, &amp;<a class="code" href="../../d3/dde/structGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayShaders.html#a9335293604e4fcbe83f25a44de189075">GPUDisplayShaders::fragmentShader</a>, NULL));</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#acf7a528ef1ef237d2a7676dcb0f22473">glCompileShader</a>(mFragmentShader));</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  CHKERR(mShaderProgram = <a class="code" href="../../db/d2b/gl3w_8h.html#acf9d728f2b2be42fbc2fe6dada8bcd2b">glCreateProgram</a>());</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a0cb06d612b3358bfaadbbefd7c51f1cc">glAttachShader</a>(mShaderProgram, mVertexShader));</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a0cb06d612b3358bfaadbbefd7c51f1cc">glAttachShader</a>(mShaderProgram, mFragmentShader));</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ad241352c6eee6e79f09942ef0771db47">glLinkProgram</a>(mShaderProgram));</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a71a2d01a12606fc26c1a28dba23dfce2">glGenVertexArrays</a>(1, &amp;mVertexArray));</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  CHKERR(mModelViewProjId = <a class="code" href="../../db/d2b/gl3w_8h.html#a10106e4be90a66213839645cf12770f9">glGetUniformLocation</a>(mShaderProgram, <span class="stringliteral">&quot;ModelViewProj&quot;</span>));</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  CHKERR(mColorId = <a class="code" href="../../db/d2b/gl3w_8h.html#a10106e4be90a66213839645cf12770f9">glGetUniformLocation</a>(mShaderProgram, <span class="stringliteral">&quot;color&quot;</span>));</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">return</span> (0); <span class="comment">// Initialization Went OK</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;}</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a229a128a66aae6f768c5231253892421">GPUDisplay::ExitGL</a>()</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;{</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  UpdateOffscreenBuffers(<span class="keyword">true</span>);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a55652a3f087bb13267a5481b6ff1fe19">glDeleteBuffers</a>(<a class="code" href="../../dd/d48/classGPUCA__NAMESPACE_1_1gpu_1_1GPUChain.html#aca12546d88480e5c2ea96ffb5dad4f7f">GPUChainTracking::NSLICES</a>, mVBOId));</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a55652a3f087bb13267a5481b6ff1fe19">glDeleteBuffers</a>(1, &amp;mIndirectId));</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="preprocessor">#ifdef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a94c0e17529ebff9ddffdf7715b2341cc">glDeleteProgram</a>(mShaderProgram));</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ac012d7614801ed69d643ad388dcfc768">glDeleteShader</a>(mVertexShader));</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ac012d7614801ed69d643ad388dcfc768">glDeleteShader</a>(mFragmentShader));</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;}</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> GPUDisplay::drawPointLinestrip(<span class="keywordtype">int</span> iSlice, <span class="keywordtype">int</span> cid, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> id_limit)</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;{</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(mGlobalPos[cid].<a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, mGlobalPos[cid].<a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, mProjectXY ? 0 : mGlobalPos[cid].<a class="code" href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a>);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">if</span> (mGlobalPos[cid].<a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a> &lt; id_limit) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    mGlobalPos[cid].w = <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id</a>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;GPUDisplay::vboList GPUDisplay::DrawSpacePointsTRD(<span class="keywordtype">int</span> iSlice, <span class="keywordtype">int</span> <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ad664c1ff709d31a98e8738b75af196bd">select</a>, <span class="keywordtype">int</span> iCol)</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;{</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordtype">size_t</span> startCount = mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordtype">size_t</span> startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">if</span> (iCol == 0) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; trdTracker().NTracklets(); <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordtype">int</span> iSec = mChain-&gt;GetTRDGeometry()-&gt;GetSector(trdTracker().Tracklets()[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].GetDetector());</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="../../dd/d9d/namespaceo2_1_1tpc_1_1painter.html#a5ae55cb1968bdac9014e871bb502ff9f">draw</a> = iSlice == iSec &amp;&amp; mGlobalPosTRD[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].w == <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ad664c1ff709d31a98e8738b75af196bd">select</a>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keywordflow">if</span> (draw) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(mGlobalPosTRD[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].x, mGlobalPosTRD[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].y, mProjectXY ? 0 : mGlobalPosTRD[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].z);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(mGlobalPosTRD2[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].x, mGlobalPosTRD2[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].y, mProjectXY ? 0 : mGlobalPosTRD2[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].z);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  insertVertexList(iSlice, startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordflow">return</span> (vboList(startCount, mVertexBufferStart[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() - startCount, iSlice));</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;}</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;GPUDisplay::vboList GPUDisplay::DrawClusters(<span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker, <span class="keywordtype">int</span> select, <span class="keywordtype">int</span> iCol)</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;{</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordtype">int</span> iSlice = tracker.ISlice();</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordtype">size_t</span> startCount = mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keywordtype">size_t</span> startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> firstCluster = (mNCollissions &gt; 1 &amp;&amp; iCol &gt; 0) ? mCollisionClusters[iCol - 1][iSlice] : 0;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> lastCluster = (mNCollissions &gt; 1 &amp;&amp; iCol + 1 &lt; mNCollissions) ? mCollisionClusters[iCol][iSlice] : tracker.Data().NumberOfHits();</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> cidInSlice = firstCluster; cidInSlice &lt; lastCluster; cidInSlice++) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> cid = GET_CID(iSlice, cidInSlice);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (mHideUnmatchedClusters &amp;&amp; mQA &amp;&amp; mQA-&gt;SuppressHit(cid)) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordtype">bool</span> draw = mGlobalPos[cid].w == <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ad664c1ff709d31a98e8738b75af196bd">select</a>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">if</span> (mMarkAdjacentClusters) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> attach = mMerger.ClusterAttachment()[cid];</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">if</span> (attach) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">if</span> (mMarkAdjacentClusters &gt;= 16) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;          <span class="keywordflow">if</span> (mQA &amp;&amp; mQA-&gt;clusterRemovable(cid, mMarkAdjacentClusters == 17)) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            draw = select == tMARKED;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;          }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((mMarkAdjacentClusters &amp; 2) &amp;&amp; (attach &amp; <a class="code" href="../../d9/dd3/namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes.html#ab2aee58e8149fc590f564fbc6fc08d8fab037aa04e3e7153eb0f179cedc1a5d3a">GPUTPCGMMergerTypes::attachTube</a>)) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;          draw = select == tMARKED;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((mMarkAdjacentClusters &amp; 1) &amp;&amp; (attach &amp; (<a class="code" href="../../d9/dd3/namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes.html#ab2aee58e8149fc590f564fbc6fc08d8fa168f79b43ce3c654af5068ba433f4a9a">GPUTPCGMMergerTypes::attachGood</a> | <a class="code" href="../../d9/dd3/namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes.html#ab2aee58e8149fc590f564fbc6fc08d8fab037aa04e3e7153eb0f179cedc1a5d3a">GPUTPCGMMergerTypes::attachTube</a>)) == 0) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;          draw = select == tMARKED;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((mMarkAdjacentClusters &amp; 4) &amp;&amp; (attach &amp; <a class="code" href="../../d9/dd3/namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes.html#ab2aee58e8149fc590f564fbc6fc08d8fa911f93959df9d09b345c3747584f49e7">GPUTPCGMMergerTypes::attachGoodLeg</a>) == 0) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;          draw = select == tMARKED;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mMarkAdjacentClusters &amp; 8) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;          <span class="keywordflow">if</span> (fabsf(mMerger.OutputTracks()[attach &amp; <a class="code" href="../../d9/dd3/namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes.html#ab2aee58e8149fc590f564fbc6fc08d8fa69d603036c1af366c6a6ed1e73e4d402">GPUTPCGMMergerTypes::attachTrackMask</a>].GetParam().GetQPt()) &gt; 20.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            draw = select == tMARKED;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;          }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mMarkClusters) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keywordtype">short</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa9459b47e7388437191d2d9a69c10d98">flags</a>;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">if</span> (tracker.Param().earlyTpcTransform) {</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        flags = tracker.ClusterData()[cidInSlice].flags;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        flags = tracker.GetConstantMem()-&gt;ioPtrs.clustersNative-&gt;clustersLinear[cid].getFlags();</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> match = flags &amp; mMarkClusters;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      draw = (select == tMARKED) ? (match) : (draw &amp;&amp; !match);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mMarkFakeClusters) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> fake = (mQA &amp;&amp; mQA-&gt;HitAttachStatus(cid));</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      draw = (select == tMARKED) ? (fake) : (draw &amp;&amp; !fake);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (draw) {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(mGlobalPos[cid].x, mGlobalPos[cid].y, mProjectXY ? 0 : mGlobalPos[cid].z);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  insertVertexList(iSlice, startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">return</span> (vboList(startCount, mVertexBufferStart[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() - startCount, iSlice));</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;GPUDisplay::vboList GPUDisplay::DrawLinks(<span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> dodown)</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;{</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordtype">int</span> iSlice = tracker.ISlice();</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="keywordflow">if</span> (mConfig.clustersOnly) {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">return</span> (vboList(0, 0, iSlice));</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordtype">size_t</span> startCount = mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keywordtype">size_t</span> startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d2/d37/GPUDefConstantsAndSettings_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../de/d4e/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCRow.html">GPUTPCRow</a>&amp; row = tracker.Data().Row(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; GPUCA_ROW_COUNT - 2) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../de/d4e/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCRow.html">GPUTPCRow</a>&amp; rowUp = tracker.Data().Row(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 2);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; row.NHits(); j++) {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">if</span> (tracker.Data().HitLinkUpData(row, j) != <a class="code" href="../../da/dab/GPUTPCDef_8h.html#a7c715fbf6f0c820b4509afddf7016fa6">CALINK_INVAL</a>) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> cid1 = GET_CID(iSlice, tracker.Data().ClusterDataIndex(row, j));</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> cid2 = GET_CID(iSlice, tracker.Data().ClusterDataIndex(rowUp, tracker.Data().HitLinkUpData(row, j)));</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;          drawPointLinestrip(iSlice, cid1, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;          drawPointLinestrip(iSlice, cid2, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        }</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">if</span> (dodown &amp;&amp; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 2) {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../de/d4e/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCRow.html">GPUTPCRow</a>&amp; rowDown = tracker.Data().Row(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; row.NHits(); j++) {</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">if</span> (tracker.Data().HitLinkDownData(row, j) != <a class="code" href="../../da/dab/GPUTPCDef_8h.html#a7c715fbf6f0c820b4509afddf7016fa6">CALINK_INVAL</a>) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> cid1 = GET_CID(iSlice, tracker.Data().ClusterDataIndex(row, j));</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> cid2 = GET_CID(iSlice, tracker.Data().ClusterDataIndex(rowDown, tracker.Data().HitLinkDownData(row, j)));</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;          drawPointLinestrip(iSlice, cid1, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;          drawPointLinestrip(iSlice, cid2, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  insertVertexList(iSlice, startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">return</span> (vboList(startCount, mVertexBufferStart[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() - startCount, iSlice));</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;}</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;GPUDisplay::vboList GPUDisplay::DrawSeeds(<span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker)</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="keywordtype">int</span> iSlice = tracker.ISlice();</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="keywordflow">if</span> (mConfig.clustersOnly) {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">return</span> (vboList(0, 0, iSlice));</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordtype">size_t</span> startCount = mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; *tracker.NStartHits(); <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/db1/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCHitId.html">GPUTPCHitId</a>&amp; hit = tracker.TrackletStartHit(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordtype">size_t</span> startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordtype">int</span> ir = hit.RowIndex();</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a05551a7ef80deb98017cdfacb7443730">calink</a> ih = hit.HitIndex();</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../de/d4e/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCRow.html">GPUTPCRow</a>&amp; row = tracker.Data().Row(ir);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> cid = GET_CID(iSlice, tracker.Data().ClusterDataIndex(row, ih));</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      drawPointLinestrip(iSlice, cid, tSEED);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      ir += 2;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      ih = tracker.Data().HitLinkUpData(row, ih);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    } <span class="keywordflow">while</span> (ih != <a class="code" href="../../da/dab/GPUTPCDef_8h.html#a7c715fbf6f0c820b4509afddf7016fa6">CALINK_INVAL</a>);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    insertVertexList(iSlice, startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordflow">return</span> (vboList(startCount, mVertexBufferStart[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() - startCount, iSlice));</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;GPUDisplay::vboList GPUDisplay::DrawTracklets(<span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker)</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;{</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordtype">int</span> iSlice = tracker.ISlice();</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">if</span> (mConfig.clustersOnly) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">return</span> (vboList(0, 0, iSlice));</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordtype">size_t</span> startCount = mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; *tracker.NTracklets(); <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dc/d4b/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracklet.html">GPUTPCTracklet</a>&amp; tracklet = tracker.Tracklet(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">if</span> (tracklet.NHits() == 0) {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordtype">size_t</span> startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="../../dd/d9d/structfloat4.html">float4</a> oldpos;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = tracklet.FirstRow(); j &lt;= tracklet.LastRow(); j++) {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a05551a7ef80deb98017cdfacb7443730">calink</a> rowHit = tracker.TrackletRowHits()[tracklet.FirstHit() + (j - tracklet.FirstRow())];</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="keywordflow">if</span> (rowHit != <a class="code" href="../../da/dab/GPUTPCDef_8h.html#a7c715fbf6f0c820b4509afddf7016fa6">CALINK_INVAL</a>) {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../de/d4e/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCRow.html">GPUTPCRow</a>&amp; row = tracker.Data().Row(j);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> cid = GET_CID(iSlice, tracker.Data().ClusterDataIndex(row, rowHit));</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        oldpos = mGlobalPos[cid];</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        drawPointLinestrip(iSlice, cid, tTRACKLET);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    insertVertexList(iSlice, startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">return</span> (vboList(startCount, mVertexBufferStart[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() - startCount, iSlice));</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;}</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;GPUDisplay::vboList GPUDisplay::DrawTracks(<span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker, <span class="keywordtype">int</span> global)</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;{</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordtype">int</span> iSlice = tracker.ISlice();</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">if</span> (mConfig.clustersOnly) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">return</span> (vboList(0, 0, iSlice));</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordtype">size_t</span> startCount = mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = (global ? tracker.CommonMemory()-&gt;nLocalTracks : 0); <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (global ? *tracker.NTracks() : tracker.CommonMemory()-&gt;nLocalTracks); <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="../../d6/dfa/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTrack.html">GPUTPCTrack</a>&amp; track = tracker.Tracks()[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordtype">size_t</span> startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; track.NHits(); j++) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d9/db1/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCHitId.html">GPUTPCHitId</a>&amp; hit = tracker.TrackHits()[track.FirstHitID() + j];</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../de/d4e/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCRow.html">GPUTPCRow</a>&amp; row = tracker.Data().Row(hit.RowIndex());</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> cid = GET_CID(iSlice, tracker.Data().ClusterDataIndex(row, hit.HitIndex()));</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      drawPointLinestrip(iSlice, cid, tSLICETRACK + global);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    insertVertexList(iSlice, startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">return</span> (vboList(startCount, mVertexBufferStart[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() - startCount, iSlice));</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;}</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="keywordtype">void</span> GPUDisplay::DrawFinal(<span class="keywordtype">int</span> iSlice, <span class="keywordtype">int</span> <span class="comment">/*iCol*/</span>, <a class="code" href="../../d8/d01/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPropagator.html">GPUTPCGMPropagator</a>* prop, std::array&lt;<a class="code" href="../../d5/d2f/vecpod_8h.html#a9b2666adbe662721e5de763dc5c70a83">vecpod&lt;int&gt;</a>, 2&gt;&amp; trackList, threadVertexBuffer&amp; threadBuffer)</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;{</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keyword">auto</span>&amp; vBuf = threadBuffer.vBuf;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keyword">auto</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a> = threadBuffer.buffer;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nTracks = <a class="code" href="../../d2/d0e/test__Algorithm_8cxx.html#a5216308b2bcc588018b96379974d290c">std::max</a>(trackList[0].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>(), trackList[1].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">if</span> (mConfig.clustersOnly) {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    nTracks = 0;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ii = 0; ii &lt; nTracks; ii++) {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d3/dd9/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergedTrack.html">GPUTPCGMMergedTrack</a>* track = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordtype">int</span> lastCluster = -1;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="keywordflow">if</span> (ii &gt;= trackList[0].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>()) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      i = trackList[0][ii];</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      track = &amp;mMerger.OutputTracks()[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordtype">size_t</span> startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="keywordtype">bool</span> drawing = <span class="keyword">false</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <span class="keywordflow">if</span> (mTRDTrackIds[i]) {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keyword">auto</span>&amp; trk = trdTracker().Tracks()[mTRDTrackIds[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 5; k &gt;= 0; k--) {</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;          <span class="keywordtype">int</span> cid = trk.GetTrackletIndex(k);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;          <span class="keywordflow">if</span> (cid &lt; 0) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;          }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;          drawing = <span class="keyword">true</span>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;          mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(mGlobalPosTRD2[cid].x, mGlobalPosTRD2[cid].y, mProjectXY ? 0 : mGlobalPosTRD2[cid].z);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;          mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(mGlobalPosTRD[cid].x, mGlobalPosTRD[cid].y, mProjectXY ? 0 : mGlobalPosTRD[cid].z);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;          mGlobalPosTRD[cid].w = tTRDATTACHED;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; track-&gt;NClusters(); k++) {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">if</span> (mHideRejectedClusters &amp;&amp; (mMerger.Clusters()[track-&gt;FirstClusterRef() + k].state &amp; <a class="code" href="../../d9/d33/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergedTrackHit.html#aa374640a95a09c3d60f3de74dfcf07e9ae4ce48cf5b93a37536ecb9541b6790d9">GPUTPCGMMergedTrackHit::flagReject</a>)) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordtype">int</span> cid = mMerger.Clusters()[track-&gt;FirstClusterRef() + k].num;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a> = mGlobalPos[cid].w;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">if</span> (drawing) {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;          drawPointLinestrip(iSlice, cid, tFINALTRACK, SEPERATE_GLOBAL_TRACKS_LIMIT);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        }</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">if</span> (w == SEPERATE_GLOBAL_TRACKS_LIMIT) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;          <span class="keywordflow">if</span> (drawing) {</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            insertVertexList(vBuf[0], startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;          }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;          drawing = <span class="keyword">false</span>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;          <span class="keywordflow">if</span> (!drawing) {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;          }</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;          <span class="keywordflow">if</span> (!drawing) {</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            drawPointLinestrip(iSlice, cid, tFINALTRACK, SEPERATE_GLOBAL_TRACKS_LIMIT);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;          }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;          <span class="keywordflow">if</span> (!drawing &amp;&amp; lastCluster != -1) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            drawPointLinestrip(iSlice, mMerger.Clusters()[track-&gt;FirstClusterRef() + lastCluster].num, 7, SEPERATE_GLOBAL_TRACKS_LIMIT);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;          }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;          drawing = <span class="keyword">true</span>;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        lastCluster = k;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      insertVertexList(vBuf[0], startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    }</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iMC = 0; iMC &lt; 2; iMC++) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="keywordflow">if</span> (iMC) {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">if</span> (ii &gt;= trackList[1].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>()) {</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        i = trackList[1][ii];</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">if</span> (track == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        }</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">if</span> (lastCluster == -1) {</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="keywordtype">size_t</span> startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> inFlyDirection = 0; inFlyDirection &lt; 2; inFlyDirection++) {</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <a class="code" href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html">GPUTPCGMPhysicalTrackModel</a> trkParam;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="keywordtype">float</span> ZOffset = 0;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordtype">float</span> x = 0;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="keywordtype">int</span> slice = <a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a090ebe65994a3ee4bb60ae3472abffc5">alpha</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a>().Alpha(slice);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">if</span> (iMC == 0) {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;          trkParam.Set(track-&gt;GetParam());</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;          <span class="keyword">auto</span> cl = mMerger.Clusters()[track-&gt;FirstClusterRef() + lastCluster];</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;          <span class="keywordflow">if</span> (mMerger.Param().earlyTpcTransform) {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            x = cl.x;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            ZOffset = track-&gt;GetParam().GetTZOffset();</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cln = mMerger.GetConstantMem()-&gt;ioPtrs.clustersNative-&gt;clustersLinear[cl.num];</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <a class="code" href="../../df/d6c/convertDigitsToRawZS_8cxx.html#a8761d49d4e74c4e774d0f36d12e060b7">GPUTPCConvertImpl::convert</a>(*mMerger.GetConstantMem(), cl.slice, cl.row, cln.getPad(), cln.getTime(), <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a>);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            ZOffset = mMerger.GetConstantMem()-&gt;calibObjects.fastTransform-&gt;convTimeToZinTimeFrame(slice, track-&gt;GetParam().GetTZOffset(), mMerger.Param().continuousMaxTimeBin);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;          }</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html">GPUTPCMCInfo</a>&amp; mc = ioptrs().mcInfosTPC[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;          <span class="keywordflow">if</span> (mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a8dda15aa0193b2da3a5e3192de7274e0">charge</a> == 0.f) {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;          }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;          <span class="keywordflow">if</span> (mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a815b3ac0438325bb2c326bf4127f1b7b">pid</a> &lt; 0) {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;          }</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;          <span class="keywordtype">float</span> c = cosf(alpha);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;          <span class="keywordtype">float</span> s = sinf(alpha);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;          <span class="keywordtype">float</span> mclocal[4];</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;          x = mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a1a89969f806db9dbd1a80fef6ea5f8e4">x</a>;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;          <span class="keywordtype">float</span> y = mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a4caeef6463c337010707781760e017ff">y</a>;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;          mclocal[0] = x * c + y * s;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;          mclocal[1] = -x * s + y * c;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;          <span class="keywordtype">float</span> px = mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#aadd350eb94ac523c99f64504da0164ec">pX</a>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;          <span class="keywordtype">float</span> py = mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a971791cd8993a4635f3b8a6e4f0e483d">pY</a>;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;          mclocal[2] = px * c + py * s;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;          mclocal[3] = -px * s + py * c;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;          <span class="keywordtype">float</span> charge = mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a8dda15aa0193b2da3a5e3192de7274e0">charge</a> &gt; 0 ? 1.f : -1.f;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;          x = mclocal[0];</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;          <span class="keywordflow">if</span> (fabsf(mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#abe9ebfa50dc17d57c5c6636214321850">z</a>) &gt; 250) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            ZOffset = mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#abe9ebfa50dc17d57c5c6636214321850">z</a> &gt; 0 ? (mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#abe9ebfa50dc17d57c5c6636214321850">z</a> - 250) : (mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#abe9ebfa50dc17d57c5c6636214321850">z</a> + 250);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;          }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;          trkParam.Set(mclocal[0], mclocal[1], mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#abe9ebfa50dc17d57c5c6636214321850">z</a> - ZOffset, mclocal[2], mclocal[3], mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a84a061babec811147eaa88913e7d749f">pZ</a>, charge);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        trkParam.X() += mXadd;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        x += mXadd;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordtype">float</span> z0 = trkParam.<a class="code" href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#aeb3445c66ca878d33255d8494c9537b4">Z</a>();</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">if</span> (iMC &amp;&amp; inFlyDirection == 0) {</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;          <a class="code" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>.clear();</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        }</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <span class="keywordflow">if</span> (x &lt; 1) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">if</span> (fabsf(trkParam.SinPhi()) &gt; 1) {</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        alpha = <a class="code" href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a>().Alpha(slice);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <a class="code" href="../../d5/d2f/vecpod_8h.html#a9b2666adbe662721e5de763dc5c70a83">vecpod&lt;GLvertex&gt;</a>&amp; useBuffer = iMC &amp;&amp; inFlyDirection == 0 ? <a class="code" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a> : mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>];</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordtype">int</span> nPoints = 0;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="keywordflow">while</span> (nPoints++ &lt; 5000) {</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;          <span class="keywordflow">if</span> ((inFlyDirection == 0 &amp;&amp; x &lt; 0) || (inFlyDirection &amp;&amp; x * x + trkParam.<a class="code" href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#a60044f7f87a5e94c131a707c2d25de25">Y</a>() * trkParam.<a class="code" href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#a60044f7f87a5e94c131a707c2d25de25">Y</a>() &gt; (iMC ? (450 * 450) : (300 * 300)))) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;          }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;          <span class="keywordflow">if</span> (fabsf(trkParam.<a class="code" href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#aeb3445c66ca878d33255d8494c9537b4">Z</a>() + ZOffset) &gt; mMaxClusterZ + (iMC ? 0 : 0)) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;          }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;          <span class="keywordflow">if</span> (fabsf(trkParam.<a class="code" href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#aeb3445c66ca878d33255d8494c9537b4">Z</a>() - z0) &gt; (iMC ? 250 : 250)) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;          }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;          <span class="keywordflow">if</span> (inFlyDirection) {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            <span class="keywordflow">if</span> (fabsf(trkParam.SinPhi()) &gt; 0.4) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;              <span class="keywordtype">float</span> dalpha = asinf(trkParam.SinPhi());</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;              trkParam.Rotate(dalpha);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;              alpha += dalpha;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            x = trkParam.X() + 1.f;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <span class="keywordflow">if</span> (!mPropagateLoopers) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;              <span class="keywordtype">float</span> diff = fabsf(alpha - <a class="code" href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a>().Alpha(slice)) / (2. * M_PI);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;              diff -= floor(diff);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;              <span class="keywordflow">if</span> (diff &gt; 0.25 &amp;&amp; diff &lt; 0.75) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;              }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;          }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;          <span class="keywordtype">float</span> <a class="code" href="../../d3/d1a/classB.html">B</a>[3];</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;          prop-&gt;GetBxByBz(alpha, trkParam.GetX(), trkParam.GetY(), trkParam.GetZ(), B);</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;          <span class="keywordtype">float</span> dLp = 0;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;          <span class="keywordflow">if</span> (trkParam.PropagateToXBxByBz(x, B[0], B[1], B[2], dLp)) {</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;          }</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;          <span class="keywordflow">if</span> (fabsf(trkParam.SinPhi()) &gt; 0.9) {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;          }</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;          <span class="keywordtype">float</span> sa = sinf(alpha), ca = cosf(alpha);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;          useBuffer.emplace_back((ca * trkParam.X() - sa * trkParam.<a class="code" href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#a60044f7f87a5e94c131a707c2d25de25">Y</a>()) / GL_SCALE_FACTOR, (ca * trkParam.<a class="code" href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#a60044f7f87a5e94c131a707c2d25de25">Y</a>() + sa * trkParam.X()) / GL_SCALE_FACTOR, mProjectXY ? 0 : (trkParam.<a class="code" href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#aeb3445c66ca878d33255d8494c9537b4">Z</a>() + ZOffset) / GL_SCALE_FACTOR);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;          x += inFlyDirection ? 1 : -1;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">if</span> (inFlyDirection == 0) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;          <span class="keywordflow">if</span> (iMC) {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = (<span class="keywordtype">int</span>)<a class="code" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>.size() - 1; k &gt;= 0; k--) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;              mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(<a class="code" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>[k]);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            insertVertexList(vBuf[1], startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;          }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        }</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      }</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      insertVertexList(vBuf[iMC ? 3 : 2], startCountInner, mVertexBuffer[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>());</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;}</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;GPUDisplay::vboList GPUDisplay::DrawGrid(<span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker)</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;{</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keywordtype">int</span> iSlice = tracker.ISlice();</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="keywordtype">size_t</span> startCount = mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordtype">size_t</span> startCountInner = mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d2/d37/GPUDefConstantsAndSettings_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a>; i++) {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../de/d4e/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCRow.html">GPUTPCRow</a>&amp; row = tracker.Data().Row(i);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt;= (signed)row.Grid().Ny(); j++) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordtype">float</span> <a class="code" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#ac713be41b5cad67abc4e4d0581961905">z1</a> = row.Grid().ZMin();</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordtype">float</span> <a class="code" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a1e60213b0a0658ac2a9ee86f18ef0f95">z2</a> = row.Grid().ZMax();</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <span class="keywordtype">float</span> x = row.X() + mXadd;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordtype">float</span> y = row.Grid().YMin() + (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)j / row.Grid().StepYInv();</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordtype">float</span> zz1, zz2, yy1, yy2, xx1, xx2;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      tracker.Param().Slice2Global(tracker.ISlice(), <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <a class="code" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#ac713be41b5cad67abc4e4d0581961905">z1</a>, &amp;xx1, &amp;yy1, &amp;zz1);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      tracker.Param().Slice2Global(tracker.ISlice(), <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <a class="code" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a1e60213b0a0658ac2a9ee86f18ef0f95">z2</a>, &amp;xx2, &amp;yy2, &amp;zz2);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">if</span> (iSlice &lt; 18) {</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        zz1 += mZadd;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        zz2 += mZadd;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        zz1 -= mZadd;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        zz2 -= mZadd;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(xx1 / GL_SCALE_FACTOR, yy1 / GL_SCALE_FACTOR, zz1 / GL_SCALE_FACTOR);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(xx2 / GL_SCALE_FACTOR, yy2 / GL_SCALE_FACTOR, zz2 / GL_SCALE_FACTOR);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt;= (signed)row.Grid().Nz(); j++) {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3af6c78fcdfccea028a5878bc747ef39">y1</a> = row.Grid().YMin();</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordtype">float</span> <a class="code" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#adc8ed3fb46442ac4e3ad00b03911ab55">y2</a> = row.Grid().YMax();</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <span class="keywordtype">float</span> x = row.X() + mXadd;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="keywordtype">float</span> z = row.Grid().ZMin() + (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)j / row.Grid().StepZInv();</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="keywordtype">float</span> zz1, zz2, yy1, yy2, xx1, xx2;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      tracker.Param().Slice2Global(tracker.ISlice(), <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a3af6c78fcdfccea028a5878bc747ef39">y1</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a>, &amp;xx1, &amp;yy1, &amp;zz1);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      tracker.Param().Slice2Global(tracker.ISlice(), <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <a class="code" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#adc8ed3fb46442ac4e3ad00b03911ab55">y2</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a>, &amp;xx2, &amp;yy2, &amp;zz2);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">if</span> (iSlice &lt; 18) {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        zz1 += mZadd;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        zz2 += mZadd;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        zz1 -= mZadd;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        zz2 -= mZadd;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      }</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(xx1 / GL_SCALE_FACTOR, yy1 / GL_SCALE_FACTOR, zz1 / GL_SCALE_FACTOR);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(xx2 / GL_SCALE_FACTOR, yy2 / GL_SCALE_FACTOR, zz2 / GL_SCALE_FACTOR);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    }</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  }</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  insertVertexList(tracker.ISlice(), startCountInner, mVertexBuffer[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size());</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="keywordflow">return</span> (vboList(startCount, mVertexBufferStart[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() - startCount, iSlice));</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;}</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a34a1ad865678292015caaa62746e8c11">GPUDisplay::DrawGLScene</a>(<span class="keywordtype">bool</span> mixAnimation, <span class="keywordtype">float</span> mAnimateTime)</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;{</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">if</span> (DrawGLScene_internal(mixAnimation, mAnimateTime)) {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="keywordflow">return</span> (1);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::runtime_error&amp; e) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">return</span> (1);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordflow">return</span> (0);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;}</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="keywordtype">int</span> GPUDisplay::DrawGLScene_internal(<span class="keywordtype">bool</span> mixAnimation, <span class="keywordtype">float</span> mAnimateTime)</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;{</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordtype">bool</span> showTimer = <span class="keyword">false</span>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="comment">// Make sure event gets not overwritten during display</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">if</span> (mAnimateTime &lt; 0) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    mSemLockDisplay.Lock();</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// Extract global cluster information</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="keywordflow">if</span> (!mixAnimation &amp;&amp; (mUpdateDLList || mResetScene)) {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    showTimer = <span class="keyword">true</span>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    mTimerDraw.ResetStart();</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    mCurrentClusters = 0;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      mCurrentClusters += sliceTracker(iSlice).NHitsTotal();</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">if</span> (mNMaxClusters &lt; mCurrentClusters) {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      mNMaxClusters = mCurrentClusters;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      mGlobalPosPtr.reset(<span class="keyword">new</span> <a class="code" href="../../dd/d9d/structfloat4.html">float4</a>[mNMaxClusters]);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      mGlobalPos = mGlobalPosPtr.get();</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    mCurrentSpacePointsTRD = trdTracker().NTracklets();</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (mCurrentSpacePointsTRD &gt; mNMaxSpacePointsTRD) {</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      mNMaxSpacePointsTRD = mCurrentSpacePointsTRD;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      mGlobalPosPtrTRD.reset(<span class="keyword">new</span> <a class="code" href="../../dd/d9d/structfloat4.html">float4</a>[mNMaxSpacePointsTRD]);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      mGlobalPosPtrTRD2.reset(<span class="keyword">new</span> <a class="code" href="../../dd/d9d/structfloat4.html">float4</a>[mNMaxSpacePointsTRD]);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      mGlobalPosTRD = mGlobalPosPtrTRD.get();</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      mGlobalPosTRD2 = mGlobalPosPtrTRD2.get();</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">size_t</span>)mMerger.NOutputTracks() &gt; mTRDTrackIds.size()) {</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      mTRDTrackIds.resize(mMerger.NOutputTracks());</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    memset(mTRDTrackIds.data(), 0, <span class="keyword">sizeof</span>(mTRDTrackIds[0]) * mMerger.NOutputTracks());</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; trdTracker().NTracks(); i++) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="keywordflow">if</span> (trdTracker().Tracks()[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].GetNtracklets()) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        mTRDTrackIds[trdTracker().Tracks()[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].GetTPCtrackId()] = <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      }</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    mMaxClusterZ = 0;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="keywordtype">int</span> row = 0;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nCls = mMerger.Param().earlyTpcTransform ? ioptrs().nClusterData[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>] : ioptrs().clustersNative-&gt;nClustersSector[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>];</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; nCls; i++) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="keywordtype">int</span> cid;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keywordflow">if</span> (mMerger.Param().earlyTpcTransform) {</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cl = ioptrs().clusterData[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;          cid = cl.id;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;          cid = ioptrs().clustersNative-&gt;clusterOffset[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][0] + <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;          <span class="keywordflow">while</span> (row &lt; GPUCA_ROW_COUNT &amp;&amp; ioptrs().clustersNative-&gt;clusterOffset[iSlice][row + 1] &lt;= (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)cid) {</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            row++;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;          }</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        }</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="keywordflow">if</span> (cid &gt;= mNMaxClusters) {</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;          <a class="code" href="../../df/ddc/GPULogging_8h.html#a2700ed3728abe6f865af253f6ec5830f">GPUError</a>(<span class="stringliteral">&quot;Cluster Buffer Size exceeded (id %d max %d)&quot;</span>, cid, mNMaxClusters);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;          <span class="keywordflow">return</span> (1);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <a class="code" href="../../dd/d9d/structfloat4.html">float4</a>* ptr = &amp;mGlobalPos[cid];</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">if</span> (mMerger.Param().earlyTpcTransform) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cl = ioptrs().clusterData[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;          mChain-&gt;GetParam().Slice2Global(iSlice, cl.x + mXadd, cl.y, cl.z, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ab60e7164162636ef8d0315cf18269b0f">x</a>, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a72bce4984c96cef3d6a50adcbce6e388">y</a>, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;          <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a>;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cln = ioptrs().clustersNative-&gt;clusters[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][0][<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;          <a class="code" href="../../df/d6c/convertDigitsToRawZS_8cxx.html#a8761d49d4e74c4e774d0f36d12e060b7">GPUTPCConvertImpl::convert</a>(*mMerger.GetConstantMem(), <a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>, row, cln.getPad(), cln.getTime(), <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a>);</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;          mChain-&gt;GetParam().Slice2Global(iSlice, x + mXadd, y, z, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ab60e7164162636ef8d0315cf18269b0f">x</a>, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a72bce4984c96cef3d6a50adcbce6e388">y</a>, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keywordflow">if</span> (fabsf(ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>) &gt; mMaxClusterZ) {</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;          mMaxClusterZ = fabsf(ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        }</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keywordflow">if</span> (iSlice &lt; 18) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;          ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a> += mZadd;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;          ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a> += mZadd;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;          ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a> -= mZadd;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;          ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a> -= mZadd;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ab60e7164162636ef8d0315cf18269b0f">x</a> /= GL_SCALE_FACTOR;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a72bce4984c96cef3d6a50adcbce6e388">y</a> /= GL_SCALE_FACTOR;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a> /= GL_SCALE_FACTOR;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ae3ef7af10eec7945566a363866321e26">w</a> = tCLUSTER;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    }</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mCurrentSpacePointsTRD; i++) {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; sp = trdTracker().SpacePoints()[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keywordtype">int</span> iSec = mChain-&gt;GetTRDGeometry()-&gt;GetSector(trdTracker().Tracklets()[i].GetDetector());</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <a class="code" href="../../dd/d9d/structfloat4.html">float4</a>* ptr = &amp;mGlobalPosTRD[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      mChain-&gt;GetParam().Slice2Global(iSec, sp.mR + mXadd, sp.mX[0], sp.mX[1], &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ab60e7164162636ef8d0315cf18269b0f">x</a>, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a72bce4984c96cef3d6a50adcbce6e388">y</a>, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ab60e7164162636ef8d0315cf18269b0f">x</a> /= GL_SCALE_FACTOR;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a72bce4984c96cef3d6a50adcbce6e388">y</a> /= GL_SCALE_FACTOR;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a> /= GL_SCALE_FACTOR;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="keywordflow">if</span> (fabsf(ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>) &gt; mMaxClusterZ) {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        mMaxClusterZ = fabsf(ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      }</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ae3ef7af10eec7945566a363866321e26">w</a> = tTRDCLUSTER;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      ptr = &amp;mGlobalPosTRD2[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      mChain-&gt;GetParam().Slice2Global(iSec, sp.mR + mXadd + 4.5f, sp.mX[0] + 1.5f * sp.mDy, sp.mX[1], &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ab60e7164162636ef8d0315cf18269b0f">x</a>, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a72bce4984c96cef3d6a50adcbce6e388">y</a>, &amp;ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ab60e7164162636ef8d0315cf18269b0f">x</a> /= GL_SCALE_FACTOR;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a72bce4984c96cef3d6a50adcbce6e388">y</a> /= GL_SCALE_FACTOR;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a> /= GL_SCALE_FACTOR;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <span class="keywordflow">if</span> (fabsf(ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>) &gt; mMaxClusterZ) {</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        mMaxClusterZ = fabsf(ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">z</a>);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      ptr-&gt;<a class="code" href="../../dd/d9d/structfloat4.html#ae3ef7af10eec7945566a363866321e26">w</a> = tTRDCLUSTER;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    mTimerFPS.ResetStart();</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    mFramesDoneFPS = 0;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    mFPSScaleadjust = 0;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    mGlDLrecent = 0;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    mUpdateDLList = 0;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordflow">if</span> (!mixAnimation &amp;&amp; mOffscreenBuffer.created) {</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    setFrameBuffer(1, mOffscreenBuffer.fb_id);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  }</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="comment">// Initialize</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">if</span> (!mixAnimation) {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">if</span> (mInvertColors) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a12060509af7dc9c8353810eb8b7f145c">glClearColor</a>(1.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 1.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 1.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 1.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>));</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a12060509af7dc9c8353810eb8b7f145c">glClearColor</a>(0.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 0.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 0.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 1.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>));</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#afc250a2b6bf11f24bb73534a2f053c0d">glClear</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a> | <a class="code" href="../../dc/da3/glcorearb_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a>); <span class="comment">// Clear Screen And Depth Buffer</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <a class="code" href="../../d1/d78/unionhmm__mat4.html">hmm_mat4</a> nextViewMatrix = MY_HMM_IDENTITY;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="keywordtype">int</span> mMouseWheelTmp = mBackend-&gt;mMouseWheel;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  mBackend-&gt;mMouseWheel = 0;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordtype">bool</span> lookOrigin = mCamLookOrigin ^ mBackend-&gt;mKeys[mBackend-&gt;KEY_ALT];</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keywordtype">bool</span> yUp = mCamYUp ^ mBackend-&gt;mKeys[mBackend-&gt;KEY_CTRL] ^ lookOrigin;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// Calculate rotation / translation scaling factors</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordtype">float</span> scalefactor = mBackend-&gt;mKeys[mBackend-&gt;KEY_SHIFT] ? 0.2 : 1.0;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordtype">float</span> rotatescalefactor = scalefactor * 0.25f;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordflow">if</span> (mCfg.drawSlice != -1) {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    scalefactor *= 0.2f;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordtype">float</span> sqrdist = sqrtf(sqrtf(mViewMatrixP[12] * mViewMatrixP[12] + mViewMatrixP[13] * mViewMatrixP[13] + mViewMatrixP[14] * mViewMatrixP[14]) / GL_SCALE_FACTOR) * 0.8;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="keywordflow">if</span> (sqrdist &lt; 0.2) {</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    sqrdist = 0.2;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="keywordflow">if</span> (sqrdist &gt; 5) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    sqrdist = 5;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  }</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  scalefactor *= sqrdist;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="keywordtype">float</span> mixSlaveImage = 0.f;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keywordtype">float</span> time = mAnimateTime;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="keywordflow">if</span> (mAnimate &amp;&amp; time &lt; 0) {</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (mAnimateScreenshot) {</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      time = mAnimationFrame / 30.f;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      time = mAnimationTimer.GetCurrentElapsedTime();</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordtype">float</span> maxTime = mAnimateVectors[0].back();</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    mAnimationFrame++;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordflow">if</span> (time &gt;= maxTime) {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      time = maxTime;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      mAnimate = 0;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      SetInfo(<span class="stringliteral">&quot;Animation finished. (%1.2f seconds, %d frames)&quot;</span>, time, mAnimationFrame);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      SetInfo(<span class="stringliteral">&quot;Running mAnimation: time %1.2f/%1.2f, frames %d&quot;</span>, time, maxTime, mAnimationFrame);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  }</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="comment">// Perform new rotation / translation</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordflow">if</span> (mAnimate) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordtype">float</span> vals[8];</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; i++) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      vals[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = mAnimationSplines[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].evaluate(time);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">if</span> (mAnimationChangeConfig &amp;&amp; mixAnimation == <span class="keyword">false</span>) {</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <span class="keywordtype">int</span> base = 0;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="keywordtype">int</span> k = mAnimateVectors[0].size() - 1;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      <span class="keywordflow">while</span> (base &lt; k &amp;&amp; time &gt; mAnimateVectors[0][base]) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        base++;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      }</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="keywordflow">if</span> (base &gt; mAnimationLastBase + 1) {</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        mAnimationLastBase = base - 1;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      }</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="keywordflow">if</span> (base != mAnimationLastBase &amp;&amp; mAnimateVectors[0][mAnimationLastBase] != mAnimateVectors[0][base] &amp;&amp; memcmp(&amp;mAnimateConfig[base], &amp;mAnimateConfig[mAnimationLastBase], <span class="keyword">sizeof</span>(mAnimateConfig[base]))) {</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        mCfg = mAnimateConfig[mAnimationLastBase];</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        updateConfig();</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="keywordflow">if</span> (mDrawQualityRenderToTexture) {</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;          setFrameBuffer(1, mMixBuffer.fb_id);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#afc250a2b6bf11f24bb73534a2f053c0d">glClear</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a> | <a class="code" href="../../dc/da3/glcorearb_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a>); <span class="comment">// Clear Screen And Depth Buffer</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;          DrawGLScene_internal(<span class="keyword">true</span>, time);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;          setFrameBuffer();</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;          DrawGLScene_internal(<span class="keyword">true</span>, time);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;          CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#aa5ce5420faae33cea9416df7d9d460dc">glBlitNamedFramebuffer</a>(mMainBufferStack.back(), mMixBuffer.fb_id, 0, 0, mRenderwidth, mRenderheight, 0, 0, mRenderwidth, mRenderheight, <a class="code" href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a>));</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#afc250a2b6bf11f24bb73534a2f053c0d">glClear</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a> | <a class="code" href="../../dc/da3/glcorearb_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a>); <span class="comment">// Clear Screen And Depth Buffer</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        mixSlaveImage = 1.f - (time - mAnimateVectors[0][mAnimationLastBase]) / (mAnimateVectors[0][base] - mAnimateVectors[0][mAnimationLastBase]);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      }</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keywordflow">if</span> (memcmp(&amp;mAnimateConfig[base], &amp;mCfg, <span class="keyword">sizeof</span>(mCfg))) {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        mCfg = mAnimateConfig[base];</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        updateConfig();</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    }</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">if</span> (mCfg.animationMode != 6) {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      <span class="keywordflow">if</span> (mCfg.animationMode &amp; 1) <span class="comment">// Rotation from euler angles</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        nextViewMatrix = nextViewMatrix * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ae849e8298e9a0d20cc16c77003497346">HMM_Rotate</a>(-vals[4] * 180.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a> / M_PI, {1, 0, 0}) * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ae849e8298e9a0d20cc16c77003497346">HMM_Rotate</a>(vals[5] * 180.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a> / M_PI, {0, 1, 0}) * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ae849e8298e9a0d20cc16c77003497346">HMM_Rotate</a>(-vals[6] * 180.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a> / M_PI, {0, 0, 1});</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      } <span class="keywordflow">else</span> { <span class="comment">// Rotation from quaternion</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> mag = sqrtf(vals[4] * vals[4] + vals[5] * vals[5] + vals[6] * vals[6] + vals[7] * vals[7]);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="keywordflow">if</span> (mag &lt; 0.0001) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;          vals[7] = 1;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            vals[4 + <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] /= mag;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;          }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        }</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <span class="keywordtype">float</span> xx = vals[4] * vals[4], xy = vals[4] * vals[5], xz = vals[4] * vals[6], xw = vals[4] * vals[7], yy = vals[5] * vals[5], yz = vals[5] * vals[6], yw = vals[5] * vals[7], zz = vals[6] * vals[6], zw = vals[6] * vals[7];</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordtype">float</span> mat[16] = {1 - 2 * (yy + zz), 2 * (xy - zw), 2 * (xz + yw), 0, 2 * (xy + zw), 1 - 2 * (xx + zz), 2 * (yz - xw), 0, 2 * (xz - yw), 2 * (yz + xw), 1 - 2 * (xx + yy), 0, 0, 0, 0, 1};</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        nextViewMatrix = nextViewMatrix * MY_HMM_FROM(mat);</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    }</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">if</span> (mCfg.animationMode &amp; 4) <span class="comment">// Compute cartesian translation from sperical coordinates (euler angles)</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    {</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span> r = vals[3], phi = vals[1], theta = vals[2];</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      vals[2] = r * cosf(phi) * cosf(theta);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      vals[0] = r * sinf(phi) * cosf(theta);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      vals[1] = r * sinf(theta);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mCfg.animationMode &amp; 2) { <span class="comment">// Scale cartesion translation to interpolated radius</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      <span class="keywordtype">float</span> r = sqrtf(vals[0] * vals[0] + vals[1] * vals[1] + vals[2] * vals[2]);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <span class="keywordflow">if</span> (fabsf(r) &lt; 0.0001) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        r = 1;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      }</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      r = vals[3] / <a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a>;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++) {</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        vals[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= <a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    }</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordflow">if</span> (mCfg.animationMode == 6) {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      nextViewMatrix = <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ab4c14017b0b60aec07eb7f66a9eee7ec">HMM_LookAt</a>({vals[0], vals[1], vals[2]}, {0, 0, 0}, {0, 1, 0});</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      nextViewMatrix = nextViewMatrix * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#a8ebcf086f769a6c14b865b2e64617b9b">HMM_Translate</a>({-vals[0], -vals[1], -vals[2]});</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    }</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mResetScene) {</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    nextViewMatrix = nextViewMatrix * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#a8ebcf086f769a6c14b865b2e64617b9b">HMM_Translate</a>({0, 0, <a class="code" href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a>().ContinuousTracking ? (-mMaxClusterZ / GL_SCALE_FACTOR - 8) : -8});</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    mCfg.pointSize = 2.0;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    mCfg.drawSlice = -1;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    mXadd = mZadd = 0;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    mCamLookOrigin = mCamYUp = <span class="keyword">false</span>;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    mAngleRollOrigin = -1e9;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    mResetScene = 0;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="keywordtype">float</span> moveZ = scalefactor * ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)mMouseWheelTmp / 150 + (<span class="keywordtype">float</span>)(mBackend-&gt;mKeys[<span class="charliteral">&#39;W&#39;</span>] - mBackend-&gt;mKeys[<span class="charliteral">&#39;S&#39;</span>]) * (!mBackend-&gt;mKeys[mBackend-&gt;KEY_SHIFT]) * 0.2 * mFPSScale);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordtype">float</span> moveY = scalefactor * ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)(mBackend-&gt;mKeys[mBackend-&gt;KEY_PAGEDOWN] - mBackend-&gt;mKeys[mBackend-&gt;KEY_PAGEUP]) * 0.2 * mFPSScale);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keywordtype">float</span> moveX = scalefactor * ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)(mBackend-&gt;mKeys[<span class="charliteral">&#39;A&#39;</span>] - mBackend-&gt;mKeys[<span class="charliteral">&#39;D&#39;</span>]) * (!mBackend-&gt;mKeys[mBackend-&gt;KEY_SHIFT]) * 0.2 * mFPSScale);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordtype">float</span> rotRoll = rotatescalefactor * mFPSScale * 2 * (mBackend-&gt;mKeys[<span class="charliteral">&#39;E&#39;</span>] - mBackend-&gt;mKeys[<span class="charliteral">&#39;F&#39;</span>]) * (!mBackend-&gt;mKeys[mBackend-&gt;KEY_SHIFT]);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordtype">float</span> rotYaw = rotatescalefactor * mFPSScale * 2 * (mBackend-&gt;mKeys[mBackend-&gt;KEY_RIGHT] - mBackend-&gt;mKeys[mBackend-&gt;KEY_LEFT]);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordtype">float</span> rotPitch = rotatescalefactor * mFPSScale * 2 * (mBackend-&gt;mKeys[mBackend-&gt;KEY_DOWN] - mBackend-&gt;mKeys[mBackend-&gt;KEY_UP]);</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">if</span> (mBackend-&gt;mMouseDnR &amp;&amp; mBackend-&gt;mMouseDn) {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      moveZ += -scalefactor * ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)mBackend-&gt;mouseMvY - (<span class="keywordtype">float</span>)mBackend-&gt;mMouseDnY) / 4;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      rotRoll += rotatescalefactor * ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)mBackend-&gt;mouseMvX - (<span class="keywordtype">float</span>)mBackend-&gt;mMouseDnX);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mBackend-&gt;mMouseDnR) {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      moveX += -scalefactor * 0.5 * ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)mBackend-&gt;mMouseDnX - (<span class="keywordtype">float</span>)mBackend-&gt;mouseMvX) / 4;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      moveY += -scalefactor * 0.5 * ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)mBackend-&gt;mouseMvY - (<span class="keywordtype">float</span>)mBackend-&gt;mMouseDnY) / 4;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mBackend-&gt;mMouseDn) {</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      rotYaw += rotatescalefactor * ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)mBackend-&gt;mouseMvX - (<span class="keywordtype">float</span>)mBackend-&gt;mMouseDnX);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      rotPitch += rotatescalefactor * ((<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)mBackend-&gt;mouseMvY - (<span class="keywordtype">float</span>)mBackend-&gt;mMouseDnY);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span> (mBackend-&gt;mKeys[<span class="charliteral">&#39;&lt;&#39;</span>] &amp;&amp; !mBackend-&gt;mKeysShift[<span class="charliteral">&#39;&lt;&#39;</span>]) {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      mAnimationDelay += moveX;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <span class="keywordflow">if</span> (mAnimationDelay &lt; 0.05) {</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        mAnimationDelay = 0.05;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      }</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      moveX = 0.f;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      moveY = 0.f;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      SetInfo(<span class="stringliteral">&quot;Animation delay set to %1.2f&quot;</span>, mAnimationDelay);</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    }</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="keywordflow">if</span> (yUp) {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      mAngleRollOrigin = 0;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!lookOrigin) {</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      mAngleRollOrigin = -1e6;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    }</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">if</span> (lookOrigin) {</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      <span class="keywordflow">if</span> (!yUp) {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">if</span> (mAngleRollOrigin &lt; -1e6) {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;          mAngleRollOrigin = yUp ? 0. : -mAngle[2];</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        }</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        mAngleRollOrigin += rotRoll;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        nextViewMatrix = nextViewMatrix * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ae849e8298e9a0d20cc16c77003497346">HMM_Rotate</a>(mAngleRollOrigin, {0, 0, 1});</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="keywordtype">float</span> tmpX = moveX, tmpY = moveY;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        moveX = tmpX * cosf(mAngle[2]) - tmpY * sinf(mAngle[2]);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        moveY = tmpX * sinf(mAngle[2]) + tmpY * cosf(mAngle[2]);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      }</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span> x = mXYZ[0], y = mXYZ[1], z = mXYZ[2];</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="keywordtype">float</span> r = sqrtf(x * x + +y * y + z * z);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="keywordtype">float</span> r2 = sqrtf(x * x + z * z);</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      <span class="keywordtype">float</span> phi = atan2f(z, x);</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      phi += moveX * 0.1f;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="keywordtype">float</span> theta = atan2f(mXYZ[1], r2);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      theta -= moveY * 0.1f;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span> max_theta = M_PI / 2 - 0.01;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="keywordflow">if</span> (theta &gt;= max_theta) {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        theta = max_theta;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theta &lt;= -max_theta) {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        theta = -max_theta;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      }</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keywordflow">if</span> (moveZ &gt;= r - 0.1) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        moveZ = r - 0.1;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      r -= moveZ;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      r2 = r * cosf(theta);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      mXYZ[0] = r2 * cosf(phi);</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      mXYZ[2] = r2 * sinf(phi);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      mXYZ[1] = r * sinf(theta);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      nextViewMatrix = <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ab4c14017b0b60aec07eb7f66a9eee7ec">HMM_LookAt</a>({mXYZ[0], mXYZ[1], mXYZ[2]}, {0, 0, 0}, {0, 1, 0});</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      nextViewMatrix = nextViewMatrix * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#a8ebcf086f769a6c14b865b2e64617b9b">HMM_Translate</a>({moveX, moveY, moveZ});</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      <span class="keywordflow">if</span> (rotYaw != 0.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>) {</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        nextViewMatrix = nextViewMatrix * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ae849e8298e9a0d20cc16c77003497346">HMM_Rotate</a>(rotYaw, {0, 1, 0});</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="keywordflow">if</span> (rotPitch != 0.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>) {</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        nextViewMatrix = nextViewMatrix * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ae849e8298e9a0d20cc16c77003497346">HMM_Rotate</a>(rotPitch, {1, 0, 0});</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      }</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <span class="keywordflow">if</span> (!yUp &amp;&amp; rotRoll != 0.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>) {</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        nextViewMatrix = nextViewMatrix * <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ae849e8298e9a0d20cc16c77003497346">HMM_Rotate</a>(rotRoll, {0, 0, 1});</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      nextViewMatrix = nextViewMatrix * mViewMatrix; <span class="comment">// Apply previous translation / rotation</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <span class="keywordflow">if</span> (yUp) {</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        calcXYZ(&amp;nextViewMatrix.Elements[0][0]);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        nextViewMatrix = <a class="code" href="../../da/d8b/HandMadeMath_8h.html#ae849e8298e9a0d20cc16c77003497346">HMM_Rotate</a>(mAngle[2] * 180.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a> / M_PI, {0, 0, 1}) * nextViewMatrix;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      }</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    }</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="comment">// Graphichs Options</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="keywordtype">float</span> minSize = 0.4 / (mDrawQualityDownsampleFSAA &gt; 1 ? mDrawQualityDownsampleFSAA : 1);</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keywordtype">int</span> deltaLine = mBackend-&gt;mKeys[<span class="charliteral">&#39;+&#39;</span>] * mBackend-&gt;mKeysShift[<span class="charliteral">&#39;+&#39;</span>] - mBackend-&gt;mKeys[<span class="charliteral">&#39;-&#39;</span>] * mBackend-&gt;mKeysShift[<span class="charliteral">&#39;-&#39;</span>];</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    mCfg.lineWidth += (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)deltaLine * mFPSScale * 0.02 * mCfg.lineWidth;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <a class="code" href="../../df/d18/namespaceo2_1_1mid.html#ace6b84ba8e24525ead602cbda42f1bfb">if</a> (mCfg.lineWidth &lt; minSize) {</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      mCfg.lineWidth = minSize;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keywordflow">if</span> (deltaLine) {</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      SetInfo(<span class="stringliteral">&quot;%s line width: %f&quot;</span>, deltaLine &gt; 0 ? <span class="stringliteral">&quot;Increasing&quot;</span> : <span class="stringliteral">&quot;Decreasing&quot;</span>, mCfg.lineWidth);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    }</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    minSize *= 2;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="keywordtype">int</span> deltaPoint = mBackend-&gt;mKeys[<span class="charliteral">&#39;+&#39;</span>] * (!mBackend-&gt;mKeysShift[<span class="charliteral">&#39;+&#39;</span>]) - mBackend-&gt;mKeys[<span class="charliteral">&#39;-&#39;</span>] * (!mBackend-&gt;mKeysShift[<span class="charliteral">&#39;-&#39;</span>]);</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    mCfg.pointSize += (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)deltaPoint * mFPSScale * 0.02 * mCfg.pointSize;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="../../df/d18/namespaceo2_1_1mid.html#ace6b84ba8e24525ead602cbda42f1bfb">if</a> (mCfg.pointSize &lt; minSize) {</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      mCfg.pointSize = minSize;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    }</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">if</span> (deltaPoint) {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      SetInfo(<span class="stringliteral">&quot;%s point size: %f&quot;</span>, deltaPoint &gt; 0 ? <span class="stringliteral">&quot;Increasing&quot;</span> : <span class="stringliteral">&quot;Decreasing&quot;</span>, mCfg.pointSize);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="comment">// Store position</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="keywordflow">if</span> (mAnimateTime &lt; 0) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    mViewMatrix = nextViewMatrix;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    calcXYZ(mViewMatrixP);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  }</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <span class="keywordflow">if</span> (mBackend-&gt;mMouseDn || mBackend-&gt;mMouseDnR) {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    mBackend-&gt;mMouseDnX = mBackend-&gt;mouseMvX;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    mBackend-&gt;mMouseDnY = mBackend-&gt;mouseMvY;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="keywordflow">if</span> (mCfg.smoothPoints) {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(GL_POINT_SMOOTH));</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(GL_POINT_SMOOTH));</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  }</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <span class="keywordflow">if</span> (mCfg.smoothLines) {</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#af310b76b7ac30da1d61d8a42388fe651">GL_LINE_SMOOTH</a>));</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#af310b76b7ac30da1d61d8a42388fe651">GL_LINE_SMOOTH</a>));</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  }</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa290e8f9ee6f6862778355aa22bb0b13">GL_BLEND</a>));</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#afbdb5d9533b5a5ed6c66f4ee46025e66">glBlendFunc</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a>));</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a7f1f9a0fe9bed11438638a721bd6660d">glPointSize</a>(mCfg.pointSize * (mDrawQualityDownsampleFSAA &gt; 1 ? mDrawQualityDownsampleFSAA : 1)));</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ac8934b6d1f58aa087424d8080ccf031c">glLineWidth</a>(mCfg.lineWidth * (mDrawQualityDownsampleFSAA &gt; 1 ? mDrawQualityDownsampleFSAA : 1)));</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="comment">// Prepare Event</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="keywordflow">if</span> (!mGlDLrecent) {</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NSLICES; i++) {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      mVertexBuffer[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].clear();</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      mVertexBufferStart[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].clear();</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      mVertexBufferCount[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].clear();</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    }</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mCurrentClusters; i++) {</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      mGlobalPos[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].w = tCLUSTER;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    }</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mCurrentSpacePointsTRD; i++) {</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      mGlobalPosTRD[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].w = tTRDCLUSTER;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    }</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N_POINTS_TYPE; i++) {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        mGlDLPoints[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].resize(mNCollissions);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      }</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N_FINAL_TYPE; i++) {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        mGlDLFinal[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].resize(mNCollissions);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    }</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a930799bc13c911ce05e376c5b6c8ac09">parallel</a> num_threads(mChain-&gt;GetDeviceProcessingSettings().nThreads))</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    {</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="preprocessor">#ifdef WITH_OPENMP</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      <span class="keywordtype">int</span> numThread = omp_get_thread_num();</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <span class="keywordtype">int</span> numThreads = omp_get_num_threads();</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      <span class="keywordtype">int</span> numThread = 0, numThreads = 1;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(<span class="keywordflow">for</span>)</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker = (<a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp;)sliceTracker(iSlice);</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        tracker.<a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html#a35896f787d473bae9139bafd8b2aa9ba">SetPointersDataLinks</a>(tracker.<a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html#a6c7e313219bfc8a53e2585e89805e3af">LinkTmpMemory</a>());</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        mGlDLLines[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][tINITLINK] = DrawLinks(tracker, tINITLINK, <span class="keyword">true</span>);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        tracker.<a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html#a35896f787d473bae9139bafd8b2aa9ba">SetPointersDataLinks</a>(mChain-&gt;rec()-&gt;Res(tracker.<a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html#ad104e4fa66037c2eab1a9b4585452ec2">MemoryResLinks</a>()).Ptr());</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      }</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <a class="code" href="../../d8/d01/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPropagator.html">GPUTPCGMPropagator</a> prop;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      prop.SetMaxSinPhi(.999);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      prop.SetMaterialTPC();</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      prop.SetPolynomialField(&amp;mMerger.Param().polynomialField);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      prop.SetToyMCEventsFlag(mMerger.Param().ToyMCEventsFlag);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(barrier)</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(<span class="keywordflow">for</span>)</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker = sliceTracker(iSlice);</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        mGlDLLines[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][tLINK] = DrawLinks(tracker, tLINK);</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        mGlDLLines[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][tSEED] = DrawSeeds(tracker);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        mGlDLLines[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][tTRACKLET] = DrawTracklets(tracker);</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        mGlDLLines[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][tSLICETRACK] = DrawTracks(tracker, 0);</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        mGlDLGrid[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>] = DrawGrid(tracker);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      }</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(barrier)</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(<span class="keywordflow">for</span>)</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker = sliceTracker(iSlice);</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        mGlDLLines[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][tGLOBALTRACK] = DrawTracks(tracker, 1);</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      }</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(barrier)</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      mThreadTracks[numThread].resize(mNCollissions);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mNCollissions; i++) {</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; NSLICES; j++) {</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 2; k++) {</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;            mThreadTracks[numThread][<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>][j][k].clear();</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;          }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        }</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      }</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(<span class="keywordflow">for</span>)</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mMerger.NOutputTracks(); i++) {</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d3/dd9/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergedTrack.html">GPUTPCGMMergedTrack</a>* track = &amp;mMerger.OutputTracks()[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">if</span> (track-&gt;NClusters() == 0) {</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        }</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="keywordflow">if</span> (mHideRejectedTracks &amp;&amp; !track-&gt;OK()) {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        }</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        <span class="keywordtype">int</span> slice = mMerger.Clusters()[track-&gt;FirstClusterRef() + track-&gt;NClusters() - 1].slice;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> col = 0;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">if</span> (mNCollissions &gt; 1) {</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;          <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a> = mQA ? mQA-&gt;GetMCTrackLabel(i) : -1;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;          <span class="keywordflow">while</span> (col &lt; mCollisionClusters.size() &amp;&amp; mCollisionClusters[col][NSLICES] &lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;            col++;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;          }</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        }</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        mThreadTracks[numThread][col][slice][0].emplace_back(i);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      }</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(<span class="keywordflow">for</span>)</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; ioptrs().nMCInfosTPC; i++) {</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html">GPUTPCMCInfo</a>&amp; mc = ioptrs().mcInfosTPC[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="keywordflow">if</span> (mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a8dda15aa0193b2da3a5e3192de7274e0">charge</a> == 0.f) {</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        }</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="keywordflow">if</span> (mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a815b3ac0438325bb2c326bf4127f1b7b">pid</a> &lt; 0) {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        }</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keywordtype">float</span> alpha = atan2f(mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a4caeef6463c337010707781760e017ff">y</a>, mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a1a89969f806db9dbd1a80fef6ea5f8e4">x</a>);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">if</span> (alpha &lt; 0) {</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;          alpha += 2 * M_PI;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        }</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="keywordtype">int</span> slice = alpha / (2 * M_PI) * 18;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <span class="keywordflow">if</span> (mc.<a class="code" href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#abe9ebfa50dc17d57c5c6636214321850">z</a> &lt; 0) {</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;          slice += 18;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        }</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> col = 0;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="keywordflow">if</span> (mNCollissions &gt; 1) {</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;          <span class="keywordflow">while</span> (col &lt; mCollisionClusters.size() &amp;&amp; mCollisionClusters[col][NSLICES] &lt; (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#ad08a37964429d340d966dfa679443e8f">int</a>)i) {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;            col++;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;          }</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        }</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        mThreadTracks[numThread][col][slice][1].emplace_back(i);</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(barrier)</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(<span class="keywordflow">for</span>)</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iCol = 0; iCol &lt; mNCollissions; iCol++) {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;          mThreadBuffers[numThread].clear();</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSet = 0; iSet &lt; numThreads; iSet++) {</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;            DrawFinal(iSlice, iCol, &amp;prop, mThreadTracks[iSet][iCol][iSlice], mThreadBuffers[numThread]);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;          }</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;          vboList* list = &amp;mGlDLFinal[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][iCol][0];</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N_FINAL_TYPE; i++) {</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;            <span class="keywordtype">size_t</span> startCount = mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size();</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; mThreadBuffers[numThread].start[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].size(); j++) {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;              mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(mThreadBuffers[numThread].<a class="code" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a>[i][j]);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;              mVertexBufferCount[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].emplace_back(mThreadBuffers[numThread].count[i][j]);</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;            }</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;            list[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = vboList(startCount, mVertexBufferStart[iSlice].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() - startCount, iSlice);</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;          }</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        }</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      }</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(barrier)</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      <a class="code" href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a>(<span class="keywordflow">for</span>)</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUTPCTracker</a>&amp; tracker = sliceTracker(iSlice);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N_POINTS_TYPE_TPC; i++) {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iCol = 0; iCol &lt; mNCollissions; iCol++) {</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;            mGlDLPoints[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>][iCol] = DrawClusters(tracker, i, iCol);</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;          }</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        }</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      }</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    }</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="comment">// End omp parallel</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = N_POINTS_TYPE_TPC; i &lt; N_POINTS_TYPE_TPC + N_POINTS_TYPE_TRD; i++) {</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iCol = 0; iCol &lt; mNCollissions; iCol++) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;          mGlDLPoints[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>][<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>][iCol] = DrawSpacePointsTRD(iSlice, i, iCol);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        }</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      }</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    mGlDLrecent = 1;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordtype">size_t</span> totalVertizes = 0;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NSLICES; i++) {</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      totalVertizes += mVertexBuffer[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].size();</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    }</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    mUseMultiVBO = (totalVertizes * <span class="keyword">sizeof</span>(mVertexBuffer[0][0]) &gt;= 0x100000000ll);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">if</span> (mUseMultiVBO) {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NSLICES; i++) {</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a0a0618cdb73952a1337b01f82119229c">glNamedBufferData</a>(mVBOId[i], mVertexBuffer[i].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() * <span class="keyword">sizeof</span>(mVertexBuffer[i][0]), mVertexBuffer[i].<a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>(), <a class="code" href="../../dc/da3/glcorearb_8h.html#ab7dffdc215fbbe75b6ccacfecfc14648">GL_STATIC_DRAW</a>));</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        mVertexBuffer[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].clear();</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      }</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="keywordtype">size_t</span> totalYet = mVertexBuffer[0].size();</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      mVertexBuffer[0].resize(totalVertizes);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; NSLICES; i++) {</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; mVertexBufferStart[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].size(); j++) {</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;          mVertexBufferStart[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>][j] += totalYet;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        }</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        memcpy(&amp;mVertexBuffer[0][totalYet], &amp;mVertexBuffer[i][0], mVertexBuffer[i].<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>() * <span class="keyword">sizeof</span>(mVertexBuffer[i][0]));</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        totalYet += mVertexBuffer[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].size();</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        mVertexBuffer[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].clear();</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      }</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a7180045dcb52b22af2cd0366026bc3ed">GL_ARRAY_BUFFER</a>, mVBOId[0])); <span class="comment">// Bind ahead of time, since it is not going to change</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a0a0618cdb73952a1337b01f82119229c">glNamedBufferData</a>(mVBOId[0], totalVertizes * <span class="keyword">sizeof</span>(mVertexBuffer[0][0]), mVertexBuffer[0].<a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>(), <a class="code" href="../../dc/da3/glcorearb_8h.html#ab7dffdc215fbbe75b6ccacfecfc14648">GL_STATIC_DRAW</a>));</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      mVertexBuffer[0].clear();</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">if</span> (mUseGLIndirectDraw) {</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      mCmdBuffer.clear();</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSlice = 0; iSlice &lt; NSLICES; iSlice++) {</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        mIndirectSliceOffset[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>] = mCmdBuffer.size();</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; mVertexBufferStart[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">iSlice</a>].size(); k++) {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;          mCmdBuffer.emplace_back(mVertexBufferCount[iSlice][k], 1, mVertexBufferStart[iSlice][k], 0);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        }</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      }</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a9419a03f5c46e2758f884e9c56d92b6a">glBufferData</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#af57dbe61f04ea19c60697f13bb2bb8f3">GL_DRAW_INDIRECT_BUFFER</a>, mCmdBuffer.size() * <span class="keyword">sizeof</span>(mCmdBuffer[0]), mCmdBuffer.data(), <a class="code" href="../../dc/da3/glcorearb_8h.html#ab7dffdc215fbbe75b6ccacfecfc14648">GL_STATIC_DRAW</a>));</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    }</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">if</span> (showTimer) {</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      printf(<span class="stringliteral">&quot;Event visualization time: %&#39;d us (vertices %&#39;lld / %&#39;lld bytes)\n&quot;</span>, (<span class="keywordtype">int</span>)(mTimerDraw.GetCurrentElapsedTime() * 1000000.), (<span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="../../d8/de9/qconfigoptions_8h.html#ad08a37964429d340d966dfa679443e8f">int</a>)totalVertizes, (<span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>)(totalVertizes * <span class="keyword">sizeof</span>(mVertexBuffer[0][0])));</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    }</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  }</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="comment">// Draw Event</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  mNDrawCalls = 0;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  CHKERR(glEnableClientState(<a class="code" href="../../dc/da3/glcorearb_8h.html#a76bcbd4f383a8cf41a3a1afa35106a66">GL_VERTEX_ARRAY</a>));</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  CHKERR(glVertexPointer(3, <a class="code" href="../../dc/da3/glcorearb_8h.html#a6d19915d4237cb559505bd3e5dcfcf3c">GL_FLOAT</a>, 0, <span class="keyword">nullptr</span>));</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a4c13098a615d32e7f04aa4105149564f">glBindVertexArray</a>(mVertexArray));</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ad8e40c882d63c4671dea2ca2dfcf3046">glUseProgram</a>(mShaderProgram));</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a8afadc1fe36886688a02097cc63a17cb">glVertexAttribPointer</a>(0, 3, <a class="code" href="../../dc/da3/glcorearb_8h.html#a6d19915d4237cb559505bd3e5dcfcf3c">GL_FLOAT</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#abca6d43f43fae31f49dcb883b2f301f6">GL_FALSE</a>, 0, <span class="keyword">nullptr</span>));</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a6e8ee482001ee8fb9b3d4851116779b4">glEnableVertexAttribArray</a>(0));</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d78/unionhmm__mat4.html">hmm_mat4</a> proj = <a class="code" href="../../da/d8b/HandMadeMath_8h.html#a45b402021ad3a82a97357d3d96e54d6a">HMM_Perspective</a>(45.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, (<a class="code" href="../../d4/dc3/classfloat.html">GLfloat</a>)mScreenwidth / (<a class="code" href="../../d4/dc3/classfloat.html">GLfloat</a>)mScreenheight, 0.1<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 1000.0<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    CHKERR(glMatrixMode(GL_PROJECTION));</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    CHKERR(glLoadMatrixf(&amp;proj.<a class="code" href="../../d1/d78/unionhmm__mat4.html#ae0ab930714c465c75748a16ecb48fc49">Elements</a>[0][0]));</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    CHKERR(glMatrixMode(GL_MODELVIEW));</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    CHKERR(glLoadMatrixf(&amp;nextViewMatrix.Elements[0][0]));</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d78/unionhmm__mat4.html">hmm_mat4</a> modelViewProj = proj * nextViewMatrix;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a1cd4c6b9e1fb6b4eb927ab0997de48ef">glUniformMatrix4fv</a>(mModelViewProjId, 1, <a class="code" href="../../dc/da3/glcorearb_8h.html#abca6d43f43fae31f49dcb883b2f301f6">GL_FALSE</a>, &amp;modelViewProj.<a class="code" href="../../d1/d78/unionhmm__mat4.html#ae0ab930714c465c75748a16ecb48fc49">Elements</a>[0][0]));</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  }</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="preprocessor">#define LOOP_SLICE for (int iSlice = (mCfg.drawSlice == -1 ? 0 : mCfg.drawRelatedSlices ? (mCfg.drawSlice % 9) : mCfg.drawSlice); iSlice &lt; NSLICES; iSlice += (mCfg.drawSlice == -1 ? 1 : mCfg.drawRelatedSlices ? 9 : NSLICES))</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="preprocessor">#define LOOP_COLLISION for (int iCol = (mCfg.showCollision == -1 ? 0 : mCfg.showCollision); iCol &lt; mNCollissions; iCol += (mCfg.showCollision == -1 ? 1 : mNCollissions))</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="preprocessor">#define LOOP_COLLISION_COL(cmd) \</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="preprocessor">  LOOP_COLLISION                \</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="preprocessor">  {                             \</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="preprocessor">    if (mCfg.colorCollisions) { \</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="preprocessor">      SetCollisionColor(iCol);  \</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="preprocessor">    }                           \</span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="preprocessor">    cmd;                        \</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="keywordflow">if</span> (mCfg.drawGrid) {</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    SetColorGrid();</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    LOOP_SLICE drawVertices(mGlDLGrid[iSlice], <a class="code" href="../../dc/da3/glcorearb_8h.html#a532ed3612eae8eaed8a7a53ecd7a28f3">GL_LINES</a>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  }</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="keywordflow">if</span> (mCfg.drawClusters) {</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="keywordflow">if</span> (mCfg.drawTRD) {</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      SetColorTRD();</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tTRDCLUSTER][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a532ed3612eae8eaed8a7a53ecd7a28f3">GL_LINES</a>));</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawFinal) {</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <span class="keywordflow">if</span> (mCfg.colorClusters) {</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;          SetColorFinal();</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        }</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tTRDATTACHED][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>));</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tTRDATTACHED][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a532ed3612eae8eaed8a7a53ecd7a28f3">GL_LINES</a>));</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    }</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="keywordflow">if</span> (mCfg.drawTPC) {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      SetColorClusters();</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tCLUSTER][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>));</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawInitLinks) {</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="keywordflow">if</span> (mCfg.excludeClusters) {</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;          <span class="keywordflow">goto</span> skip1;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        }</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keywordflow">if</span> (mCfg.colorClusters) {</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;          SetColorInitLinks();</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        }</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      }</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tINITLINK][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>));</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawLinks) {</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">if</span> (mCfg.excludeClusters) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;          <span class="keywordflow">goto</span> skip1;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        }</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <span class="keywordflow">if</span> (mCfg.colorClusters) {</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;          SetColorLinks();</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        }</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        SetColorClusters();</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      }</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tLINK][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>));</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawSeeds) {</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="keywordflow">if</span> (mCfg.excludeClusters) {</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;          <span class="keywordflow">goto</span> skip1;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        }</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <span class="keywordflow">if</span> (mCfg.colorClusters) {</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;          SetColorSeeds();</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        }</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      }</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tSEED][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>));</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    skip1:</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      SetColorClusters();</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawTracklets) {</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <span class="keywordflow">if</span> (mCfg.excludeClusters) {</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;          <span class="keywordflow">goto</span> skip2;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        }</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <span class="keywordflow">if</span> (mCfg.colorClusters) {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;          SetColorTracklets();</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        }</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      }</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tTRACKLET][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>));</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawTracks) {</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        <span class="keywordflow">if</span> (mCfg.excludeClusters) {</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;          <span class="keywordflow">goto</span> skip2;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        }</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="keywordflow">if</span> (mCfg.colorClusters) {</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;          SetColorTracks();</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        }</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      }</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tSLICETRACK][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>));</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    skip2:;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawGlobalTracks) {</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <span class="keywordflow">if</span> (mCfg.excludeClusters) {</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;          <span class="keywordflow">goto</span> skip3;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        }</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="keywordflow">if</span> (mCfg.colorClusters) {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;          SetColorGlobalTracks();</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        }</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        SetColorClusters();</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      }</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tGLOBALTRACK][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>));</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      SetColorClusters();</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawFinal &amp;&amp; mCfg.propagateTracks &lt; 2) {</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keywordflow">if</span> (mCfg.excludeClusters) {</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;          <span class="keywordflow">goto</span> skip3;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        }</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="keywordflow">if</span> (mCfg.colorClusters) {</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;          SetColorFinal();</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        }</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      }</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      LOOP_SLICE LOOP_COLLISION_COL(drawVertices(mGlDLPoints[iSlice][tFINALTRACK][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>));</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    skip3:;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="keywordflow">if</span> (!mConfig.clustersOnly &amp;&amp; !mCfg.excludeClusters) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="keywordflow">if</span> (mCfg.drawTPC) {</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawInitLinks) {</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        SetColorInitLinks();</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        LOOP_SLICE drawVertices(mGlDLLines[iSlice][tINITLINK], <a class="code" href="../../dc/da3/glcorearb_8h.html#a532ed3612eae8eaed8a7a53ecd7a28f3">GL_LINES</a>);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      }</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawLinks) {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        SetColorLinks();</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        LOOP_SLICE drawVertices(mGlDLLines[iSlice][tLINK], <a class="code" href="../../dc/da3/glcorearb_8h.html#a532ed3612eae8eaed8a7a53ecd7a28f3">GL_LINES</a>);</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      }</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawSeeds) {</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        SetColorSeeds();</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        LOOP_SLICE drawVertices(mGlDLLines[iSlice][tSEED], <a class="code" href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a>);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawTracklets) {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        SetColorTracklets();</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        LOOP_SLICE drawVertices(mGlDLLines[iSlice][tTRACKLET], <a class="code" href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a>);</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      }</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawTracks) {</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        SetColorTracks();</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        LOOP_SLICE drawVertices(mGlDLLines[iSlice][tSLICETRACK], <a class="code" href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a>);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      }</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordflow">if</span> (mCfg.drawGlobalTracks) {</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        SetColorGlobalTracks();</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        LOOP_SLICE drawVertices(mGlDLLines[iSlice][tGLOBALTRACK], <a class="code" href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a>);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      }</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    }</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">if</span> (mCfg.drawFinal) {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      SetColorFinal();</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      LOOP_SLICE LOOP_COLLISION</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      {</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        <span class="keywordflow">if</span> (mCfg.colorCollisions) {</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;          SetCollisionColor(iCol);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        }</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <span class="keywordflow">if</span> (mCfg.propagateTracks &lt; 2) {</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;          drawVertices(mGlDLFinal[iSlice][iCol][0], <a class="code" href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a>);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        }</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        <span class="keywordflow">if</span> (mCfg.propagateTracks &gt; 0 &amp;&amp; mCfg.propagateTracks &lt; 3) {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;          drawVertices(mGlDLFinal[iSlice][iCol][1], <a class="code" href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a>);</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        }</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;        <span class="keywordflow">if</span> (mCfg.propagateTracks == 2) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;          drawVertices(mGlDLFinal[iSlice][iCol][2], <a class="code" href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a>);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        }</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        <span class="keywordflow">if</span> (mCfg.propagateTracks == 3) {</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;          drawVertices(mGlDLFinal[iSlice][iCol][3], <a class="code" href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a>);</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        }</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      }</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="keywordflow">if</span> (mMarkClusters || mMarkAdjacentClusters || mMarkFakeClusters) {</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <span class="keywordflow">if</span> (mMarkFakeClusters) {</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a7f1f9a0fe9bed11438638a721bd6660d">glPointSize</a>(mCfg.pointSize * (mDrawQualityDownsampleFSAA &gt; 1 ? mDrawQualityDownsampleFSAA : 1) * 3));</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      SetColorMarked();</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      LOOP_SLICE LOOP_COLLISION drawVertices(mGlDLPoints[iSlice][tMARKED][iCol], <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>);</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    }</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  CHKERR(glDisableClientState(<a class="code" href="../../dc/da3/glcorearb_8h.html#a76bcbd4f383a8cf41a3a1afa35106a66">GL_VERTEX_ARRAY</a>));</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a0903ee19d8321a1e456bebb54a65ee2a">glDisableVertexAttribArray</a>(0));</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#ad8e40c882d63c4671dea2ca2dfcf3046">glUseProgram</a>(0));</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">if</span> (mixSlaveImage &gt; 0) {</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    glMatrixMode(GL_MODELVIEW);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    glLoadIdentity();</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    glMatrixMode(GL_PROJECTION);</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <a class="code" href="../../d1/d78/unionhmm__mat4.html">hmm_mat4</a> proj = <a class="code" href="../../da/d8b/HandMadeMath_8h.html#a025e81ff6b1dac39d3d1e7b1a85185f1">HMM_Orthographic</a>(0.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, mRenderwidth, 0.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, mRenderheight, -1.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 1.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>);</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    glLoadMatrixf(&amp;proj.<a class="code" href="../../d1/d78/unionhmm__mat4.html#ae0ab930714c465c75748a16ecb48fc49">Elements</a>[0][0]);</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>));</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4ccf1dc093190cc3798b9abea3655f98">GL_DEPTH_TEST</a>);</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a987aecafceffb9afaef11412d42e605b">glBindTexture</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>, mMixBuffer.fbCol_id));</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    glColor4f(1, 1, 1, mixSlaveImage);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    glBegin(<a class="code" href="../../dc/da3/glcorearb_8h.html#a36b428225d54dd9cf2e564e5ada3ad3d">GL_QUADS</a>);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    glTexCoord2f(0, 0);</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    glVertex3f(0, 0, 0);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    glTexCoord2f(0, 1);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    glVertex3f(0, mRenderheight, 0);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    glTexCoord2f(1, 1);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    glVertex3f(mRenderwidth, mRenderheight, 0);</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    glTexCoord2f(1, 0);</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    glVertex3f(mRenderwidth, 0, 0);</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    glEnd();</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    glColor4f(1, 1, 1, 0);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>));</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    setDepthBuffer();</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  }</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="keywordflow">if</span> (mixAnimation) {</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a7a28e4c732415129acb357af17c469f6">glColorMask</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#afc250a2b6bf11f24bb73534a2f053c0d">glClear</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a>);</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a7a28e4c732415129acb357af17c469f6">glColorMask</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mOffscreenBuffer.created) {</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    setFrameBuffer();</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> srcid = mOffscreenBuffer.fb_id;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <span class="keywordflow">if</span> (mDrawQualityMSAA &gt; 1 &amp;&amp; mDrawQualityDownsampleFSAA &gt; 1) {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#aa5ce5420faae33cea9416df7d9d460dc">glBlitNamedFramebuffer</a>(srcid, mOffscreenBufferNoMSAA.fb_id, 0, 0, mRenderwidth, mRenderheight, 0, 0, mRenderwidth, mRenderheight, <a class="code" href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>));</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      srcid = mOffscreenBufferNoMSAA.fb_id;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    }</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#aa5ce5420faae33cea9416df7d9d460dc">glBlitNamedFramebuffer</a>(srcid, mMainBufferStack.back(), 0, 0, mRenderwidth, mRenderheight, 0, 0, mScreenwidth, mScreenheight, <a class="code" href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>));</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  }</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <span class="keywordflow">if</span> (mAnimate &amp;&amp; mAnimateScreenshot &amp;&amp; mAnimateTime &lt; 0) {</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keywordtype">char</span> mAnimateScreenshotFile[48];</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    sprintf(mAnimateScreenshotFile, <span class="stringliteral">&quot;mAnimation%d_%05d.bmp&quot;</span>, mAnimationExport, mAnimationFrame);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    DoScreenshot(mAnimateScreenshotFile, time);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  }</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="keywordflow">if</span> (mAnimateTime &lt; 0) {</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    mFramesDone++;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    mFramesDoneFPS++;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="keywordtype">double</span> fpstime = mTimerFPS.GetCurrentElapsedTime();</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="keywordtype">char</span> info[1024];</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keywordtype">float</span> fps = (double)mFramesDoneFPS / fpstime;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    sprintf(info,</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;            <span class="stringliteral">&quot;FPS: %6.2f (Slice: %d, 1:Clusters %d, 2:Prelinks %d, 3:Links %d, 4:Seeds %d, 5:Tracklets %d, 6:Tracks %d, 7:GTracks %d, 8:Merger %d) (%d frames, %d draw calls) &quot;</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;            <span class="stringliteral">&quot;(X %1.2f Y %1.2f Z %1.2f / R %1.2f Phi %1.1f Theta %1.1f) / Yaw %1.1f Pitch %1.1f Roll %1.1f)&quot;</span>,</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;            fps, mCfg.drawSlice, mCfg.drawClusters, mCfg.drawInitLinks, mCfg.drawLinks, mCfg.drawSeeds, mCfg.drawTracklets, mCfg.drawTracks, mCfg.drawGlobalTracks, mCfg.drawFinal, mFramesDone, mNDrawCalls, mXYZ[0], mXYZ[1], mXYZ[2], mRPhiTheta[0], mRPhiTheta[1] * 180 / M_PI,</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;            mRPhiTheta[2] * 180 / M_PI, mAngle[1] * 180 / M_PI, mAngle[0] * 180 / M_PI, mAngle[2] * 180 / M_PI);</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <span class="keywordflow">if</span> (fpstime &gt; 1.) {</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <span class="keywordflow">if</span> (mPrintInfoText &amp; 2) {</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        <a class="code" href="../../df/ddc/GPULogging_8h.html#a620d7111f66f9cb7aeaf21b8ff3e2343">GPUInfo</a>(<span class="stringliteral">&quot;%s&quot;</span>, info);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      }</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <span class="keywordflow">if</span> (mFPSScaleadjust++) {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        mFPSScale = 60 / fps;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      }</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      mTimerFPS.ResetStart();</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      mFramesDoneFPS = 0;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    }</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">if</span> (mPrintInfoText &amp; 1) {</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      setFrameBuffer(0, 0);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      showInfo(info);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      setFrameBuffer(-2);</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    }</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  }</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="keywordflow">if</span> (mAnimateTime &lt; 0) {</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    mSemLockDisplay.Unlock();</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  }</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <span class="keywordflow">return</span> (0);</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;}</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="keywordtype">void</span> GPUDisplay::DoScreenshot(<span class="keywordtype">char</span>* filename, <span class="keywordtype">float</span> mAnimateTime)</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;{</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="keywordtype">int</span> SCALE_Y = screenshot_scale, SCALE_X = screenshot_scale;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <span class="keywordtype">float</span> tmpPointSize = mCfg.pointSize;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <span class="keywordtype">float</span> tmpLineWidth = mCfg.lineWidth;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  mCfg.pointSize *= (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)(SCALE_X + SCALE_Y) / 2.;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  mCfg.lineWidth *= (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a>)(SCALE_X + SCALE_Y) / 2.;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="keywordtype">int</span> oldWidth = mScreenwidth, oldHeight = mScreenheight;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  GLfb screenshotBuffer;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="keywordtype">bool</span> needBuffer = SCALE_X != 1 || SCALE_Y != 1;</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="keywordflow">if</span> (needBuffer) {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    deleteFB(mMixBuffer);</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    mScreenwidth *= SCALE_X;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    mScreenheight *= SCALE_Y;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    mRenderwidth = mScreenwidth;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    mRenderheight = mScreenheight;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    createFB(screenshotBuffer, 0, 1, <span class="keyword">false</span>); <span class="comment">// Create screenshotBuffer of size mScreenwidth * SCALE, mRenderwidth * SCALE</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    UpdateOffscreenBuffers();                <span class="comment">// Create other buffers of size mScreenwidth * SCALE * downscale, ...</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    setFrameBuffer(1, screenshotBuffer.fb_id);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#ab54b002beb984f066acd0dd7fff469dc">glViewport</a>(0, 0, mRenderwidth, mRenderheight);</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a34a1ad865678292015caaa62746e8c11">DrawGLScene</a>(<span class="keyword">false</span>, mAnimateTime);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  }</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a> = 4 * mScreenwidth * mScreenheight;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a9e907d395940d7ddc7945f0194f01764">pixels</a> = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[<a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>];</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a2fafe3fe4732d1a3b3f4202ae5332ef8">glPixelStorei</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4a8f0a4e3ca93f56e40f144e199263fc">GL_PACK_ALIGNMENT</a>, 1));</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a5810aaf501d0a2a090f46a7f2121e4e7">glReadBuffer</a>(needBuffer ? <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a> : <a class="code" href="../../dc/da3/glcorearb_8h.html#a688ad6fbf908a39f7197da6d4e4dd083">GL_BACK</a>));</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  CHKERR(<a class="code" href="../../db/d2b/gl3w_8h.html#a62d860a543f5aa5813f5789526b6ad23">glReadPixels</a>(0, 0, mScreenwidth, mScreenheight, <a class="code" href="../../dc/da3/glcorearb_8h.html#a56707576fd3e2da55343c25da155294d">GL_BGRA</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a80a33c79f69417372d65d2a65ca36d49">GL_UNSIGNED_BYTE</a>, pixels));</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="keywordflow">if</span> (filename) {</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    FILE* fp = fopen(filename, <span class="stringliteral">&quot;w+b&quot;</span>);</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <a class="code" href="../../d2/d4a/structBITMAPFILEHEADER.html">BITMAPFILEHEADER</a> bmpFH;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html">BITMAPINFOHEADER</a> bmpIH;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    memset(&amp;bmpFH, 0, <span class="keyword">sizeof</span>(bmpFH));</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    memset(&amp;bmpIH, 0, <span class="keyword">sizeof</span>(bmpIH));</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    bmpFH.<a class="code" href="../../d2/d4a/structBITMAPFILEHEADER.html#ae154d62520d445277bf051d4f72471d0">bfType</a> = 19778; <span class="comment">//&quot;BM&quot;</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    bmpFH.<a class="code" href="../../d2/d4a/structBITMAPFILEHEADER.html#a69b6a854516531eb2364a3ea6f00dcb3">bfSize</a> = <span class="keyword">sizeof</span>(bmpFH) + <span class="keyword">sizeof</span>(bmpIH) + <a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    bmpFH.<a class="code" href="../../d2/d4a/structBITMAPFILEHEADER.html#ab001948271e6a0c2d425c513eb6fe602">bfOffBits</a> = <span class="keyword">sizeof</span>(bmpFH) + <span class="keyword">sizeof</span>(bmpIH);</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    bmpIH.<a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html#adbd33b471766df5fc030302f2e5e7b45">biSize</a> = <span class="keyword">sizeof</span>(bmpIH);</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    bmpIH.<a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html#ab8c2d4147705b6bfd7bc6e6fdc9727a0">biWidth</a> = mScreenwidth;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    bmpIH.<a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html#a35cd75ce241529d9a9e52dbf8da331f4">biHeight</a> = mScreenheight;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    bmpIH.<a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html#ad1527a1866f72fc04911bbf5a7677f51">biPlanes</a> = 1;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    bmpIH.<a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html#acdcd9dff1b32da6b7d3a8086ecf790d4">biBitCount</a> = 32;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    bmpIH.<a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html#a041d36972cd4ae26490469e022ad07ff">biCompression</a> = <a class="code" href="../../d5/d5f/bitmapfile_8h.html#a8e4f85d6285251a543e8a9b5d197f4bcadbe9bb7739b5aa86894640cf7bc72e8c">BI_RGB</a>;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    bmpIH.<a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html#a27e11e23466d95bcd6439425bf1f7db5">biSizeImage</a> = <a class="code" href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">size</a>;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    bmpIH.<a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html#af5a1ecd595d412acb8512d8f1b552032">biXPelsPerMeter</a> = 5670;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    bmpIH.<a class="code" href="../../d3/df4/structBITMAPINFOHEADER.html#a48fcfe26ec09934a8be3984e50b0e7ff">biYPelsPerMeter</a> = 5670;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    fwrite(&amp;bmpFH, 1, <span class="keyword">sizeof</span>(bmpFH), fp);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    fwrite(&amp;bmpIH, 1, <span class="keyword">sizeof</span>(bmpIH), fp);</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    fwrite(pixels, 1, size, fp);</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    fclose(fp);</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  }</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="keyword">delete</span>[] <a class="code" href="../../dc/da3/glcorearb_8h.html#a9e907d395940d7ddc7945f0194f01764">pixels</a>;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  mCfg.pointSize = tmpPointSize;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  mCfg.lineWidth = tmpLineWidth;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="keywordflow">if</span> (needBuffer) {</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    setFrameBuffer();</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    deleteFB(screenshotBuffer);</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    mScreenwidth = oldWidth;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    mScreenheight = oldHeight;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    UpdateOffscreenBuffers();</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#ab54b002beb984f066acd0dd7fff469dc">glViewport</a>(0, 0, mRenderwidth, mRenderheight);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a34a1ad865678292015caaa62746e8c11">DrawGLScene</a>(<span class="keyword">false</span>, mAnimateTime);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  }</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;}</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="keywordtype">void</span> GPUDisplay::showInfo(<span class="keyword">const</span> <span class="keywordtype">char</span>* info)</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;{</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  glMatrixMode(GL_MODELVIEW);</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  glLoadIdentity();</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  glMatrixMode(GL_PROJECTION);</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  <a class="code" href="../../d1/d78/unionhmm__mat4.html">hmm_mat4</a> proj = <a class="code" href="../../da/d8b/HandMadeMath_8h.html#a025e81ff6b1dac39d3d1e7b1a85185f1">HMM_Orthographic</a>(0.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, mScreenwidth, 0.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, mScreenheight, -1, 1);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  glLoadMatrixf(&amp;proj.<a class="code" href="../../d1/d78/unionhmm__mat4.html#ae0ab930714c465c75748a16ecb48fc49">Elements</a>[0][0]);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ab54b002beb984f066acd0dd7fff469dc">glViewport</a>(0, 0, mScreenwidth, mScreenheight);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="keywordtype">float</span> colorValue = mInvertColors ? 0.f : 1.f;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  mBackend-&gt;OpenGLPrint(info, 40.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 40.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, colorValue, colorValue, colorValue, 1);</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="keywordflow">if</span> (mInfoText2Timer.IsRunning()) {</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <span class="keywordflow">if</span> (mInfoText2Timer.GetCurrentElapsedTime() &gt;= 6) {</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      mInfoText2Timer.Reset();</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      mBackend-&gt;OpenGLPrint(mInfoText2, 40.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, 20.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, colorValue, colorValue, colorValue, 6 - mInfoText2Timer.GetCurrentElapsedTime());</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  }</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordflow">if</span> (mInfoHelpTimer.IsRunning()) {</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <span class="keywordflow">if</span> (mInfoHelpTimer.GetCurrentElapsedTime() &gt;= 6) {</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      mInfoHelpTimer.Reset();</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      PrintGLHelpText(colorValue);</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    }</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  }</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="preprocessor">#ifndef GPUCA_DISPLAY_OPENGL_CORE</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ab54b002beb984f066acd0dd7fff469dc">glViewport</a>(0, 0, mRenderwidth, mRenderheight);</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;}</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a9e978cd185fa99fb13861981d08ba30a">GPUDisplay::ShowNextEvent</a>()</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;{</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  mSemLockDisplay.Unlock();</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  mBackend-&gt;mNeedUpdate = 1;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  mUpdateDLList = <span class="keyword">true</span>;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;}</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a8a7d635857211c467c007f5a5e8c2d4f">GPUDisplay::WaitForNextEvent</a>() { mSemLockDisplay.Lock(); }</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#aa75825ddc8d18dad8b1a242be71e81e0">GPUDisplay::StartDisplay</a>()</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;{</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <span class="keywordflow">if</span> (mBackend-&gt;StartDisplay()) {</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">return</span> (1);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  }</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="keywordflow">while</span> (mInitResult == 0) {</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    Sleep(10);</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  }</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="keywordflow">return</span> (mInitResult != 1);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;}</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_a9d5b3232d365f4dd0f40e5f50c4f7ffd"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a9d5b3232d365f4dd0f40e5f50c4f7ffd">GPUCA_NAMESPACE::gpu::GPUDisplay::GPUDisplay</a></div><div class="ttdeci">GPUDisplay(GPUDisplayBackend *backend, GPUChainTracking *rec, GPUQA *qa)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00056">GPUDisplay.h:56</a></div></div>
<div class="ttc" id="gl3w_8h_html_a10106e4be90a66213839645cf12770f9"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a10106e4be90a66213839645cf12770f9">glGetUniformLocation</a></div><div class="ttdeci">#define glGetUniformLocation</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01015">gl3w.h:1015</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a63df202498bbd53ffe4e22227effe5a0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a></div><div class="ttdeci">GLint first</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00399">glcorearb.h:399</a></div></div>
<div class="ttc" id="gl3w_8h_html_a0a0618cdb73952a1337b01f82119229c"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a0a0618cdb73952a1337b01f82119229c">glNamedBufferData</a></div><div class="ttdeci">#define glNamedBufferData</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01077">gl3w.h:1077</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab39dd6b552305d6b928b29a2ff880ab1"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab39dd6b552305d6b928b29a2ff880ab1">GL_DRAW_FRAMEBUFFER_BINDING</a></div><div class="ttdeci">#define GL_DRAW_FRAMEBUFFER_BINDING</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01129">glcorearb.h:1129</a></div></div>
<div class="ttc" id="gl3w_8h_html_acf7a528ef1ef237d2a7676dcb0f22473"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#acf7a528ef1ef237d2a7676dcb0f22473">glCompileShader</a></div><div class="ttdeci">#define glCompileShader</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00794">gl3w.h:794</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa290e8f9ee6f6862778355aa22bb0b13"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa290e8f9ee6f6862778355aa22bb0b13">GL_BLEND</a></div><div class="ttdeci">#define GL_BLEND</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00170">glcorearb.h:170</a></div></div>
<div class="ttc" id="unionhmm__mat4_html_ae0ab930714c465c75748a16ecb48fc49"><div class="ttname"><a href="../../d1/d78/unionhmm__mat4.html#ae0ab930714c465c75748a16ecb48fc49">hmm_mat4::Elements</a></div><div class="ttdeci">float Elements[4][4]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8b/HandMadeMath_8h_source.html#l00443">HandMadeMath.h:443</a></div></div>
<div class="ttc" id="classB_html"><div class="ttname"><a href="../../d3/d1a/classB.html">B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7d/Ex1_2src_2B_8h_source.html#l00014">B.h:14</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac7c896d55e93a6cf7ff8524005b4e7b4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a></div><div class="ttdeci">GLenum GLfloat param</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00271">glcorearb.h:271</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html_ad1527a1866f72fc04911bbf5a7677f51"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html#ad1527a1866f72fc04911bbf5a7677f51">BITMAPINFOHEADER::biPlanes</a></div><div class="ttdeci">unsigned short biPlanes</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00025">bitmapfile.h:25</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_ad664c1ff709d31a98e8738b75af196bd"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#ad664c1ff709d31a98e8738b75af196bd">o2::framework::select</a></div><div class="ttdeci">std::vector&lt; InputSpec &gt; select(char const *matcher=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d43/WorkflowSpec_8cxx_source.html#l00153">WorkflowSpec.cxx:153</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad4de17abefa73fa2ef53379f73b734be"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a></div><div class="ttdeci">#define GL_TEXTURE_2D</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00198">glcorearb.h:198</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker_html"><div class="ttname"><a href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html">GPUCA_NAMESPACE::gpu::GPUTPCTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d25/GPUTPCTracker_8h_source.html#l00045">GPUTPCTracker.h:45</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7ec02582a9b1c390908a2230c8e26c0b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a></div><div class="ttdeci">#define GL_NEAREST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00253">glcorearb.h:253</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9f2854f4a91a0d83d2d54cb8110bfca4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9f2854f4a91a0d83d2d54cb8110bfca4">GL_RGBA</a></div><div class="ttdeci">#define GL_RGBA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00241">glcorearb.h:241</a></div></div>
<div class="ttc" id="glcorearb_8h_html_acebcc1c5663f14ebde1d16831e5fed94"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a></div><div class="ttdeci">int GLint</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00084">glcorearb.h:84</a></div></div>
<div class="ttc" id="gl3w_8h_html_a541a3beb46078c868d8c1c308ea3bac8"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a541a3beb46078c868d8c1c308ea3bac8">glMultiDrawArrays</a></div><div class="ttdeci">#define glMultiDrawArrays</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01070">gl3w.h:1070</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a68c4714e43d8e827d80759f9cb864f3c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a></div><div class="ttdeci">unsigned int GLuint</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00088">glcorearb.h:88</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_a5245b930adb2edf6785968ae3d91b0ad"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a5245b930adb2edf6785968ae3d91b0ad">GPUCA_NAMESPACE::gpu::GPUDisplay::ReSizeGLScene</a></div><div class="ttdeci">void ReSizeGLScene(int width, int height, bool init=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00072">GPUDisplay.h:72</a></div></div>
<div class="ttc" id="vecpod_8h_html_a9b2666adbe662721e5de763dc5c70a83"><div class="ttname"><a href="../../d5/d2f/vecpod_8h.html#a9b2666adbe662721e5de763dc5c70a83">vecpod</a></div><div class="ttdeci">typename std::vector&lt; T, vecpod_allocator&lt; T &gt; &gt; vecpod</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2f/vecpod_8h_source.html#l00027">vecpod.h:27</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aee38b51639b577753f6a92029fb92000"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a></div><div class="ttdeci">GLdouble GLdouble GLdouble z</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00843">glcorearb.h:843</a></div></div>
<div class="ttc" id="gl3w_8h_html_a4d3447ff3caf454bc686968fbe5f04bf"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a4d3447ff3caf454bc686968fbe5f04bf">glCreateShader</a></div><div class="ttdeci">#define glCreateShader</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00822">gl3w.h:822</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_acabef52906f11a350c9ef63315532265"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#acabef52906f11a350c9ef63315532265">qa</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events Simulate correct bunch interactions instead of placing only the average number of events A value [n] sets TFlen for [n] collisions in Number of bunches per train Number of bunch trains Instantaneous interaction rate Do not simulate border Total number of collisions to be placed in the interior of all time Do not select random but walk over array of events in stride steps h QA settings const char Legend entries for data from comparison histogram files const char Store histograms in output root Do not run but just create PDFs from input root files Set cut for Q Compute the efficiency including impure tracks with fake contamination Maxmimum Create resolution histograms in the native fit Filter for Filter for Particle Store mc labels to file for later matching Minimum Pt of a matched track to be displayed Compare QA qa</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00059">qconfigoptions.h:59</a></div></div>
<div class="ttc" id="HandMadeMath_8h_html_ab4c14017b0b60aec07eb7f66a9eee7ec"><div class="ttname"><a href="../../da/d8b/HandMadeMath_8h.html#ab4c14017b0b60aec07eb7f66a9eee7ec">HMM_LookAt</a></div><div class="ttdeci">HMM_EXTERN hmm_mat4 HMM_LookAt(hmm_vec3 Eye, hmm_vec3 Center, hmm_vec3 Up)</div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend_html"><div class="ttname"><a href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html">GPUCA_NAMESPACE::gpu::GPUDisplayBackend</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dba/GPUDisplayBackend_8h_source.html#l00026">GPUDisplayBackend.h:26</a></div></div>
<div class="ttc" id="gl3w_8h_html_a71a2d01a12606fc26c1a28dba23dfce2"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a71a2d01a12606fc26c1a28dba23dfce2">glGenVertexArrays</a></div><div class="ttdeci">#define glGenVertexArrays</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00905">gl3w.h:905</a></div></div>
<div class="ttc" id="gl3w_8h_html_a70ad6a21033347a0478dad517dd2bb83"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a></div><div class="ttdeci">#define glGetIntegerv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00944">gl3w.h:944</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTRDTracker__t_html"><div class="ttname"><a href="../../db/db5/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTRDTracker__t.html">GPUCA_NAMESPACE::gpu::GPUTRDTracker_t&lt; GPUTRDTrackGPU, GPUTRDPropagatorGPU &gt;</a></div></div>
<div class="ttc" id="namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes_html_ab2aee58e8149fc590f564fbc6fc08d8fa911f93959df9d09b345c3747584f49e7"><div class="ttname"><a href="../../d9/dd3/namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes.html#ab2aee58e8149fc590f564fbc6fc08d8fa911f93959df9d09b345c3747584f49e7">GPUCA_NAMESPACE::gpu::GPUTPCGMMergerTypes::attachGoodLeg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4c/GPUTPCGMMergerTypes_8h_source.html#l00028">GPUTPCGMMergerTypes.h:28</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html_adbd33b471766df5fc030302f2e5e7b45"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html#adbd33b471766df5fc030302f2e5e7b45">BITMAPINFOHEADER::biSize</a></div><div class="ttdeci">unsigned int biSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00022">bitmapfile.h:22</a></div></div>
<div class="ttc" id="namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes_html_ab2aee58e8149fc590f564fbc6fc08d8fa168f79b43ce3c654af5068ba433f4a9a"><div class="ttname"><a href="../../d9/dd3/namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes.html#ab2aee58e8149fc590f564fbc6fc08d8fa168f79b43ce3c654af5068ba433f4a9a">GPUCA_NAMESPACE::gpu::GPUTPCGMMergerTypes::attachGood</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4c/GPUTPCGMMergerTypes_8h_source.html#l00027">GPUTPCGMMergerTypes.h:27</a></div></div>
<div class="ttc" id="gl3w_8h_html_a62d860a543f5aa5813f5789526b6ad23"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a62d860a543f5aa5813f5789526b6ad23">glReadPixels</a></div><div class="ttdeci">#define glReadPixels</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01162">gl3w.h:1162</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4568fc090febc136eed4577a600739ca"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a></div><div class="ttdeci">const GLdouble * v</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00832">glcorearb.h:832</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_a2cdbb9508b46bd8f3a6039b702ebd16d"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#a2cdbb9508b46bd8f3a6039b702ebd16d">t</a></div><div class="ttdeci">Visualize clusters only t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00020">qconfigoptions.h:20</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac55adc720a3098c1b454d2a4647f4361"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a></div><div class="ttdeci">GLuint start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00469">glcorearb.h:469</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo_html_a971791cd8993a4635f3b8a6e4f0e483d"><div class="ttname"><a href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a971791cd8993a4635f3b8a6e4f0e483d">GPUCA_NAMESPACE::gpu::GPUTPCMCInfo::pY</a></div><div class="ttdeci">float pY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/GPUTPCMCInfo_8h_source.html#l00030">GPUTPCMCInfo.h:30</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend_html_ad78d6d63bbce7624ccad74c242ecc68b"><div class="ttname"><a href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#ad78d6d63bbce7624ccad74c242ecc68b">GPUCA_NAMESPACE::gpu::GPUDisplayBackend::GL_MIN_VERSION_MINOR</a></div><div class="ttdeci">static constexpr int GL_MIN_VERSION_MINOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dba/GPUDisplayBackend_8h_source.html#l00036">GPUDisplayBackend.h:36</a></div></div>
<div class="ttc" id="structBITMAPFILEHEADER_html_ab001948271e6a0c2d425c513eb6fe602"><div class="ttname"><a href="../../d2/d4a/structBITMAPFILEHEADER.html#ab001948271e6a0c2d425c513eb6fe602">BITMAPFILEHEADER::bfOffBits</a></div><div class="ttdeci">unsigned int bfOffBits</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00018">bitmapfile.h:18</a></div></div>
<div class="ttc" id="gl3w_8h_html_afa884c4d2bb798b2161823f81ad56bce"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#afa884c4d2bb798b2161823f81ad56bce">glGenFramebuffers</a></div><div class="ttdeci">#define glGenFramebuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00898">gl3w.h:898</a></div></div>
<div class="ttc" id="GPUTPCMCInfo_8h_html"><div class="ttname"><a href="../../d7/de2/GPUTPCMCInfo_8h.html">GPUTPCMCInfo.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1mid_html_ace6b84ba8e24525ead602cbda42f1bfb"><div class="ttname"><a href="../../df/d18/namespaceo2_1_1mid.html#ace6b84ba8e24525ead602cbda42f1bfb">o2::mid::if</a></div><div class="ttdeci">if(clusterizer.getClusters().size()&lt; minNcl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dee/testClusterizer_8cxx_source.html#l00190">testClusterizer.cxx:190</a></div></div>
<div class="ttc" id="GPULogging_8h_html_a2700ed3728abe6f865af253f6ec5830f"><div class="ttname"><a href="../../df/ddc/GPULogging_8h.html#a2700ed3728abe6f865af253f6ec5830f">GPUError</a></div><div class="ttdeci">#define GPUError(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddc/GPULogging_8h_source.html#l00024">GPULogging.h:24</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html_a27e11e23466d95bcd6439425bf1f7db5"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html#a27e11e23466d95bcd6439425bf1f7db5">BITMAPINFOHEADER::biSizeImage</a></div><div class="ttdeci">unsigned int biSizeImage</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00028">bitmapfile.h:28</a></div></div>
<div class="ttc" id="structBITMAPFILEHEADER_html_a69b6a854516531eb2364a3ea6f00dcb3"><div class="ttname"><a href="../../d2/d4a/structBITMAPFILEHEADER.html#a69b6a854516531eb2364a3ea6f00dcb3">BITMAPFILEHEADER::bfSize</a></div><div class="ttdeci">unsigned int bfSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00016">bitmapfile.h:16</a></div></div>
<div class="ttc" id="glcorearb_8h_html_abca6d43f43fae31f49dcb883b2f301f6"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#abca6d43f43fae31f49dcb883b2f301f6">GL_FALSE</a></div><div class="ttdeci">#define GL_FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00094">glcorearb.h:94</a></div></div>
<div class="ttc" id="gl3w_8h_html_a7a28e4c732415129acb357af17c469f6"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a7a28e4c732415129acb357af17c469f6">glColorMask</a></div><div class="ttdeci">#define glColorMask</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00792">gl3w.h:792</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html_a48fcfe26ec09934a8be3984e50b0e7ff"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html#a48fcfe26ec09934a8be3984e50b0e7ff">BITMAPINFOHEADER::biYPelsPerMeter</a></div><div class="ttdeci">unsigned int biYPelsPerMeter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00030">bitmapfile.h:30</a></div></div>
<div class="ttc" id="GPUDefConstantsAndSettings_8h_html_afd2e13a07f9d227b8949af90d39812cf"><div class="ttname"><a href="../../d2/d37/GPUDefConstantsAndSettings_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a></div><div class="ttdeci">#define GPUCA_ROW_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d37/GPUDefConstantsAndSettings_8h_source.html#l00074">GPUDefConstantsAndSettings.h:74</a></div></div>
<div class="ttc" id="GPULogging_8h_html_a620d7111f66f9cb7aeaf21b8ff3e2343"><div class="ttname"><a href="../../df/ddc/GPULogging_8h.html#a620d7111f66f9cb7aeaf21b8ff3e2343">GPUInfo</a></div><div class="ttdeci">#define GPUInfo(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddc/GPULogging_8h_source.html#l00021">GPULogging.h:21</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracklet_html"><div class="ttname"><a href="../../dc/d4b/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracklet.html">GPUCA_NAMESPACE::gpu::GPUTPCTracklet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6e/GPUTPCTracklet_8h_source.html#l00031">GPUTPCTracklet.h:31</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCHitId_html"><div class="ttname"><a href="../../d9/db1/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCHitId.html">GPUCA_NAMESPACE::gpu::GPUTPCHitId</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7b/GPUTPCHitId_8h_source.html#l00021">GPUTPCHitId.h:21</a></div></div>
<div class="ttc" id="gl3w_8h_html_a5489df792b3263170eea381093ee6111"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a5489df792b3263170eea381093ee6111">glDepthFunc</a></div><div class="ttdeci">#define glDepthFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00843">gl3w.h:843</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo_html_a4caeef6463c337010707781760e017ff"><div class="ttname"><a href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a4caeef6463c337010707781760e017ff">GPUCA_NAMESPACE::gpu::GPUTPCMCInfo::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/GPUTPCMCInfo_8h_source.html#l00027">GPUTPCMCInfo.h:27</a></div></div>
<div class="ttc" id="glcorearb_8h_html_acb47a41b5963d44826f44b7370bccc26"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#acb47a41b5963d44826f44b7370bccc26">GL_TEXTURE_MAG_FILTER</a></div><div class="ttdeci">#define GL_TEXTURE_MAG_FILTER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00259">glcorearb.h:259</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa3926eb5e008f14829baa8d72435215f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a></div><div class="ttdeci">#define GL_ONE_MINUS_SRC_ALPHA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00117">glcorearb.h:117</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker_html_a6c7e313219bfc8a53e2585e89805e3af"><div class="ttname"><a href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html#a6c7e313219bfc8a53e2585e89805e3af">GPUCA_NAMESPACE::gpu::GPUTPCTracker::LinkTmpMemory</a></div><div class="ttdeci">void * LinkTmpMemory()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d25/GPUTPCTracker_8h_source.html#l00261">GPUTPCTracker.h:261</a></div></div>
<div class="ttc" id="structfloat4_html_ae3ef7af10eec7945566a363866321e26"><div class="ttname"><a href="../../dd/d9d/structfloat4.html#ae3ef7af10eec7945566a363866321e26">float4::w</a></div><div class="ttdeci">float w</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/GPUCommonDefAPI_8h_source.html#l00052">GPUCommonDefAPI.h:52</a></div></div>
<div class="ttc" id="namespaceo2_1_1its_1_1math__utils_html_a1e60213b0a0658ac2a9ee86f18ef0f95"><div class="ttname"><a href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a1e60213b0a0658ac2a9ee86f18ef0f95">o2::its::math_utils::z2</a></div><div class="ttdeci">float float float float float z2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3e/MathUtils_8h_source.html#l00043">MathUtils.h:43</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa915643d0b21023b01d4dc82f69e5646"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa915643d0b21023b01d4dc82f69e5646">glFramebufferRenderbuffer</a></div><div class="ttdeci">#define glFramebufferRenderbuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00890">gl3w.h:890</a></div></div>
<div class="ttc" id="gl3w_8h_html_a94c0e17529ebff9ddffdf7715b2341cc"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a94c0e17529ebff9ddffdf7715b2341cc">glDeleteProgram</a></div><div class="ttdeci">#define glDeleteProgram</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00833">gl3w.h:833</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a6d19915d4237cb559505bd3e5dcfcf3c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6d19915d4237cb559505bd3e5dcfcf3c">GL_FLOAT</a></div><div class="ttdeci">#define GL_FLOAT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00211">glcorearb.h:211</a></div></div>
<div class="ttc" id="qconfig_8h_html"><div class="ttname"><a href="../../da/d08/qconfig_8h.html">qconfig.h</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergedTrack_html"><div class="ttname"><a href="../../d3/dd9/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergedTrack.html">GPUCA_NAMESPACE::gpu::GPUTPCGMMergedTrack</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dfd/GPUTPCGMMergedTrack_8h_source.html#l00030">GPUTPCGMMergedTrack.h:30</a></div></div>
<div class="ttc" id="gl3w_8h_html_a55652a3f087bb13267a5481b6ff1fe19"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a55652a3f087bb13267a5481b6ff1fe19">glDeleteBuffers</a></div><div class="ttdeci">#define glDeleteBuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00831">gl3w.h:831</a></div></div>
<div class="ttc" id="gl3w_8h_html_a26f35fe7275274970d56847046119dbb"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a26f35fe7275274970d56847046119dbb">glCreateBuffers</a></div><div class="ttdeci">#define glCreateBuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00815">gl3w.h:815</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9e626474ad3066f31b46293d535b009f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a></div><div class="ttdeci">#define GL_FRAMEBUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01181">glcorearb.h:1181</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo_html_abe9ebfa50dc17d57c5c6636214321850"><div class="ttname"><a href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#abe9ebfa50dc17d57c5c6636214321850">GPUCA_NAMESPACE::gpu::GPUTPCMCInfo::z</a></div><div class="ttdeci">float z</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/GPUTPCMCInfo_8h_source.html#l00028">GPUTPCMCInfo.h:28</a></div></div>
<div class="ttc" id="structfloat4_html_ab60e7164162636ef8d0315cf18269b0f"><div class="ttname"><a href="../../dd/d9d/structfloat4.html#ab60e7164162636ef8d0315cf18269b0f">float4::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/GPUCommonDefAPI_8h_source.html#l00052">GPUCommonDefAPI.h:52</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a947db9ff944c4b78e652144c3dd1060c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a></div><div class="ttdeci">#define GL_COLOR_BUFFER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00093">glcorearb.h:93</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a51e6c75d54b3a9fb93fbc880463c212c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a></div><div class="ttdeci">#define GL_SRC_ALPHA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00116">glcorearb.h:116</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergedTrackHit_html_aa374640a95a09c3d60f3de74dfcf07e9ae4ce48cf5b93a37536ecb9541b6790d9"><div class="ttname"><a href="../../d9/d33/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergedTrackHit.html#aa374640a95a09c3d60f3de74dfcf07e9ae4ce48cf5b93a37536ecb9541b6790d9">GPUCA_NAMESPACE::gpu::GPUTPCGMMergedTrackHit::flagReject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dcc/GPUTPCGMMergedTrackHit_8h_source.html#l00040">GPUTPCGMMergedTrackHit.h:40</a></div></div>
<div class="ttc" id="unionhmm__mat4_html"><div class="ttname"><a href="../../d1/d78/unionhmm__mat4.html">hmm_mat4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8b/HandMadeMath_8h_source.html#l00442">HandMadeMath.h:442</a></div></div>
<div class="ttc" id="classA_html"><div class="ttname"><a href="../../d2/d88/classA.html">A</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/Ex1_2include_2Ex1_2A_8h_source.html#l00014">A.h:14</a></div></div>
<div class="ttc" id="GPUTPCTrack_8h_html"><div class="ttname"><a href="../../d0/d88/GPUTPCTrack_8h.html">GPUTPCTrack.h</a></div></div>
<div class="ttc" id="GPUTRDTrackletWord_8h_html"><div class="ttname"><a href="../../df/d3c/GPUTRDTrackletWord_8h.html">GPUTRDTrackletWord.h</a></div><div class="ttdoc">TRD Tracklet word for GPU tracker - 32bit tracklet info + half chamber ID + index. </div></div>
<div class="ttc" id="gl3w_8h_html_a9419a03f5c46e2758f884e9c56d92b6a"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a9419a03f5c46e2758f884e9c56d92b6a">glBufferData</a></div><div class="ttdeci">#define glBufferData</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00765">gl3w.h:765</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_ad08a37964429d340d966dfa679443e8f"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#ad08a37964429d340d966dfa679443e8f">int</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events int</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00025">qconfigoptions.h:25</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a3667f558219c90437106b544a3ca00b8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a></div><div class="ttdeci">GLuint buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00655">glcorearb.h:655</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7180045dcb52b22af2cd0366026bc3ed"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7180045dcb52b22af2cd0366026bc3ed">GL_ARRAY_BUFFER</a></div><div class="ttdeci">#define GL_ARRAY_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00625">glcorearb.h:625</a></div></div>
<div class="ttc" id="GPUTPCSliceData_8h_html"><div class="ttname"><a href="../../df/d4a/GPUTPCSliceData_8h.html">GPUTPCSliceData.h</a></div></div>
<div class="ttc" id="GPUTPCTracker_8h_html"><div class="ttname"><a href="../../d6/d25/GPUTPCTracker_8h.html">GPUTPCTracker.h</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4ecc64682046ef517e86a18d9acbed1e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a></div><div class="ttdeci">#define GL_LINE_STRIP</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00099">glcorearb.h:99</a></div></div>
<div class="ttc" id="GPUTPCGMMergedTrack_8h_html"><div class="ttname"><a href="../../d8/dfd/GPUTPCGMMergedTrack_8h.html">GPUTPCGMMergedTrack.h</a></div></div>
<div class="ttc" id="bitmapfile_8h_html"><div class="ttname"><a href="../../d5/d5f/bitmapfile_8h.html">bitmapfile.h</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4f60aaa1367dea8d8c7e288d912d58df"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a></div><div class="ttdeci">#define GL_COLOR_ATTACHMENT0</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01147">glcorearb.h:1147</a></div></div>
<div class="ttc" id="standalone_8cxx_html_a89fc507a8313a2c8530b05526aee23af"><div class="ttname"><a href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a></div><div class="ttdeci">GPUReconstruction * rec</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df9/standalone_8cxx_source.html#l00075">standalone.cxx:75</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1painter_html_a5ae55cb1968bdac9014e871bb502ff9f"><div class="ttname"><a href="../../dd/d9d/namespaceo2_1_1tpc_1_1painter.html#a5ae55cb1968bdac9014e871bb502ff9f">o2::tpc::painter::draw</a></div><div class="ttdeci">TCanvas * draw(const CalDet&lt; T &gt; &amp;calDet, int nbins1D=300, float xMin1D=0, float xMax1D=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5f/Painter_8cxx_source.html#l00031">Painter.cxx:31</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html_af5a1ecd595d412acb8512d8f1b552032"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html#af5a1ecd595d412acb8512d8f1b552032">BITMAPINFOHEADER::biXPelsPerMeter</a></div><div class="ttdeci">unsigned int biXPelsPerMeter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00029">bitmapfile.h:29</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a60075de22f90a1223dc0bea98d2ee4d5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a60075de22f90a1223dc0bea98d2ee4d5">height</a></div><div class="ttdeci">GLint GLsizei GLsizei height</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00270">glcorearb.h:270</a></div></div>
<div class="ttc" id="gl3w_8h_html_a89377449aceadc060b577926b5413bd2"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a89377449aceadc060b577926b5413bd2">glDrawArrays</a></div><div class="ttdeci">#define glDrawArrays</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00856">gl3w.h:856</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a3d1e3edfcf61ca2d831883e1afbad89e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a></div><div class="ttdeci">GLsizeiptr size</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00659">glcorearb.h:659</a></div></div>
<div class="ttc" id="gl3w_8h_html_a514c77ac5c52216d1318b2afc72df793"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a514c77ac5c52216d1318b2afc72df793">glRenderbufferStorageMultisample</a></div><div class="ttdeci">#define glRenderbufferStorageMultisample</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01166">gl3w.h:1166</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4a8f0a4e3ca93f56e40f144e199263fc"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4a8f0a4e3ca93f56e40f144e199263fc">GL_PACK_ALIGNMENT</a></div><div class="ttdeci">#define GL_PACK_ALIGNMENT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00193">glcorearb.h:193</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae52362b10d585638f5b96140e90f1b7a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id</a></div><div class="ttdeci">GLuint id</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00650">glcorearb.h:650</a></div></div>
<div class="ttc" id="GPUTRDGeometry_8h_html"><div class="ttname"><a href="../../d6/d05/GPUTRDGeometry_8h.html">GPUTRDGeometry.h</a></div></div>
<div class="ttc" id="GPUDefMacros_8h_html_a8f5eec32d1a68364e1f8686a03170527"><div class="ttname"><a href="../../d6/dff/GPUDefMacros_8h.html#a8f5eec32d1a68364e1f8686a03170527">GPUCA_OPENMP</a></div><div class="ttdeci">#define GPUCA_OPENMP(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dff/GPUDefMacros_8h_source.html#l00048">GPUDefMacros.h:48</a></div></div>
<div class="ttc" id="structBITMAPFILEHEADER_html_ae154d62520d445277bf051d4f72471d0"><div class="ttname"><a href="../../d2/d4a/structBITMAPFILEHEADER.html#ae154d62520d445277bf051d4f72471d0">BITMAPFILEHEADER::bfType</a></div><div class="ttdeci">unsigned short bfType</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00015">bitmapfile.h:15</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUChainTracking_html_a069e62e9b04213c4e5df158c27f2a636"><div class="ttname"><a href="../../d5/d5f/classGPUCA__NAMESPACE_1_1gpu_1_1GPUChainTracking.html#a069e62e9b04213c4e5df158c27f2a636">GPUCA_NAMESPACE::gpu::GPUChainTracking::mConfigDisplay</a></div><div class="ttdeci">const void * mConfigDisplay</div><div class="ttdef"><b>Definition:</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00158">GPUChainTracking.h:158</a></div></div>
<div class="ttc" id="gl3w_8h_html_a3b3a3f8200f094b781e9f61e2f19fc50"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a></div><div class="ttdeci">#define glBindBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00733">gl3w.h:733</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a3af6c78fcdfccea028a5878bc747ef39"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3af6c78fcdfccea028a5878bc747ef39">y1</a></div><div class="ttdeci">GLuint GLfloat GLfloat GLfloat GLfloat y1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l05034">glcorearb.h:5034</a></div></div>
<div class="ttc" id="structfloat4_html"><div class="ttname"><a href="../../dd/d9d/structfloat4.html">float4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/GPUCommonDefAPI_8h_source.html#l00052">GPUCommonDefAPI.h:52</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a1fe2b9d716f80da76adb19505d583dc1"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a></div><div class="ttdeci">GLdouble f</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00310">glcorearb.h:310</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a36b428225d54dd9cf2e564e5ada3ad3d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a36b428225d54dd9cf2e564e5ada3ad3d">GL_QUADS</a></div><div class="ttdeci">#define GL_QUADS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00103">glcorearb.h:103</a></div></div>
<div class="ttc" id="namespaceGPUCA__NAMESPACE_1_1gpu_html_a936e7e1d3f59c6e9a0301dc3b4a1c436"><div class="ttname"><a href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a936e7e1d3f59c6e9a0301dc3b4a1c436">GPUCA_NAMESPACE::gpu::size</a></div><div class="ttdeci">unsigned long size</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc0/GPUReconstructionCPU_8h_source.html#l00025">GPUReconstructionCPU.h:25</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTrackingInOutPointers_html"><div class="ttname"><a href="../../d2/d7f/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTrackingInOutPointers.html">GPUCA_NAMESPACE::gpu::GPUTrackingInOutPointers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00225">GPUDataTypes.h:225</a></div></div>
<div class="ttc" id="gl3w_8h_html_a82ac4415f852b8b5bfe7356202ca934e"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a82ac4415f852b8b5bfe7356202ca934e">glGenTextures</a></div><div class="ttdeci">#define glGenTextures</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00903">gl3w.h:903</a></div></div>
<div class="ttc" id="gl3w_8h_html_ab21d2eb7b3ec168bda12feeb60824f19"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ab21d2eb7b3ec168bda12feeb60824f19">glTexImage2DMultisample</a></div><div class="ttdeci">#define glTexImage2DMultisample</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01194">gl3w.h:1194</a></div></div>
<div class="ttc" id="gl3w_8h_html_afbdb5d9533b5a5ed6c66f4ee46025e66"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#afbdb5d9533b5a5ed6c66f4ee46025e66">glBlendFunc</a></div><div class="ttdeci">#define glBlendFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00759">gl3w.h:759</a></div></div>
<div class="ttc" id="gl3w_8h_html_a4c13098a615d32e7f04aa4105149564f"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a4c13098a615d32e7f04aa4105149564f">glBindVertexArray</a></div><div class="ttdeci">#define glBindVertexArray</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00751">gl3w.h:751</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html_ab8c2d4147705b6bfd7bc6e6fdc9727a0"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html#ab8c2d4147705b6bfd7bc6e6fdc9727a0">BITMAPINFOHEADER::biWidth</a></div><div class="ttdeci">unsigned int biWidth</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00023">bitmapfile.h:23</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_ad5c8a39728d9c3aaf832f4f49623cc24"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#ad5c8a39728d9c3aaf832f4f49623cc24">GPUCA_NAMESPACE::gpu::GPUDisplay::configDisplay</a></div><div class="ttdeci">structConfigGL configDisplay</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00060">GPUDisplay.h:60</a></div></div>
<div class="ttc" id="gl3w_8h_html_a7da97095b562f67f161b50104776a66d"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a7da97095b562f67f161b50104776a66d">glTexImage2D</a></div><div class="ttdeci">#define glTexImage2D</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01193">gl3w.h:1193</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8ac689a8905a064025cbe41d4cf8fcf5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a></div><div class="ttdeci">#define GL_RENDERBUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01182">glcorearb.h:1182</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend_html_a05d89716975c79685e3b90cb7cc5b06b"><div class="ttname"><a href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#a05d89716975c79685e3b90cb7cc5b06b">GPUCA_NAMESPACE::gpu::GPUDisplayBackend::mDisplay</a></div><div class="ttdeci">GPUDisplay * mDisplay</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dba/GPUDisplayBackend_8h_source.html#l00099">GPUDisplayBackend.h:99</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a532ed3612eae8eaed8a7a53ecd7a28f3"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a532ed3612eae8eaed8a7a53ecd7a28f3">GL_LINES</a></div><div class="ttdeci">#define GL_LINES</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00097">glcorearb.h:97</a></div></div>
<div class="ttc" id="namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes_html_ab2aee58e8149fc590f564fbc6fc08d8fa69d603036c1af366c6a6ed1e73e4d402"><div class="ttname"><a href="../../d9/dd3/namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes.html#ab2aee58e8149fc590f564fbc6fc08d8fa69d603036c1af366c6a6ed1e73e4d402">GPUCA_NAMESPACE::gpu::GPUTPCGMMergerTypes::attachTrackMask</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4c/GPUTPCGMMergerTypes_8h_source.html#l00031">GPUTPCGMMergerTypes.h:31</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab7dffdc215fbbe75b6ccacfecfc14648"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab7dffdc215fbbe75b6ccacfecfc14648">GL_STATIC_DRAW</a></div><div class="ttdeci">#define GL_STATIC_DRAW</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00639">glcorearb.h:639</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad45fb154a63b2b32a07732388e8251ad"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad45fb154a63b2b32a07732388e8251ad">GL_MINOR_VERSION</a></div><div class="ttdeci">#define GL_MINOR_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01013">glcorearb.h:1013</a></div></div>
<div class="ttc" id="test__Algorithm_8cxx_html_a5216308b2bcc588018b96379974d290c"><div class="ttname"><a href="../../d2/d0e/test__Algorithm_8cxx.html#a5216308b2bcc588018b96379974d290c">max</a></div><div class="ttdeci">const size_t max</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0e/test__Algorithm_8cxx_source.html#l00040">test_Algorithm.cxx:40</a></div></div>
<div class="ttc" id="classfloat_html"><div class="ttname"><a href="../../d4/dc3/classfloat.html">float</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayShaders_html_a9335293604e4fcbe83f25a44de189075"><div class="ttname"><a href="../../d3/dde/structGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayShaders.html#a9335293604e4fcbe83f25a44de189075">GPUCA_NAMESPACE::gpu::GPUDisplayShaders::fragmentShader</a></div><div class="ttdeci">static constexpr const char * fragmentShader</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7c/GPUDisplayShaders_8h_source.html#l00035">GPUDisplayShaders.h:35</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5d5233918a454ad3975c620a69ac5f0b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a></div><div class="ttdeci">unsigned int GLenum</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00081">glcorearb.h:81</a></div></div>
<div class="ttc" id="gl3w_8h_html_a369ec108462c247e3028edc9070117a0"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a369ec108462c247e3028edc9070117a0">glShaderSource</a></div><div class="ttdeci">#define glShaderSource</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01181">gl3w.h:1181</a></div></div>
<div class="ttc" id="gl3w_8h_html_ab083224e5301beae09d783d2dd1b142a"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ab083224e5301beae09d783d2dd1b142a">glMultiDrawArraysIndirect</a></div><div class="ttdeci">#define glMultiDrawArraysIndirect</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01071">gl3w.h:1071</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a688ad6fbf908a39f7197da6d4e4dd083"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a688ad6fbf908a39f7197da6d4e4dd083">GL_BACK</a></div><div class="ttdeci">#define GL_BACK</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00129">glcorearb.h:129</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9371a1f53f8067997cd15aaf657c62d0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a></div><div class="ttdeci">GLuint GLsizei const GLchar * label</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l02519">glcorearb.h:2519</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel_html_aeb3445c66ca878d33255d8494c9537b4"><div class="ttname"><a href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#aeb3445c66ca878d33255d8494c9537b4">GPUCA_NAMESPACE::gpu::GPUTPCGMPhysicalTrackModel::Z</a></div><div class="ttdeci">float float Z</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/GPUTPCGMPhysicalTrackModel_8h_source.html#l00040">GPUTPCGMPhysicalTrackModel.h:40</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo_html_a815b3ac0438325bb2c326bf4127f1b7b"><div class="ttname"><a href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a815b3ac0438325bb2c326bf4127f1b7b">GPUCA_NAMESPACE::gpu::GPUTPCMCInfo::pid</a></div><div class="ttdeci">int pid</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/GPUTPCMCInfo_8h_source.html#l00025">GPUTPCMCInfo.h:25</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend_html_a96c65445a519a024ec55827f892d638b"><div class="ttname"><a href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#a96c65445a519a024ec55827f892d638b">GPUCA_NAMESPACE::gpu::GPUDisplayBackend::GL_MIN_VERSION_MAJOR</a></div><div class="ttdeci">static constexpr int GL_MIN_VERSION_MAJOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dba/GPUDisplayBackend_8h_source.html#l00035">GPUDisplayBackend.h:35</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker_html_a35896f787d473bae9139bafd8b2aa9ba"><div class="ttname"><a href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html#a35896f787d473bae9139bafd8b2aa9ba">GPUCA_NAMESPACE::gpu::GPUTPCTracker::SetPointersDataLinks</a></div><div class="ttdeci">void * SetPointersDataLinks(void *mem)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/GPUTPCTracker_8cxx_source.html#l00073">GPUTPCTracker.cxx:73</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a56707576fd3e2da55343c25da155294d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a56707576fd3e2da55343c25da155294d">GL_BGRA</a></div><div class="ttdeci">#define GL_BGRA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00456">glcorearb.h:456</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8c24a16d303b4d935f81c240a2cd88b8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a></div><div class="ttdeci">#define GL_POINTS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00096">glcorearb.h:96</a></div></div>
<div class="ttc" id="gl3w_8h_html_a2fafe3fe4732d1a3b3f4202ae5332ef8"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a2fafe3fe4732d1a3b3f4202ae5332ef8">glPixelStorei</a></div><div class="ttdeci">#define glPixelStorei</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01095">gl3w.h:1095</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab54b4b110b532b903bf44599fd6a1b2c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab54b4b110b532b903bf44599fd6a1b2c">GL_READ_FRAMEBUFFER</a></div><div class="ttdeci">#define GL_READ_FRAMEBUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01131">glcorearb.h:1131</a></div></div>
<div class="ttc" id="GPUTPCDef_8h_html"><div class="ttname"><a href="../../da/dab/GPUTPCDef_8h.html">GPUTPCDef.h</a></div></div>
<div class="ttc" id="gl3w_8h_html_a3bc66a02ab7134459ee7f3307dd1eb65"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3bc66a02ab7134459ee7f3307dd1eb65">glDrawBuffer</a></div><div class="ttdeci">#define glDrawBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00860">gl3w.h:860</a></div></div>
<div class="ttc" id="HandMadeMath_8h_html_ae849e8298e9a0d20cc16c77003497346"><div class="ttname"><a href="../../da/d8b/HandMadeMath_8h.html#ae849e8298e9a0d20cc16c77003497346">HMM_Rotate</a></div><div class="ttdeci">HMM_EXTERN hmm_mat4 HMM_Rotate(float Angle, hmm_vec3 Axis)</div></div>
<div class="ttc" id="glcorearb_8h_html_a090ebe65994a3ee4bb60ae3472abffc5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a090ebe65994a3ee4bb60ae3472abffc5">alpha</a></div><div class="ttdeci">GLfloat GLfloat GLfloat alpha</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00279">glcorearb.h:279</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a173a2b2453322dd8d613df6cf2e72480"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a173a2b2453322dd8d613df6cf2e72480">GL_TEXTURE_MIN_FILTER</a></div><div class="ttdeci">#define GL_TEXTURE_MIN_FILTER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00260">glcorearb.h:260</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa2b6486ff7ecee8bf04e3371f197527a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa2b6486ff7ecee8bf04e3371f197527a">GL_MULTISAMPLE</a></div><div class="ttdeci">#define GL_MULTISAMPLE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00516">glcorearb.h:516</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html_acdcd9dff1b32da6b7d3a8086ecf790d4"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html#acdcd9dff1b32da6b7d3a8086ecf790d4">BITMAPINFOHEADER::biBitCount</a></div><div class="ttdeci">unsigned short biBitCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00026">bitmapfile.h:26</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCRow_html"><div class="ttname"><a href="../../de/d4e/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCRow.html">GPUCA_NAMESPACE::gpu::GPUTPCRow</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/GPUTPCRow_8h_source.html#l00032">GPUTPCRow.h:32</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a2b2319323c7cfb4ed795be005209d73d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a2b2319323c7cfb4ed795be005209d73d">GL_MAJOR_VERSION</a></div><div class="ttdeci">#define GL_MAJOR_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01012">glcorearb.h:1012</a></div></div>
<div class="ttc" id="gl3w_8h_html_a987aecafceffb9afaef11412d42e605b"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a987aecafceffb9afaef11412d42e605b">glBindTexture</a></div><div class="ttdeci">#define glBindTexture</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00747">gl3w.h:747</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo_html_aadd350eb94ac523c99f64504da0164ec"><div class="ttname"><a href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#aadd350eb94ac523c99f64504da0164ec">GPUCA_NAMESPACE::gpu::GPUTPCMCInfo::pX</a></div><div class="ttdeci">float pX</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/GPUTPCMCInfo_8h_source.html#l00029">GPUTPCMCInfo.h:29</a></div></div>
<div class="ttc" id="gl3w_8h_html_a1b33d322b89d94ad4938461db0a0424a"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a1b33d322b89d94ad4938461db0a0424a">glGenBuffers</a></div><div class="ttdeci">#define glGenBuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00897">gl3w.h:897</a></div></div>
<div class="ttc" id="gl3w_8h_html_adbbb0a7d41b44182b74a9d4f62ca8a63"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a></div><div class="ttdeci">#define glDisable</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00850">gl3w.h:850</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_a2b3ff9e7c180d9a4604bad8ddbb9ed0e"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a2b3ff9e7c180d9a4604bad8ddbb9ed0e">GPUCA_NAMESPACE::gpu::GPUDisplay::InitGL</a></div><div class="ttdeci">int InitGL(bool initFailure=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00070">GPUDisplay.h:70</a></div></div>
<div class="ttc" id="GPUTPCConvertImpl_8h_html"><div class="ttname"><a href="../../d1/d2e/GPUTPCConvertImpl_8h.html">GPUTPCConvertImpl.h</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_a9e978cd185fa99fb13861981d08ba30a"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a9e978cd185fa99fb13861981d08ba30a">GPUCA_NAMESPACE::gpu::GPUDisplay::ShowNextEvent</a></div><div class="ttdeci">void ShowNextEvent()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00063">GPUDisplay.h:63</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa9459b47e7388437191d2d9a69c10d98"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa9459b47e7388437191d2d9a69c10d98">flags</a></div><div class="ttdeci">GLbitfield flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01570">glcorearb.h:1570</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aceb29bc16e885f956eb9e351a7dd6276"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aceb29bc16e885f956eb9e351a7dd6276">GL_VERTEX_SHADER</a></div><div class="ttdeci">#define GL_VERTEX_SHADER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00729">glcorearb.h:729</a></div></div>
<div class="ttc" id="structfloat4_html_a72bce4984c96cef3d6a50adcbce6e388"><div class="ttname"><a href="../../dd/d9d/structfloat4.html#a72bce4984c96cef3d6a50adcbce6e388">float4::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/GPUCommonDefAPI_8h_source.html#l00052">GPUCommonDefAPI.h:52</a></div></div>
<div class="ttc" id="gl3w_8h_html_a5817fa85137822142b4951eacd0154e7"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a></div><div class="ttdeci">#define glTexParameteri</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01201">gl3w.h:1201</a></div></div>
<div class="ttc" id="GPUTPCDef_8h_html_a7c715fbf6f0c820b4509afddf7016fa6"><div class="ttname"><a href="../../da/dab/GPUTPCDef_8h.html#a7c715fbf6f0c820b4509afddf7016fa6">CALINK_INVAL</a></div><div class="ttdeci">#define CALINK_INVAL</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dab/GPUTPCDef_8h_source.html#l00020">GPUTPCDef.h:20</a></div></div>
<div class="ttc" id="gl3w_8h_html_ac8934b6d1f58aa087424d8080ccf031c"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ac8934b6d1f58aa087424d8080ccf031c">glLineWidth</a></div><div class="ttdeci">#define glLineWidth</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01060">gl3w.h:1060</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae64973345479169d6b1a2698bb9d30f8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae64973345479169d6b1a2698bb9d30f8">GL_READ_FRAMEBUFFER_BINDING</a></div><div class="ttdeci">#define GL_READ_FRAMEBUFFER_BINDING</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01133">glcorearb.h:1133</a></div></div>
<div class="ttc" id="GPUTPCGMPropagator_8h_html"><div class="ttname"><a href="../../d0/dd8/GPUTPCGMPropagator_8h.html">GPUTPCGMPropagator.h</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac4dc812a285640570b56acc55822dffe"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac4dc812a285640570b56acc55822dffe">GL_DEPTH_ATTACHMENT</a></div><div class="ttdeci">#define GL_DEPTH_ATTACHMENT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01179">glcorearb.h:1179</a></div></div>
<div class="ttc" id="structBITMAPFILEHEADER_html"><div class="ttname"><a href="../../d2/d4a/structBITMAPFILEHEADER.html">BITMAPFILEHEADER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00014">bitmapfile.h:14</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_a229a128a66aae6f768c5231253892421"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a229a128a66aae6f768c5231253892421">GPUCA_NAMESPACE::gpu::GPUDisplay::ExitGL</a></div><div class="ttdeci">void ExitGL()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00071">GPUDisplay.h:71</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a1a0294662b50921555cae95fb20740d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a1a0294662b50921555cae95fb20740d4">GL_FRAGMENT_SHADER</a></div><div class="ttdeci">#define GL_FRAGMENT_SHADER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00728">glcorearb.h:728</a></div></div>
<div class="ttc" id="gl3w_8h_html_ab54b002beb984f066acd0dd7fff469dc"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ab54b002beb984f066acd0dd7fff469dc">glViewport</a></div><div class="ttdeci">#define glViewport</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01379">gl3w.h:1379</a></div></div>
<div class="ttc" id="gl3w_8h_html_a6e8ee482001ee8fb9b3d4851116779b4"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a6e8ee482001ee8fb9b3d4851116779b4">glEnableVertexAttribArray</a></div><div class="ttdeci">#define glEnableVertexAttribArray</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00877">gl3w.h:877</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a80a33c79f69417372d65d2a65ca36d49"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a80a33c79f69417372d65d2a65ca36d49">GL_UNSIGNED_BYTE</a></div><div class="ttdeci">#define GL_UNSIGNED_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00206">glcorearb.h:206</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad8f97111cc6514af5f352219d1cceb40"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad8f97111cc6514af5f352219d1cceb40">attachment</a></div><div class="ttdeci">GLenum attachment</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01302">glcorearb.h:1302</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend_html_a15b0169eb36df6e93ad99b6b24638655"><div class="ttname"><a href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#a15b0169eb36df6e93ad99b6b24638655">GPUCA_NAMESPACE::gpu::GPUDisplayBackend::INIT_WIDTH</a></div><div class="ttdeci">static constexpr int INIT_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dba/GPUDisplayBackend_8h_source.html#l00055">GPUDisplayBackend.h:55</a></div></div>
<div class="ttc" id="GPUDisplay_8h_html"><div class="ttname"><a href="../../dc/d69/GPUDisplay_8h.html">GPUDisplay.h</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_af38f59778a92ac6d4aa7b1eeec5c5ed2"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#af38f59778a92ac6d4aa7b1eeec5c5ed2">float</a></div><div class="ttdeci">Visualize clusters only Timeframe settings float</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00022">qconfigoptions.h:22</a></div></div>
<div class="ttc" id="glcorearb_8h_html_af57dbe61f04ea19c60697f13bb2bb8f3"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#af57dbe61f04ea19c60697f13bb2bb8f3">GL_DRAW_INDIRECT_BUFFER</a></div><div class="ttdeci">#define GL_DRAW_INDIRECT_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01698">glcorearb.h:1698</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo_html_a8dda15aa0193b2da3a5e3192de7274e0"><div class="ttname"><a href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a8dda15aa0193b2da3a5e3192de7274e0">GPUCA_NAMESPACE::gpu::GPUTPCMCInfo::charge</a></div><div class="ttdeci">int charge</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/GPUTPCMCInfo_8h_source.html#l00022">GPUTPCMCInfo.h:22</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html_a35cd75ce241529d9a9e52dbf8da331f4"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html#a35cd75ce241529d9a9e52dbf8da331f4">BITMAPINFOHEADER::biHeight</a></div><div class="ttdeci">unsigned int biHeight</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00024">bitmapfile.h:24</a></div></div>
<div class="ttc" id="namespaceGPUCA__NAMESPACE_1_1gpu_html_aa34573829a30273af0aeb7ff52f08b16"><div class="ttname"><a href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#aa34573829a30273af0aeb7ff52f08b16">GPUCA_NAMESPACE::gpu::iSlice</a></div><div class="ttdeci">unsigned long size int mode int iSlice</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc0/GPUReconstructionCPU_8h_source.html#l00032">GPUReconstructionCPU.h:32</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa5ce5420faae33cea9416df7d9d460dc"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa5ce5420faae33cea9416df7d9d460dc">glBlitNamedFramebuffer</a></div><div class="ttdeci">#define glBlitNamedFramebuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00764">gl3w.h:764</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_aa75825ddc8d18dad8b1a242be71e81e0"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#aa75825ddc8d18dad8b1a242be71e81e0">GPUCA_NAMESPACE::gpu::GPUDisplay::StartDisplay</a></div><div class="ttdeci">int StartDisplay()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00062">GPUDisplay.h:62</a></div></div>
<div class="ttc" id="namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes_html_ab2aee58e8149fc590f564fbc6fc08d8fab037aa04e3e7153eb0f179cedc1a5d3a"><div class="ttname"><a href="../../d9/dd3/namespaceGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMMergerTypes.html#ab2aee58e8149fc590f564fbc6fc08d8fab037aa04e3e7153eb0f179cedc1a5d3a">GPUCA_NAMESPACE::gpu::GPUTPCGMMergerTypes::attachTube</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4c/GPUTPCGMMergerTypes_8h_source.html#l00029">GPUTPCGMMergerTypes.h:29</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad871b289b8410082db98e4b3af0301f1"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad871b289b8410082db98e4b3af0301f1">GL_DEPTH_COMPONENT24</a></div><div class="ttdeci">#define GL_DEPTH_COMPONENT24</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00572">glcorearb.h:572</a></div></div>
<div class="ttc" id="gl3w_8h_html_a8afadc1fe36886688a02097cc63a17cb"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a8afadc1fe36886688a02097cc63a17cb">glVertexAttribPointer</a></div><div class="ttdeci">#define glVertexAttribPointer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01377">gl3w.h:1377</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUParam_html"><div class="ttname"><a href="../../da/daf/structGPUCA__NAMESPACE_1_1gpu_1_1GPUParam.html">GPUCA_NAMESPACE::gpu::GPUParam</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d13/GPUParam_8h_source.html#l00040">GPUParam.h:40</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo_html"><div class="ttname"><a href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html">GPUCA_NAMESPACE::gpu::GPUTPCMCInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/GPUTPCMCInfo_8h_source.html#l00021">GPUTPCMCInfo.h:21</a></div></div>
<div class="ttc" id="namespaceGPUCA__NAMESPACE_1_1gpu_html_a05551a7ef80deb98017cdfacb7443730"><div class="ttname"><a href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html#a05551a7ef80deb98017cdfacb7443730">GPUCA_NAMESPACE::gpu::calink</a></div><div class="ttdeci">unsigned int calink</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dab/GPUTPCDef_8h_source.html#l00029">GPUTPCDef.h:29</a></div></div>
<div class="ttc" id="GPUO2DataTypes_8h_html"><div class="ttname"><a href="../../d5/d5c/GPUO2DataTypes_8h.html">GPUO2DataTypes.h</a></div></div>
<div class="ttc" id="gl3w_8h_html_ad9d72969a26069958dea3598cfecb687"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ad9d72969a26069958dea3598cfecb687">glRenderbufferStorage</a></div><div class="ttdeci">#define glRenderbufferStorage</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01165">gl3w.h:1165</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPropagator_html"><div class="ttname"><a href="../../d8/d01/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPropagator.html">GPUCA_NAMESPACE::gpu::GPUTPCGMPropagator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd8/GPUTPCGMPropagator_8h_source.html#l00045">GPUTPCGMPropagator.h:45</a></div></div>
<div class="ttc" id="glcorearb_8h_html_af310b76b7ac30da1d61d8a42388fe651"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#af310b76b7ac30da1d61d8a42388fe651">GL_LINE_SMOOTH</a></div><div class="ttdeci">#define GL_LINE_SMOOTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00143">glcorearb.h:143</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_a8a7d635857211c467c007f5a5e8c2d4f"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a8a7d635857211c467c007f5a5e8c2d4f">GPUCA_NAMESPACE::gpu::GPUDisplay::WaitForNextEvent</a></div><div class="ttdeci">void WaitForNextEvent()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00064">GPUDisplay.h:64</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo_html_a1a89969f806db9dbd1a80fef6ea5f8e4"><div class="ttname"><a href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a1a89969f806db9dbd1a80fef6ea5f8e4">GPUCA_NAMESPACE::gpu::GPUTPCMCInfo::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/GPUTPCMCInfo_8h_source.html#l00026">GPUTPCMCInfo.h:26</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9e907d395940d7ddc7945f0194f01764"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9e907d395940d7ddc7945f0194f01764">pixels</a></div><div class="ttdeci">GLint GLint GLsizei GLint GLenum GLenum const void * pixels</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00275">glcorearb.h:275</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html_a041d36972cd4ae26490469e022ad07ff"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html#a041d36972cd4ae26490469e022ad07ff">BITMAPINFOHEADER::biCompression</a></div><div class="ttdeci">unsigned int biCompression</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00027">bitmapfile.h:27</a></div></div>
<div class="ttc" id="GPUDisplayShaders_8h_html"><div class="ttname"><a href="../../d5/d7c/GPUDisplayShaders_8h.html">GPUDisplayShaders.h</a></div></div>
<div class="ttc" id="gl3w_8h_html_a7f1f9a0fe9bed11438638a721bd6660d"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a7f1f9a0fe9bed11438638a721bd6660d">glPointSize</a></div><div class="ttdeci">#define glPointSize</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01100">gl3w.h:1100</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_acc2760558000045ec0803d60d4d01c98"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#acc2760558000045ec0803d60d4d01c98">e</a></div><div class="ttdeci">Run track merging Number of iterations to Number of iterations to Number of initial iterations excluded from const char e</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00140">qconfigoptions.h:140</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4ccf1dc093190cc3798b9abea3655f98"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4ccf1dc093190cc3798b9abea3655f98">GL_DEPTH_TEST</a></div><div class="ttdeci">#define GL_DEPTH_TEST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00153">glcorearb.h:153</a></div></div>
<div class="ttc" id="gl3w_8h_html_ad8e40c882d63c4671dea2ca2dfcf3046"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ad8e40c882d63c4671dea2ca2dfcf3046">glUseProgram</a></div><div class="ttdeci">#define glUseProgram</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01286">gl3w.h:1286</a></div></div>
<div class="ttc" id="gl3w_8h_html_a3f7fa0df22505dd09a24a4e1e74eca09"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a></div><div class="ttdeci">#define glEnable</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00875">gl3w.h:875</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4e682f218130b98b27a1e33fa7325080"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a></div><div class="ttdeci">#define GL_LINEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00254">glcorearb.h:254</a></div></div>
<div class="ttc" id="gl3w_8h_html_a8b800cc6117d08d5ec34b32421563799"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a8b800cc6117d08d5ec34b32421563799">glGenRenderbuffers</a></div><div class="ttdeci">#define glGenRenderbuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00901">gl3w.h:901</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a0cdec8e97a75ee9458b23d152bf962d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00403">glcorearb.h:403</a></div></div>
<div class="ttc" id="gl3w_8h_html_a12060509af7dc9c8353810eb8b7f145c"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a12060509af7dc9c8353810eb8b7f145c">glClearColor</a></div><div class="ttdeci">#define glClearColor</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00778">gl3w.h:778</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUQA_html"><div class="ttname"><a href="../../d0/dd9/classGPUCA__NAMESPACE_1_1gpu_1_1GPUQA.html">GPUCA_NAMESPACE::gpu::GPUQA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcc/GPUQA_8h_source.html#l00038">GPUQA.h:38</a></div></div>
<div class="ttc" id="structfloat4_html_a898443ac0132ee9f149661c63882361b"><div class="ttname"><a href="../../dd/d9d/structfloat4.html#a898443ac0132ee9f149661c63882361b">float4::z</a></div><div class="ttdeci">float z</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/GPUCommonDefAPI_8h_source.html#l00052">GPUCommonDefAPI.h:52</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7ebcdfa478fe099b5ab4a5399fe37ddb"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7ebcdfa478fe099b5ab4a5399fe37ddb">GL_DRAW_FRAMEBUFFER</a></div><div class="ttdeci">#define GL_DRAW_FRAMEBUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01132">glcorearb.h:1132</a></div></div>
<div class="ttc" id="namespaceGPUCA__NAMESPACE_1_1gpu_html"><div class="ttname"><a href="../../d8/dde/namespaceGPUCA__NAMESPACE_1_1gpu.html">GPUCA_NAMESPACE::gpu</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00029">GPUCommonAlgorithm.h:29</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a74d80fd479c0f6d0153c709949a089ef"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a></div><div class="ttdeci">GLint y</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00270">glcorearb.h:270</a></div></div>
<div class="ttc" id="gl3w_8h_html_a264e119325884947733141031ec9ff68"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a264e119325884947733141031ec9ff68">glUniform3fv</a></div><div class="ttdeci">#define glUniform3fv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01251">gl3w.h:1251</a></div></div>
<div class="ttc" id="gl3w_8h_html_a1cd4c6b9e1fb6b4eb927ab0997de48ef"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a1cd4c6b9e1fb6b4eb927ab0997de48ef">glUniformMatrix4fv</a></div><div class="ttdeci">#define glUniformMatrix4fv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01278">gl3w.h:1278</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa7c5c636d1f609455e73ceee2eed8ba1"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa7c5c636d1f609455e73ceee2eed8ba1">glDeleteFramebuffers</a></div><div class="ttdeci">#define glDeleteFramebuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00832">gl3w.h:832</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo_html_a84a061babec811147eaa88913e7d749f"><div class="ttname"><a href="../../df/d00/structGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCMCInfo.html#a84a061babec811147eaa88913e7d749f">GPUCA_NAMESPACE::gpu::GPUTPCMCInfo::pZ</a></div><div class="ttdeci">float pZ</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/GPUTPCMCInfo_8h_source.html#l00031">GPUTPCMCInfo.h:31</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTrack_html"><div class="ttname"><a href="../../d6/dfa/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTrack.html">GPUCA_NAMESPACE::gpu::GPUTPCTrack</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d88/GPUTPCTrack_8h_source.html#l00033">GPUTPCTrack.h:33</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_a6f1b7c22899bd6bcfe619dc6d85eba53"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#a6f1b7c22899bd6bcfe619dc6d85eba53">configStandalone</a></div><div class="ttdeci">Visualize clusters only configStandalone</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00020">qconfigoptions.h:20</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_a28ef843074bd923f8e71bae2ba8c53f3"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a28ef843074bd923f8e71bae2ba8c53f3">GPUCA_NAMESPACE::gpu::GPUDisplay::SetCollisionFirstCluster</a></div><div class="ttdeci">void SetCollisionFirstCluster(unsigned int collision, int slice, int cluster)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00065">GPUDisplay.h:65</a></div></div>
<div class="ttc" id="HandMadeMath_8h_html_a45b402021ad3a82a97357d3d96e54d6a"><div class="ttname"><a href="../../da/d8b/HandMadeMath_8h.html#a45b402021ad3a82a97357d3d96e54d6a">HMM_Perspective</a></div><div class="ttdeci">HMM_INLINE hmm_mat4 HMM_Perspective(float FOV, float AspectRatio, float Near, float Far)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8b/HandMadeMath_8h_source.html#l01253">HandMadeMath.h:1253</a></div></div>
<div class="ttc" id="GPUQA_8h_html"><div class="ttname"><a href="../../da/dcc/GPUQA_8h.html">GPUQA.h</a></div></div>
<div class="ttc" id="structBITMAPINFOHEADER_html"><div class="ttname"><a href="../../d3/df4/structBITMAPINFOHEADER.html">BITMAPINFOHEADER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00021">bitmapfile.h:21</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend_html_ac9b39b267d3bc4ef43430dcea79cb572"><div class="ttname"><a href="../../d6/d42/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayBackend.html#ac9b39b267d3bc4ef43430dcea79cb572">GPUCA_NAMESPACE::gpu::GPUDisplayBackend::INIT_HEIGHT</a></div><div class="ttdeci">static constexpr int INIT_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dba/GPUDisplayBackend_8h_source.html#l00055">GPUDisplayBackend.h:55</a></div></div>
<div class="ttc" id="glcorearb_8h_html_adb12a0d439f32ca388b2c806150cc54d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a></div><div class="ttdeci">GLubyte GLubyte GLubyte GLubyte w</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00852">glcorearb.h:852</a></div></div>
<div class="ttc" id="GPUChainTracking_8h_html"><div class="ttname"><a href="../../db/ded/GPUChainTracking_8h.html">GPUChainTracking.h</a></div></div>
<div class="ttc" id="GPUTPCClusterData_8h_html"><div class="ttname"><a href="../../d1/dde/GPUTPCClusterData_8h.html">GPUTPCClusterData.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_a930799bc13c911ce05e376c5b6c8ac09"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a930799bc13c911ce05e376c5b6c8ac09">o2::framework::parallel</a></div><div class="ttdeci">WorkflowSpec parallel(DataProcessorSpec original, size_t maxIndex, std::function&lt; void(DataProcessorSpec &amp;, size_t id)&gt; amendCallback)</div></div>
<div class="ttc" id="glcorearb_8h_html_abe08814c2f72843fde4d8df41440d5a0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a></div><div class="ttdeci">GLboolean r</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01233">glcorearb.h:1233</a></div></div>
<div class="ttc" id="gl3w_8h_html_a2097cfa52d11568f886cf6d3cf888f1c"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a2097cfa52d11568f886cf6d3cf888f1c">glCheckFramebufferStatus</a></div><div class="ttdeci">#define glCheckFramebufferStatus</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00768">gl3w.h:768</a></div></div>
<div class="ttc" id="gl3w_8h_html_a7ea2e382a408e6ffc692e9e6fbaf0c22"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a></div><div class="ttdeci">#define glBindFramebuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00740">gl3w.h:740</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab4fcc6ff520ae4d9de259c8468a5cd93"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab4fcc6ff520ae4d9de259c8468a5cd93">blue</a></div><div class="ttdeci">GLfloat GLfloat blue</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00279">glcorearb.h:279</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8b778a06f153b4d59ebc6aa1d0996191"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8b778a06f153b4d59ebc6aa1d0996191">GL_LEQUAL</a></div><div class="ttdeci">#define GL_LEQUAL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00107">glcorearb.h:107</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8922a680b00df660c57f47c1971d04c5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a></div><div class="ttdeci">GLboolean * data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00298">glcorearb.h:298</a></div></div>
<div class="ttc" id="GPUCommonAlgorithm_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00385">GPUCommonAlgorithm.h:385</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay_html_a34a1ad865678292015caaa62746e8c11"><div class="ttname"><a href="../../d9/dda/classGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplay.html#a34a1ad865678292015caaa62746e8c11">GPUCA_NAMESPACE::gpu::GPUDisplay::DrawGLScene</a></div><div class="ttdeci">int DrawGLScene(bool mixAnimation=false, float mAnimateTime=-1.f)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d69/GPUDisplay_8h_source.html#l00068">GPUDisplay.h:68</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker_html_ad104e4fa66037c2eab1a9b4585452ec2"><div class="ttname"><a href="../../d3/dd4/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCTracker.html#ad104e4fa66037c2eab1a9b4585452ec2">GPUCA_NAMESPACE::gpu::GPUTPCTracker::MemoryResLinks</a></div><div class="ttdeci">short MemoryResLinks() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d25/GPUTPCTracker_8h_source.html#l00144">GPUTPCTracker.h:144</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa25172732c3d88c7c23d93f9e7d672be"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa25172732c3d88c7c23d93f9e7d672be">glBindRenderbuffer</a></div><div class="ttdeci">#define glBindRenderbuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00744">gl3w.h:744</a></div></div>
<div class="ttc" id="gl3w_8h_html_ad2c7045354de0b7817406b1590f69efd"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ad2c7045354de0b7817406b1590f69efd">glDeleteRenderbuffers</a></div><div class="ttdeci">#define glDeleteRenderbuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00836">gl3w.h:836</a></div></div>
<div class="ttc" id="gl3w_8h_html_a5810aaf501d0a2a090f46a7f2121e4e7"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a5810aaf501d0a2a090f46a7f2121e4e7">glReadBuffer</a></div><div class="ttdeci">#define glReadBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01161">gl3w.h:1161</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUChain_html_aca12546d88480e5c2ea96ffb5dad4f7f"><div class="ttname"><a href="../../dd/d48/classGPUCA__NAMESPACE_1_1gpu_1_1GPUChain.html#aca12546d88480e5c2ea96ffb5dad4f7f">GPUCA_NAMESPACE::gpu::GPUChain::NSLICES</a></div><div class="ttdeci">static constexpr int NSLICES</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00049">GPUChain.h:49</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel_html"><div class="ttname"><a href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html">GPUCA_NAMESPACE::gpu::GPUTPCGMPhysicalTrackModel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/GPUTPCGMPhysicalTrackModel_8h_source.html#l00033">GPUTPCGMPhysicalTrackModel.h:33</a></div></div>
<div class="ttc" id="namespaceo2_1_1its_1_1math__utils_html_adc8ed3fb46442ac4e3ad00b03911ab55"><div class="ttname"><a href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#adc8ed3fb46442ac4e3ad00b03911ab55">o2::its::math_utils::y2</a></div><div class="ttdeci">const float3 float float float y2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3e/MathUtils_8h_source.html#l00041">MathUtils.h:41</a></div></div>
<div class="ttc" id="HandMadeMath_8h_html_a8ebcf086f769a6c14b865b2e64617b9b"><div class="ttname"><a href="../../da/d8b/HandMadeMath_8h.html#a8ebcf086f769a6c14b865b2e64617b9b">HMM_Translate</a></div><div class="ttdeci">HMM_INLINE hmm_mat4 HMM_Translate(hmm_vec3 Translation)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8b/HandMadeMath_8h_source.html#l01269">HandMadeMath.h:1269</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a6879d830f164725df67adeeabca3ea47"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6879d830f164725df67adeeabca3ea47">width</a></div><div class="ttdeci">GLint GLsizei width</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00270">glcorearb.h:270</a></div></div>
<div class="ttc" id="gl3w_8h_html_aedf2546140e2c0f0e8d6f62e9998ae73"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aedf2546140e2c0f0e8d6f62e9998ae73">glDeleteTextures</a></div><div class="ttdeci">#define glDeleteTextures</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00840">gl3w.h:840</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aef2a9e9a4b130bc4de57514327847b4f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a></div><div class="ttdeci">#define GL_DEPTH_BUFFER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00091">glcorearb.h:91</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a76bcbd4f383a8cf41a3a1afa35106a66"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a76bcbd4f383a8cf41a3a1afa35106a66">GL_VERTEX_ARRAY</a></div><div class="ttdeci">#define GL_VERTEX_ARRAY</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00398">glcorearb.h:398</a></div></div>
<div class="ttc" id="gl3w_8h_html_acf9d728f2b2be42fbc2fe6dada8bcd2b"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#acf9d728f2b2be42fbc2fe6dada8bcd2b">glCreateProgram</a></div><div class="ttdeci">#define glCreateProgram</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00817">gl3w.h:817</a></div></div>
<div class="ttc" id="bitmapfile_8h_html_a8e4f85d6285251a543e8a9b5d197f4bcadbe9bb7739b5aa86894640cf7bc72e8c"><div class="ttname"><a href="../../d5/d5f/bitmapfile_8h.html#a8e4f85d6285251a543e8a9b5d197f4bcadbe9bb7739b5aa86894640cf7bc72e8c">BI_RGB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/bitmapfile_8h_source.html#l00035">bitmapfile.h:35</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aaa829d0cb1208a8931ea4ef30f8747f1"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aaa829d0cb1208a8931ea4ef30f8747f1">GL_TEXTURE_2D_MULTISAMPLE</a></div><div class="ttdeci">#define GL_TEXTURE_2D_MULTISAMPLE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01548">glcorearb.h:1548</a></div></div>
<div class="ttc" id="gl3w_8h_html_a0903ee19d8321a1e456bebb54a65ee2a"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a0903ee19d8321a1e456bebb54a65ee2a">glDisableVertexAttribArray</a></div><div class="ttdeci">#define glDisableVertexAttribArray</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00852">gl3w.h:852</a></div></div>
<div class="ttc" id="gl3w_8h_html_ac012d7614801ed69d643ad388dcfc768"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ac012d7614801ed69d643ad388dcfc768">glDeleteShader</a></div><div class="ttdeci">#define glDeleteShader</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00838">gl3w.h:838</a></div></div>
<div class="ttc" id="namespaceo2_1_1its_1_1math__utils_html_ac713be41b5cad67abc4e4d0581961905"><div class="ttname"><a href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#ac713be41b5cad67abc4e4d0581961905">o2::its::math_utils::z1</a></div><div class="ttdeci">float float float float z1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3e/MathUtils_8h_source.html#l00043">MathUtils.h:43</a></div></div>
<div class="ttc" id="gl3w_8h_html_ad241352c6eee6e79f09942ef0771db47"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ad241352c6eee6e79f09942ef0771db47">glLinkProgram</a></div><div class="ttdeci">#define glLinkProgram</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01061">gl3w.h:1061</a></div></div>
<div class="ttc" id="HandMadeMath_8h_html_a025e81ff6b1dac39d3d1e7b1a85185f1"><div class="ttname"><a href="../../da/d8b/HandMadeMath_8h.html#a025e81ff6b1dac39d3d1e7b1a85185f1">HMM_Orthographic</a></div><div class="ttdeci">HMM_INLINE hmm_mat4 HMM_Orthographic(float Left, float Right, float Bottom, float Top, float Near, float Far)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8b/HandMadeMath_8h_source.html#l01237">HandMadeMath.h:1237</a></div></div>
<div class="ttc" id="gl3w_8h_html_a0cb06d612b3358bfaadbbefd7c51f1cc"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a0cb06d612b3358bfaadbbefd7c51f1cc">glAttachShader</a></div><div class="ttdeci">#define glAttachShader</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00727">gl3w.h:727</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a31eafbeac9256b106b6acfd78f305200"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a></div><div class="ttdeci">GLint GLsizei count</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00399">glcorearb.h:399</a></div></div>
<div class="ttc" id="gl3w_8h_html_a3fb0b694bf693bcd13fae76b3213ba92"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3fb0b694bf693bcd13fae76b3213ba92">glFramebufferTexture2D</a></div><div class="ttdeci">#define glFramebufferTexture2D</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00893">gl3w.h:893</a></div></div>
<div class="ttc" id="convertDigitsToRawZS_8cxx_html_a8761d49d4e74c4e774d0f36d12e060b7"><div class="ttname"><a href="../../df/d6c/convertDigitsToRawZS_8cxx.html#a8761d49d4e74c4e774d0f36d12e060b7">convert</a></div><div class="ttdeci">void convert(DigitArray &amp;inputDigits, ProcessAttributes *processAttributes, o2::raw::RawFileWriter &amp;writer)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/convertDigitsToRawZS_8cxx_source.html#l00174">convertDigitsToRawZS.cxx:174</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUChainTracking_html"><div class="ttname"><a href="../../d5/d5f/classGPUCA__NAMESPACE_1_1gpu_1_1GPUChainTracking.html">GPUCA_NAMESPACE::gpu::GPUChainTracking</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00063">GPUChainTracking.h:63</a></div></div>
<div class="ttc" id="classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel_html_a60044f7f87a5e94c131a707c2d25de25"><div class="ttname"><a href="../../dc/d79/classGPUCA__NAMESPACE_1_1gpu_1_1GPUTPCGMPhysicalTrackModel.html#a60044f7f87a5e94c131a707c2d25de25">GPUCA_NAMESPACE::gpu::GPUTPCGMPhysicalTrackModel::Y</a></div><div class="ttdeci">float Y</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/GPUTPCGMPhysicalTrackModel_8h_source.html#l00040">GPUTPCGMPhysicalTrackModel.h:40</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7a5ca562c069ca1294283df0c7d192ad"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7a5ca562c069ca1294283df0c7d192ad">GL_FRAMEBUFFER_COMPLETE</a></div><div class="ttdeci">#define GL_FRAMEBUFFER_COMPLETE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01140">glcorearb.h:1140</a></div></div>
<div class="ttc" id="structGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayShaders_html_a76c2f7eaef099bd1da3b103684311b05"><div class="ttname"><a href="../../d3/dde/structGPUCA__NAMESPACE_1_1gpu_1_1GPUDisplayShaders.html#a76c2f7eaef099bd1da3b103684311b05">GPUCA_NAMESPACE::gpu::GPUDisplayShaders::vertexShader</a></div><div class="ttdeci">static constexpr const char * vertexShader</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7c/GPUDisplayShaders_8h_source.html#l00024">GPUDisplayShaders.h:24</a></div></div>
<div class="ttc" id="gl3w_8h_html_afc250a2b6bf11f24bb73534a2f053c0d"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#afc250a2b6bf11f24bb73534a2f053c0d">glClear</a></div><div class="ttdeci">#define glClear</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00771">gl3w.h:771</a></div></div>
<div class="ttc" id="gl3w_8h_html_ae4f8384133dc7f9a68ffde907193ca68"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ae4f8384133dc7f9a68ffde907193ca68">glDrawBuffers</a></div><div class="ttdeci">#define glDrawBuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00861">gl3w.h:861</a></div></div>
<div class="ttc" id="GPUTRDTracker_8h_html"><div class="ttname"><a href="../../dd/d44/GPUTRDTracker_8h.html">GPUTRDTracker.h</a></div><div class="ttdoc">Online TRD tracker based on extrapolated TPC tracks. </div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_f511f1e9c03c071966ae594f00bbc5e0.html">GPU</a></li><li class="navelem"><a class="el" href="../../dir_77030b149987c946eb2e85728f65acc0.html">GPUTracking</a></li><li class="navelem"><a class="el" href="../../dir_289ec97c7adb65139f0eb8343d5d21ae.html">Standalone</a></li><li class="navelem"><a class="el" href="../../dir_f75a703c2555322f99f9e21899df4536.html">display</a></li><li class="navelem"><a class="el" href="../../d8/d8f/GPUDisplay_8cxx.html">GPUDisplay.cxx</a></li>
    <li class="footer">Generated on Thu Jun 4 2020 09:30:35 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
