<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/travis/build/AliceO2Group/AliceO2/Framework/Utils/include/DPLUtils/MakeRootTreeWriterSpec.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/dc8/MakeRootTreeWriterSpec_8h_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MakeRootTreeWriterSpec.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/dc8/MakeRootTreeWriterSpec_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright CERN and copyright holders of ALICE O2. This software is</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// distributed under the terms of the GNU General Public License v3 (GPL</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See http://alice-o2.web.cern.ch/license for full licensing information.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#ifndef FRAMEWORK_MAKEROOTTREEWRITERSPEC_H</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#define FRAMEWORK_MAKEROOTTREEWRITERSPEC_H</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d8d/RootTreeWriter_8h.html">DPLUtils/RootTreeWriter.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d3f/InputSpec_8h.html">Framework/InputSpec.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dc6/ConfigParamRegistry_8h.html">Framework/ConfigParamRegistry.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/df4/DataProcessorSpec_8h.html">Framework/DataProcessorSpec.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d7f/CallbackService_8h.html">Framework/CallbackService.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d43/ControlService_8h.html">Framework/ControlService.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;variant&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;unordered_set&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">namespace </span>framework</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html">  190</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html">MakeRootTreeWriterSpec</a></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#a5114ad7b7b0a6d406e6f5db7edeb7ce9">  193</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="../../d1/df9/classo2_1_1framework_1_1RootTreeWriter.html">WriterType</a> = <a class="code" href="../../d1/df9/classo2_1_1framework_1_1RootTreeWriter.html">RootTreeWriter</a>;</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8">  194</a></span>&#160;  <span class="keyword">enum struct</span> <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8">TerminationPolicy</a> {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8ab6ec7abeb6ae29cc35a4b47475e12afe">Process</a>,</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8a24f47cdbe9ddba774a7cc53e51d9032e">Workflow</a>,</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  };</div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ae1b2394b68627d9e54e9f5a588f00111">  198</a></span>&#160;  <span class="keyword">const</span> std::map&lt;std::string, TerminationPolicy&gt; <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ae1b2394b68627d9e54e9f5a588f00111">TerminationPolicyMap</a> = {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    {<span class="stringliteral">&quot;process&quot;</span>, <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8ab6ec7abeb6ae29cc35a4b47475e12afe">TerminationPolicy::Process</a>},</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    {<span class="stringliteral">&quot;workflow&quot;</span>, <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8a24f47cdbe9ddba774a7cc53e51d9032e">TerminationPolicy::Workflow</a>},</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  };</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">  203</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">TerminationCondition</a> {</div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#ae2cabd6d8ca3a9fdbbe48c76094068b4">  206</a></span>&#160;    <span class="keyword">enum struct</span> <a class="code" href="../../dd/db3/structAction.html">Action</a> {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      DoProcessing,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      SkipProcessing,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    };</div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#adf6bf024bcd452685f38fb17ffa6fa29">  216</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#adf6bf024bcd452685f38fb17ffa6fa29">CheckProcessing</a> = std::function&lt;std::tuple&lt;TerminationCondition::Action, bool&gt;(<a class="code" href="../../d3/da6/structo2_1_1framework_1_1DataRef.html">framework::DataRef</a> <span class="keyword">const</span>&amp;)&gt;;</div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#af802bd388c713fc53e804c392391798f">  220</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#af802bd388c713fc53e804c392391798f">CheckReady</a> = std::function&lt;bool(o2::framework::DataRef const&amp;)&gt;;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#a6fa54707d1137cfed98e4f9339c31ffc">  223</a></span>&#160;    std::variant&lt;std::monostate, CheckReady, CheckProcessing&gt; <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#a6fa54707d1137cfed98e4f9339c31ffc">check</a>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  };</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html">  226</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html">Preprocessor</a> {</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#ab4b72d4885e643c4a34dadbb69abdfa6">  228</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#ab4b72d4885e643c4a34dadbb69abdfa6">Process</a> = std::function&lt;void(ProcessingContext&amp;)&gt;;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#a4122043b6221dc355927821990af183f">  231</a></span>&#160;    std::variant&lt;std::monostate, Process&gt; <a class="code" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#a4122043b6221dc355927821990af183f">callback</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#ad1d5ee0bf22a0fed4d90b6f1cc90061c">  234</a></span>&#160;    constexpr <span class="keyword">operator</span> <a class="code" href="../../d8/de9/qconfigoptions_8h.html#aa1bc83c2f27c6427080c2ba02be21feb">bool</a>()</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">return</span> std::holds_alternative&lt;Process&gt;(callback);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#a0d0b34d7b68819e50db44555e5f6a8ed">  240</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#a0d0b34d7b68819e50db44555e5f6a8ed">operator()</a>(<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">ProcessingContext</a>&amp; context)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">if</span> (std::holds_alternative&lt;Process&gt;(callback)) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        std::get&lt;Process&gt;(callback)(context);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  };</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="../../d2/d5d/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor.html">  249</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="../../d2/d5d/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor.html">KeyExtractor</a> {</div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="../../d2/d5d/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor.html#a7daf0b9af07cf4878c6b9fa891fd86ed">  250</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="../../d2/d5d/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor.html#a7daf0b9af07cf4878c6b9fa891fd86ed">asString</a>(<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a> <span class="keyword">const</span>&amp; arg) { <span class="keywordflow">return</span> arg.<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html#a25e23e417b5d17858f7be127954a97b8">binding</a>; }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  };</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// branch definition structure uses InputSpec as key type</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">  255</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition</a> : <span class="keyword">public</span> <a class="code" href="../../d6/d72/structo2_1_1framework_1_1RootTreeWriter_1_1BranchDef.html">WriterType::BranchDef</a>&lt;T, InputSpec, KeyExtractor&gt; {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> KeyType&gt;</div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#a1451bb4dff5ea166db85591a354fa19b">  259</a></span>&#160;    <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#a1451bb4dff5ea166db85591a354fa19b">BranchDefinition</a>(KeyType&amp;&amp; key, std::string _branchName, std::string _optionKey = <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      : <a class="code" href="../../d1/df9/classo2_1_1framework_1_1RootTreeWriter.html">WriterType</a>::BranchDef&lt;<a class="code" href="../../d1/def/classT.html">T</a>, <a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>, <a class="code" href="../../d2/d5d/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor.html">KeyExtractor</a>&gt;(<a class="code" href="../../d8/dcc/namespacestd.html">std</a>::forward&lt;KeyType&gt;(key), _branchName), optionKey(_optionKey)</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> KeyType&gt;</div><div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#acccfa81b6423c9c2c388ea1ea7d5e894">  266</a></span>&#160;    <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#acccfa81b6423c9c2c388ea1ea7d5e894">BranchDefinition</a>(KeyType&amp;&amp; key, std::string _branchName, <span class="keywordtype">int</span> _nofBranches, std::string _optionKey = <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      : <a class="code" href="../../d1/df9/classo2_1_1framework_1_1RootTreeWriter.html">WriterType</a>::BranchDef&lt;<a class="code" href="../../d1/def/classT.html">T</a>, <a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>, <a class="code" href="../../d2/d5d/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor.html">KeyExtractor</a>&gt;(<a class="code" href="../../d8/dcc/namespacestd.html">std</a>::forward&lt;KeyType&gt;(key), _branchName, _nofBranches), optionKey(_optionKey)</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> KeyType, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#a52e9eecb97d44267e2b3452c168e84bf">  272</a></span>&#160;    <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#a52e9eecb97d44267e2b3452c168e84bf">BranchDefinition</a>(KeyType key, std::string _branchName, std::string _optionKey, Args&amp;&amp;... args)</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      : <a class="code" href="../../d1/df9/classo2_1_1framework_1_1RootTreeWriter.html">WriterType</a>::BranchDef&lt;<a class="code" href="../../d1/def/classT.html">T</a>, <a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>, <a class="code" href="../../d2/d5d/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor.html">KeyExtractor</a>&gt;(<a class="code" href="../../d8/dcc/namespacestd.html">std</a>::forward&lt;KeyType&gt;(key), _branchName, <a class="code" href="../../d8/dcc/namespacestd.html">std</a>::forward&lt;Args&gt;(args)...), optionKey(_optionKey)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#afa04ccf579534346fd342d41bfbccdb2">  277</a></span>&#160;    std::string optionKey = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  };</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// helper to define auxiliary inputs, i.e. inputs not connected to a branch</span></div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="../../d4/d41/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute.html">  281</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="../../d4/d41/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute.html">AuxInputRoute</a> {</div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../d4/d41/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute.html#a12df9df0546a57a34ecf289ded5c0329">  282</a></span>&#160;    <a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a> <a class="code" href="../../d4/d41/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute.html#a12df9df0546a57a34ecf289ded5c0329">mSpec</a>;</div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="../../d4/d41/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute.html#a05b39ac7187aed7db2d5a2f2e3eb930e">  283</a></span>&#160;    <span class="keyword">operator</span> <a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">return</span> mSpec;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  };</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// callback with signature void(TFile*, TTree*)</span></div><div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ab6f276376ba126fb261148d7dbbcaa33">  290</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ab6f276376ba126fb261148d7dbbcaa33">CustomClose</a> = <a class="code" href="../../d1/df9/classo2_1_1framework_1_1RootTreeWriter.html#a491e4ddf3c92c927b570e437fe611c5b">WriterType::CustomClose</a>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#af996a7b270035d4a61c878982ea9c07b">MakeRootTreeWriterSpec</a>() = <span class="keyword">delete</span>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#a4c07506acabf0f0a10ad85074108df05">  296</a></span>&#160;  <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#a4c07506acabf0f0a10ad85074108df05">MakeRootTreeWriterSpec</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* processName, Args&amp;&amp;... args) : mProcessName(processName)</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    parseConstructorArgs&lt;0&gt;(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#a607d3a1c0411706e282366ccc982fbd6">  301</a></span>&#160;  <a class="code" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">DataProcessorSpec</a> <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#a607d3a1c0411706e282366ccc982fbd6">operator()</a>()</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// this creates the workflow spec</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../df/d13/structProcessAttributes.html">ProcessAttributes</a> {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="comment">// worker instance</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      std::shared_ptr&lt;WriterType&gt; writer;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="comment">// keys for branch name options</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      std::vector&lt;std::pair&lt;std::string, std::string&gt;&gt; branchNameOptions;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="comment">// number of events to be processed</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d7/d1b/test__Fifo_8cxx.html#ab99f79cb35f3010d34eaf50a2a90f28c">nEvents</a> = -1;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="comment">// starting with all inputs, every input which has been indicated &#39;ready&#39; is removed</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      std::unordered_set&lt;std::string&gt; activeInputs;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="comment">// event counter</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#afa228d201857b67afdee8292f4cb08a8">counter</a> = 0;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="comment">// indicate what to terminate upon ready: process or workflow</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8">TerminationPolicy</a> terminationPolicy = <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8ab6ec7abeb6ae29cc35a4b47475e12afe">TerminationPolicy::Process</a>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="comment">// custom termination condition</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">TerminationCondition</a> terminationCondition;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="comment">// custom preprocessor</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <a class="code" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html">Preprocessor</a> preprocessor;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="comment">// the total number of served branches on the n inputs</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordtype">size_t</span> nofBranches;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    };</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keyword">auto</span> processAttributes = std::make_shared&lt;ProcessAttributes&gt;();</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    processAttributes-&gt;writer = mWriter;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    processAttributes-&gt;branchNameOptions = mBranchNameOptions;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    processAttributes-&gt;terminationCondition = std::move(mTerminationCondition);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    processAttributes-&gt;preprocessor = std::move(mPreprocessor);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// set the list of active inputs, every input which is indecated as &#39;ready&#39; will be removed from the list</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// the process is ready if the list is empty</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; input : mInputs) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      processAttributes-&gt;activeInputs.emplace(input.binding);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    processAttributes-&gt;nofBranches = mNofBranches;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// the init function is returned to the DPL in order to init the process</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keyword">auto</span> initFct = [processAttributes, TerminationPolicyMap = <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ae1b2394b68627d9e54e9f5a588f00111">TerminationPolicyMap</a>](<a class="code" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html">InitContext</a>&amp; ic) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keyword">auto</span>&amp; branchNameOptions = processAttributes-&gt;branchNameOptions;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keyword">auto</span> filename = ic.options().get&lt;std::string&gt;(<span class="stringliteral">&quot;outfile&quot;</span>);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keyword">auto</span> treename = ic.options().get&lt;std::string&gt;(<span class="stringliteral">&quot;treename&quot;</span>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      processAttributes-&gt;nEvents = ic.options().get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;nevents&quot;</span>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">if</span> (processAttributes-&gt;nEvents &gt; 0 &amp;&amp; processAttributes-&gt;activeInputs.size() != processAttributes-&gt;nofBranches) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(WARNING) &lt;&lt; <span class="stringliteral">&quot;the n inputs serve in total m branches with n != m, this means that there will be data for\n&quot;</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;different branches on the same input. Be aware that the --nevents option might lead to incomplete\n&quot;</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;data in the output file as the number of processed input sets is counted&quot;</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">try</span> {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        processAttributes-&gt;terminationPolicy = TerminationPolicyMap.at(ic.options().get&lt;std::string&gt;(<span class="stringliteral">&quot;terminate&quot;</span>));</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      } <span class="keywordflow">catch</span> (std::out_of_range&amp;) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument(std::string(<span class="stringliteral">&quot;invalid termination policy: &quot;</span>) + ic.options().get&lt;std::string&gt;(<span class="stringliteral">&quot;terminate&quot;</span>));</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordflow">if</span> (filename.empty() || treename.empty()) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;output file name and tree name are mandatory options&quot;</span>);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> branchIndex = 0; branchIndex &lt; branchNameOptions.size(); branchIndex++) {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="comment">// pair of key (first) - value (second)</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">if</span> (branchNameOptions[branchIndex].<a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a>.empty()) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keyword">auto</span> branchName = ic.options().get&lt;std::string&gt;(branchNameOptions[branchIndex].first.c_str());</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        processAttributes-&gt;writer-&gt;setBranchName(branchIndex, branchName.c_str());</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      processAttributes-&gt;writer-&gt;init(filename.c_str(), treename.c_str());</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="comment">// the callback to be set as hook at stop of processing for the framework</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keyword">auto</span> finishWriting = [processAttributes]() {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        processAttributes-&gt;writer-&gt;close();</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      };</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      ic.services().get&lt;<a class="code" href="../../d5/db2/classo2_1_1framework_1_1CallbackService.html">CallbackService</a>&gt;().<span class="keyword">set</span>(<a class="code" href="../../d5/db2/classo2_1_1framework_1_1CallbackService.html#a366185062bc2dbfe04c2e37c641b8f1ba11a755d598c0c417f9a36758c3da7481">CallbackService::Id::Stop</a>, finishWriting);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keyword">auto</span> processingFct = [processAttributes](<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">ProcessingContext</a>&amp; pc) {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keyword">auto</span>&amp; writer = processAttributes-&gt;writer;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keyword">auto</span>&amp; terminationPolicy = processAttributes-&gt;terminationPolicy;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keyword">auto</span>&amp; terminationCondition = processAttributes-&gt;terminationCondition;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keyword">auto</span>&amp; preprocessor = processAttributes-&gt;preprocessor;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keyword">auto</span>&amp; activeInputs = processAttributes-&gt;activeInputs;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keyword">auto</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#afa228d201857b67afdee8292f4cb08a8">counter</a> = processAttributes-&gt;counter;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keyword">auto</span>&amp; <a class="code" href="../../d7/d1b/test__Fifo_8cxx.html#ab99f79cb35f3010d34eaf50a2a90f28c">nEvents</a> = processAttributes-&gt;nEvents;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> (writer-&gt;isClosed()) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          <span class="keywordflow">return</span>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="comment">// if the termination condition contains function of type CheckProcessing, this is checked</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">// before the processing, currently implemented logic:</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">// - processing is skipped if this is indicated by at least one input</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="comment">// - if input is &#39;ready&#39; it is removed from the list of active inputs</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keyword">auto</span> checkProcessing = [&amp;terminationCondition, &amp;activeInputs](<span class="keyword">auto</span> <span class="keyword">const</span>&amp; inputs) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          <span class="keywordtype">bool</span> doProcessing = <span class="keyword">true</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;          <span class="keywordflow">if</span> (std::holds_alternative&lt;TerminationCondition::CheckProcessing&gt;(terminationCondition.check)) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keyword">auto</span>&amp; <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a3a2fc3abf9432c8fb87a3871962852de">check</a> = std::get&lt;TerminationCondition::CheckProcessing&gt;(terminationCondition.check);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a> : inputs) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;              <span class="keyword">auto</span> iter = activeInputs.find(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>.spec-&gt;binding);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;              <span class="keyword">auto</span> [action, ready] = <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a3a2fc3abf9432c8fb87a3871962852de">check</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;              <span class="keywordflow">if</span> (action == <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#ae2cabd6d8ca3a9fdbbe48c76094068b4a243218b84b331e11bff42feaf040836f">TerminationCondition::Action::SkipProcessing</a>) {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                <span class="comment">// this condition tells us not to process the data any further</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                doProcessing = <span class="keyword">false</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;              }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;              <span class="keywordflow">if</span> (iter != activeInputs.end() &amp;&amp; ready) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <span class="comment">// this input is ready, remove from active inputs</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                activeInputs.erase(iter);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;              }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;          }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;          <span class="keywordflow">return</span> doProcessing;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        };</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="comment">// if the termination condition contains function of type CheckReady, this is checked</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="comment">// after the processing. All inputs marked &#39;ready&#39; are removed from the list of active inputs,</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="comment">// process treated as &#39;ready&#39; if no active inputs</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keyword">auto</span> checkReady = [&amp;terminationCondition, &amp;activeInputs](<span class="keyword">auto</span> <span class="keyword">const</span>&amp; inputs) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          <span class="keywordflow">if</span> (std::holds_alternative&lt;TerminationCondition::CheckReady&gt;(terminationCondition.check)) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keyword">auto</span>&amp; <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a3a2fc3abf9432c8fb87a3871962852de">check</a> = std::get&lt;TerminationCondition::CheckReady&gt;(terminationCondition.check);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a> : inputs) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;              <span class="keyword">auto</span> iter = activeInputs.find(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>.spec-&gt;binding);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;              <span class="keywordflow">if</span> (iter != activeInputs.end() &amp;&amp; <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a3a2fc3abf9432c8fb87a3871962852de">check</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>)) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="comment">// this input is ready, remove from active inputs</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                activeInputs.erase(iter);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;              }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;          }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          <span class="keywordflow">return</span> activeInputs.size() == 0;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        };</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span> (preprocessor) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;          preprocessor(pc);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (checkProcessing(pc.inputs())) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          (*writer)(pc.inputs());</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;          <a class="code" href="../../dc/da3/glcorearb_8h.html#afa228d201857b67afdee8292f4cb08a8">counter</a> = counter + 1;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="../../d7/d1b/test__Fifo_8cxx.html#ab99f79cb35f3010d34eaf50a2a90f28c">nEvents</a> &gt;= 0 &amp;&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#afa228d201857b67afdee8292f4cb08a8">counter</a> == <a class="code" href="../../d7/d1b/test__Fifo_8cxx.html#ab99f79cb35f3010d34eaf50a2a90f28c">nEvents</a>) || checkReady(pc.inputs())) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          writer-&gt;close();</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          pc.services().get&lt;<a class="code" href="../../d3/dab/classo2_1_1framework_1_1ControlService.html">ControlService</a>&gt;().readyToQuit(terminationPolicy == <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8a24f47cdbe9ddba774a7cc53e51d9032e">TerminationPolicy::Workflow</a> ? <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#abf67e94c1f8ed0cc9bd211f753812ad4ab1c94ca2fbc3e78fc30069c8d0f01680">QuitRequest::All</a> : <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#abf67e94c1f8ed0cc9bd211f753812ad4a318b2739ddc2c16c97b33c9b04b79f3e">QuitRequest::Me</a>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      };</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">return</span> processingFct;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    };</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#acda743ee0581ee4ad2f506fffe2cfc08">Options</a> options{</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="comment">// default options</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      {<span class="stringliteral">&quot;outfile&quot;</span>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98">VariantType::String</a>, mDefaultFileName.c_str(), {<span class="stringliteral">&quot;Name of the output file&quot;</span>}},</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      {<span class="stringliteral">&quot;treename&quot;</span>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98">VariantType::String</a>, mDefaultTreeName.c_str(), {<span class="stringliteral">&quot;Name of tree&quot;</span>}},</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      {<span class="stringliteral">&quot;nevents&quot;</span>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca1686a6c336b71b36d77354cea19a8b52">VariantType::Int</a>, mDefaultNofEvents, {<span class="stringliteral">&quot;Number of events to execute&quot;</span>}},</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      {<span class="stringliteral">&quot;terminate&quot;</span>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98">VariantType::String</a>, mDefaultTerminationPolicy.c_str(), {<span class="stringliteral">&quot;Terminate the &#39;process&#39; or &#39;workflow&#39;&quot;</span>}},</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    };</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> branchIndex = 0; branchIndex &lt; mBranchNameOptions.size(); branchIndex++) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="comment">// adding option definitions for those ones defined in the branch definition</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">if</span> (mBranchNameOptions[branchIndex].<a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a>.empty()) {</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      options.push_back(<a class="code" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>(mBranchNameOptions[branchIndex].<a class="code" href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a>.c_str(),  <span class="comment">// option key</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                        <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98">VariantType::String</a>,                            <span class="comment">// option argument type</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                        mBranchNameOptions[branchIndex].second.c_str(), <span class="comment">// default branch name</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                        {<span class="stringliteral">&quot;configurable branch name&quot;</span>}                    <span class="comment">// help message</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                                        ));</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    mInputRoutes.insert(mInputRoutes.end(), mInputs.begin(), mInputs.end());</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">DataProcessorSpec</a>{</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="comment">// processing spec generated from the class configuartion</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      mProcessName.c_str(),   <span class="comment">// name of the process</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      mInputRoutes,           <span class="comment">// list of inputs</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#af99101fa4f6d5dd76f39eb050f2b2d2a">Outputs</a>{},              <span class="comment">// no outputs</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <a class="code" href="../../d4/d5e/structo2_1_1framework_1_1AlgorithmSpec.html">AlgorithmSpec</a>(initFct), <span class="comment">// return the init function</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      std::move(options),     <span class="comment">// processor options</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    };</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> <a class="code" href="../../d4/d54/GPUReconstructionKernels_8h.html#ab0127665b2e65e79a1e2523951eb0dbd">N</a>, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordtype">void</span> parseConstructorArgs(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>, Args&amp;&amp;... args)</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    static_assert(N == 0, <span class="stringliteral">&quot;wrong argument order, default file and tree options must come before branch specs&quot;</span>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">// this can be called twice, the first time we set the default file name</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// and if we are here for a second time, we set the default tree name</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (mDefaultFileName.empty()) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      mDefaultFileName = <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      mDefaultTreeName = <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    parseConstructorArgs&lt;N&gt;(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> <a class="code" href="../../d4/d54/GPUReconstructionKernels_8h.html#ab0127665b2e65e79a1e2523951eb0dbd">N</a>, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordtype">void</span> parseConstructorArgs(<span class="keywordtype">int</span> arg, Args&amp;&amp;... args)</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    static_assert(N == 0, <span class="stringliteral">&quot;wrong argument order, default file and tree options must come before branch specs&quot;</span>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    mDefaultNofEvents = arg;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    parseConstructorArgs&lt;N&gt;(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> <a class="code" href="../../d4/d54/GPUReconstructionKernels_8h.html#ab0127665b2e65e79a1e2523951eb0dbd">N</a>, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordtype">void</span> parseConstructorArgs(<a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8">TerminationPolicy</a> arg, Args&amp;&amp;... args)</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    static_assert(N == 0, <span class="stringliteral">&quot;wrong argument order, default file and tree, and all options must come before branch specs&quot;</span>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; policy : TerminationPolicyMap) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">if</span> (policy.second == arg) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        mDefaultTerminationPolicy = policy.first;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">return</span> parseConstructorArgs&lt;N&gt;(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="comment">// here we only get if the enum and map definitions are inconsistent</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">throw</span> std::logic_error(<span class="stringliteral">&quot;Internal mismatch of policy ids and keys&quot;</span>);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> <a class="code" href="../../d4/d54/GPUReconstructionKernels_8h.html#ab0127665b2e65e79a1e2523951eb0dbd">N</a>, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordtype">void</span> parseConstructorArgs(<a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">TerminationCondition</a>&amp;&amp; arg, Args&amp;&amp;... args)</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    static_assert(N == 0, <span class="stringliteral">&quot;wrong argument order, default file and tree, and all options must come before branch specs&quot;</span>);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    mTerminationCondition = std::move(arg);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    parseConstructorArgs&lt;N&gt;(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> <a class="code" href="../../d4/d54/GPUReconstructionKernels_8h.html#ab0127665b2e65e79a1e2523951eb0dbd">N</a>, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordtype">void</span> parseConstructorArgs(<a class="code" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html">Preprocessor</a>&amp;&amp; arg, Args&amp;&amp;... args)</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    static_assert(N == 0, <span class="stringliteral">&quot;wrong argument order, default file and tree, and all options must come before branch specs&quot;</span>);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    mPreprocessor = std::move(arg);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    parseConstructorArgs&lt;N&gt;(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  }</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> <a class="code" href="../../d4/d54/GPUReconstructionKernels_8h.html#ab0127665b2e65e79a1e2523951eb0dbd">N</a>, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordtype">void</span> parseConstructorArgs(<a class="code" href="../../d4/d41/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute.html">AuxInputRoute</a>&amp;&amp; aux, Args&amp;&amp;... args)</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    mInputRoutes.emplace_back(aux);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    parseConstructorArgs&lt;N&gt;(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> <a class="code" href="../../d4/d54/GPUReconstructionKernels_8h.html#ab0127665b2e65e79a1e2523951eb0dbd">N</a>, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordtype">void</span> parseConstructorArgs(<a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ab6f276376ba126fb261148d7dbbcaa33">CustomClose</a>&amp;&amp; callback, Args&amp;&amp;... args)</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    mCustomClose = callback;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    parseConstructorArgs&lt;N&gt;(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> <a class="code" href="../../d4/d54/GPUReconstructionKernels_8h.html#ab0127665b2e65e79a1e2523951eb0dbd">N</a>, <span class="keyword">typename</span> <a class="code" href="../../d1/def/classT.html">T</a>, <span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordtype">void</span> parseConstructorArgs(<a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;T&gt;</a>&amp;&amp; <a class="code" href="../../d8/de9/qconfigoptions_8h.html#ac64ec43bdf1e32385e52082c0474861f">def</a>, Args&amp;&amp;... args)</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#ac64ec43bdf1e32385e52082c0474861f">def</a>.nofBranches &gt; 0) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="comment">// number of branches set to 0 will skip the definition, this allows to</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="comment">// dynamically disable branches, while all possible definitions can</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="comment">// be specified at compile time</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      mInputs.insert(mInputs.end(), <a class="code" href="../../d8/de9/qconfigoptions_8h.html#ac64ec43bdf1e32385e52082c0474861f">def</a>.keys.begin(), <a class="code" href="../../d8/de9/qconfigoptions_8h.html#ac64ec43bdf1e32385e52082c0474861f">def</a>.keys.end());</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      mBranchNameOptions.emplace_back(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#ac64ec43bdf1e32385e52082c0474861f">def</a>.optionKey, <a class="code" href="../../d8/de9/qconfigoptions_8h.html#ac64ec43bdf1e32385e52082c0474861f">def</a>.branchName);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      mNofBranches += <a class="code" href="../../d8/de9/qconfigoptions_8h.html#ac64ec43bdf1e32385e52082c0474861f">def</a>.nofBranches;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="comment">// insert an empty placeholder</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      mBranchNameOptions.emplace_back(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    parseConstructorArgs&lt;N + 1&gt;(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">if</span> constexpr (N == 0) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      mWriter = std::make_shared&lt;WriterType&gt;(<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, mCustomClose, std::forward&lt;BranchDefinition&lt;T&gt;&gt;(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#ac64ec43bdf1e32385e52082c0474861f">def</a>), std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// this terminates the argument parsing</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> N&gt;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordtype">void</span> parseConstructorArgs()</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  std::shared_ptr&lt;WriterType&gt; mWriter;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  std::string mProcessName;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  std::vector&lt;InputSpec&gt; mInputs;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  std::vector&lt;InputSpec&gt; mInputRoutes;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  std::vector&lt;std::pair&lt;std::string, std::string&gt;&gt; mBranchNameOptions;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  std::string mDefaultFileName;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  std::string mDefaultTreeName;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordtype">int</span> mDefaultNofEvents = -1;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  std::string mDefaultTerminationPolicy = <span class="stringliteral">&quot;process&quot;</span>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">TerminationCondition</a> mTerminationCondition;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <a class="code" href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html">Preprocessor</a> mPreprocessor;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordtype">size_t</span> mNofBranches = 0;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ab6f276376ba126fb261148d7dbbcaa33">CustomClose</a> mCustomClose;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;};</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;} <span class="comment">// namespace framework</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;} <span class="comment">// namespace o2</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="preprocessor">#endif // FRAMEWORK_MAKEROOTTREEWRITERSPEC_H</span></div><div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor_html_ab4b72d4885e643c4a34dadbb69abdfa6"><div class="ttname"><a href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#ab4b72d4885e643c4a34dadbb69abdfa6">o2::framework::MakeRootTreeWriterSpec::Preprocessor::Process</a></div><div class="ttdeci">std::function&lt; void(ProcessingContext &amp;)&gt; Process</div><div class="ttdoc">processing callback </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00228">MakeRootTreeWriterSpec.h:228</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1CallbackService_html"><div class="ttname"><a href="../../d5/db2/classo2_1_1framework_1_1CallbackService.html">o2::framework::CallbackService</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7f/CallbackService_8h_source.html#l00027">CallbackService.h:27</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a63df202498bbd53ffe4e22227effe5a0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a63df202498bbd53ffe4e22227effe5a0">first</a></div><div class="ttdeci">GLint first</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00399">glcorearb.h:399</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_a3a2fc3abf9432c8fb87a3871962852de"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a3a2fc3abf9432c8fb87a3871962852de">o2::framework::check</a></div><div class="ttdeci">void check(const std::vector&lt; std::string &gt; &amp;arguments, const std::vector&lt; ConfigParamSpec &gt; &amp;workflowOptions, const std::vector&lt; DeviceSpec &gt; &amp;deviceSpecs, CheckMatrix &amp;matrix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de8/test__DeviceSpecHelpers_8cxx_source.html#l00057">test_DeviceSpecHelpers.cxx:57</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html_ab6f276376ba126fb261148d7dbbcaa33"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ab6f276376ba126fb261148d7dbbcaa33">o2::framework::MakeRootTreeWriterSpec::CustomClose</a></div><div class="ttdeci">WriterType::CustomClose CustomClose</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00290">MakeRootTreeWriterSpec.h:290</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute_html"><div class="ttname"><a href="../../d4/d41/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute.html">o2::framework::MakeRootTreeWriterSpec::AuxInputRoute</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00281">MakeRootTreeWriterSpec.h:281</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1CallbackService_html_a366185062bc2dbfe04c2e37c641b8f1ba11a755d598c0c417f9a36758c3da7481"><div class="ttname"><a href="../../d5/db2/classo2_1_1framework_1_1CallbackService.html#a366185062bc2dbfe04c2e37c641b8f1ba11a755d598c0c417f9a36758c3da7481">o2::framework::CallbackService::Id::Stop</a></div></div>
<div class="ttc" id="namespaceo2_html"><div class="ttname"><a href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="ttdoc">information complementary to a CCDB object (path, metadata, startTimeValidity, endTimeValidity etc) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d24/BitstreamReader_8h_source.html#l00022">BitstreamReader.h:22</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98">o2::framework::VariantType::String</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition_html_adf6bf024bcd452685f38fb17ffa6fa29"><div class="ttname"><a href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#adf6bf024bcd452685f38fb17ffa6fa29">o2::framework::MakeRootTreeWriterSpec::TerminationCondition::CheckProcessing</a></div><div class="ttdeci">std::function&lt; std::tuple&lt; TerminationCondition::Action, bool &gt;(framework::DataRef const  &amp;)&gt; CheckProcessing</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00216">MakeRootTreeWriterSpec.h:216</a></div></div>
<div class="ttc" id="structProcessAttributes_html"><div class="ttname"><a href="../../df/d13/structProcessAttributes.html">ProcessAttributes</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/convertDigitsToRawZS_8cxx_source.html#l00055">convertDigitsToRawZS.cxx:55</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition_html_a6fa54707d1137cfed98e4f9339c31ffc"><div class="ttname"><a href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#a6fa54707d1137cfed98e4f9339c31ffc">o2::framework::MakeRootTreeWriterSpec::TerminationCondition::check</a></div><div class="ttdeci">std::variant&lt; std::monostate, CheckReady, CheckProcessing &gt; check</div><div class="ttdoc">the actual evaluator </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00223">MakeRootTreeWriterSpec.h:223</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html_a607d3a1c0411706e282366ccc982fbd6"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#a607d3a1c0411706e282366ccc982fbd6">o2::framework::MakeRootTreeWriterSpec::operator()</a></div><div class="ttdeci">DataProcessorSpec operator()()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00301">MakeRootTreeWriterSpec.h:301</a></div></div>
<div class="ttc" id="InputSpec_8h_html"><div class="ttname"><a href="../../d5/d3f/InputSpec_8h.html">InputSpec.h</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1ControlService_html"><div class="ttname"><a href="../../d3/dab/classo2_1_1framework_1_1ControlService.html">o2::framework::ControlService</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/ControlService_8h_source.html#l00028">ControlService.h:28</a></div></div>
<div class="ttc" id="GPUCommonLogger_8h_html_aea3d0edfe28fc0325c636b2b33f0527a"><div class="ttname"><a href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a></div><div class="ttdeci">#define LOG(type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5b/GPUCommonLogger_8h_source.html#l00028">GPUCommonLogger.h:28</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_ab8ee446f2ea693c249ce60995d55f75ca1686a6c336b71b36d77354cea19a8b52"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca1686a6c336b71b36d77354cea19a8b52">o2::framework::VariantType::Int</a></div></div>
<div class="ttc" id="test__Fifo_8cxx_html_ab99f79cb35f3010d34eaf50a2a90f28c"><div class="ttname"><a href="../../d7/d1b/test__Fifo_8cxx.html#ab99f79cb35f3010d34eaf50a2a90f28c">nEvents</a></div><div class="ttdeci">const int nEvents</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/test__Fifo_8cxx_source.html#l00026">test_Fifo.cxx:26</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition_html"><div class="ttname"><a href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">o2::framework::MakeRootTreeWriterSpec::TerminationCondition</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00203">MakeRootTreeWriterSpec.h:203</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d76/Cartesian3D_8h_source.html#l00229">Cartesian3D.h:229</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1DataProcessorSpec_html"><div class="ttname"><a href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">o2::framework::DataProcessorSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/DataProcessorSpec_8h_source.html#l00033">DataProcessorSpec.h:33</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5c4947d4516dd7cfa3505ce3a648a4ef"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a></div><div class="ttdeci">GLuint const GLchar * name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00781">glcorearb.h:781</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html_ac8b75fc47aef27722a90d610d28c2db8"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8">o2::framework::MakeRootTreeWriterSpec::TerminationPolicy</a></div><div class="ttdeci">TerminationPolicy</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00194">MakeRootTreeWriterSpec.h:194</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition_html"><div class="ttname"><a href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">o2::framework::MakeRootTreeWriterSpec::BranchDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00255">MakeRootTreeWriterSpec.h:255</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_acda743ee0581ee4ad2f506fffe2cfc08"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#acda743ee0581ee4ad2f506fffe2cfc08">o2::framework::Options</a></div><div class="ttdeci">std::vector&lt; ConfigParamSpec &gt; Options</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/DataProcessorSpec_8h_source.html#l00028">DataProcessorSpec.h:28</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html_ac8b75fc47aef27722a90d610d28c2db8a24f47cdbe9ddba774a7cc53e51d9032e"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8a24f47cdbe9ddba774a7cc53e51d9032e">o2::framework::MakeRootTreeWriterSpec::TerminationPolicy::Workflow</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor_html_a7daf0b9af07cf4878c6b9fa891fd86ed"><div class="ttname"><a href="../../d2/d5d/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor.html#a7daf0b9af07cf4878c6b9fa891fd86ed">o2::framework::MakeRootTreeWriterSpec::KeyExtractor::asString</a></div><div class="ttdeci">static std::string asString(InputSpec const &amp;arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00250">MakeRootTreeWriterSpec.h:250</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_aa1bc83c2f27c6427080c2ba02be21feb"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#aa1bc83c2f27c6427080c2ba02be21feb">bool</a></div><div class="ttdeci">bool</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00016">qconfigoptions.h:16</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1AlgorithmSpec_html"><div class="ttname"><a href="../../d4/d5e/structo2_1_1framework_1_1AlgorithmSpec.html">o2::framework::AlgorithmSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d14/AlgorithmSpec_8h_source.html#l00044">AlgorithmSpec.h:44</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1RootTreeWriter_html_a491e4ddf3c92c927b570e437fe611c5b"><div class="ttname"><a href="../../d1/df9/classo2_1_1framework_1_1RootTreeWriter.html#a491e4ddf3c92c927b570e437fe611c5b">o2::framework::RootTreeWriter::CustomClose</a></div><div class="ttdeci">std::function&lt; void(TFile *file, TTree *tree)&gt; CustomClose</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d8d/RootTreeWriter_8h_source.html#l00098">RootTreeWriter.h:98</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition_html_a52e9eecb97d44267e2b3452c168e84bf"><div class="ttname"><a href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#a52e9eecb97d44267e2b3452c168e84bf">o2::framework::MakeRootTreeWriterSpec::BranchDefinition::BranchDefinition</a></div><div class="ttdeci">BranchDefinition(KeyType key, std::string _branchName, std::string _optionKey, Args &amp;&amp;... args)</div><div class="ttdoc">constructor, all parameters are simply forwarded to base class </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00272">MakeRootTreeWriterSpec.h:272</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1ProcessingContext_html"><div class="ttname"><a href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">o2::framework::ProcessingContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6a/ProcessingContext_8h_source.html#l00023">ProcessingContext.h:23</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor_html"><div class="ttname"><a href="../../d2/d5d/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1KeyExtractor.html">o2::framework::MakeRootTreeWriterSpec::KeyExtractor</a></div><div class="ttdoc">unary helper functor to extract the input key from the InputSpec </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00249">MakeRootTreeWriterSpec.h:249</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html_af996a7b270035d4a61c878982ea9c07b"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#af996a7b270035d4a61c878982ea9c07b">o2::framework::MakeRootTreeWriterSpec::MakeRootTreeWriterSpec</a></div><div class="ttdeci">MakeRootTreeWriterSpec()=delete</div><div class="ttdoc">default constructor forbidden </div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute_html_a12df9df0546a57a34ecf289ded5c0329"><div class="ttname"><a href="../../d4/d41/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1AuxInputRoute.html#a12df9df0546a57a34ecf289ded5c0329">o2::framework::MakeRootTreeWriterSpec::AuxInputRoute::mSpec</a></div><div class="ttdeci">InputSpec mSpec</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00282">MakeRootTreeWriterSpec.h:282</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad32bdec748ba376f6c0d2df39ab9a95b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a></div><div class="ttdeci">GLint ref</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00291">glcorearb.h:291</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html_a4c07506acabf0f0a10ad85074108df05"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#a4c07506acabf0f0a10ad85074108df05">o2::framework::MakeRootTreeWriterSpec::MakeRootTreeWriterSpec</a></div><div class="ttdeci">MakeRootTreeWriterSpec(const char *processName, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00296">MakeRootTreeWriterSpec.h:296</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html">o2::framework::MakeRootTreeWriterSpec</a></div><div class="ttdoc">Generate a processor spec for the RootTreeWriter utility. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00190">MakeRootTreeWriterSpec.h:190</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor_html_a0d0b34d7b68819e50db44555e5f6a8ed"><div class="ttname"><a href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#a0d0b34d7b68819e50db44555e5f6a8ed">o2::framework::MakeRootTreeWriterSpec::Preprocessor::operator()</a></div><div class="ttdeci">void operator()(ProcessingContext &amp;context)</div><div class="ttdoc">execute the preprocessor </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00240">MakeRootTreeWriterSpec.h:240</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1InputSpec_html_a25e23e417b5d17858f7be127954a97b8"><div class="ttname"><a href="../../da/d96/structo2_1_1framework_1_1InputSpec.html#a25e23e417b5d17858f7be127954a97b8">o2::framework::InputSpec::binding</a></div><div class="ttdeci">std::string binding</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3f/InputSpec_8h_source.html#l00040">InputSpec.h:40</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1InitContext_html"><div class="ttname"><a href="../../d4/d07/classo2_1_1framework_1_1InitContext.html">o2::framework::InitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2b/InitContext_8h_source.html#l00021">InitContext.h:21</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1ConfigParamSpec_html"><div class="ttname"><a href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">o2::framework::ConfigParamSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/ConfigParamSpec_8h_source.html#l00032">ConfigParamSpec.h:32</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition_html_a1451bb4dff5ea166db85591a354fa19b"><div class="ttname"><a href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#a1451bb4dff5ea166db85591a354fa19b">o2::framework::MakeRootTreeWriterSpec::BranchDefinition::BranchDefinition</a></div><div class="ttdeci">BranchDefinition(KeyType &amp;&amp;key, std::string _branchName, std::string _optionKey=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00259">MakeRootTreeWriterSpec.h:259</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="../../d1/def/classT.html">T</a></div></div>
<div class="ttc" id="structAction_html"><div class="ttname"><a href="../../dd/db3/structAction.html">Action</a></div><div class="ttdoc">define the action to be done by the writer </div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor_html_a4122043b6221dc355927821990af183f"><div class="ttname"><a href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html#a4122043b6221dc355927821990af183f">o2::framework::MakeRootTreeWriterSpec::Preprocessor::callback</a></div><div class="ttdeci">std::variant&lt; std::monostate, Process &gt; callback</div><div class="ttdoc">the callback </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00231">MakeRootTreeWriterSpec.h:231</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition_html_ae2cabd6d8ca3a9fdbbe48c76094068b4a243218b84b331e11bff42feaf040836f"><div class="ttname"><a href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#ae2cabd6d8ca3a9fdbbe48c76094068b4a243218b84b331e11bff42feaf040836f">o2::framework::MakeRootTreeWriterSpec::TerminationCondition::Action::SkipProcessing</a></div><div class="ttdoc">skip processing of the input object </div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html_ac8b75fc47aef27722a90d610d28c2db8ab6ec7abeb6ae29cc35a4b47475e12afe"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ac8b75fc47aef27722a90d610d28c2db8ab6ec7abeb6ae29cc35a4b47475e12afe">o2::framework::MakeRootTreeWriterSpec::TerminationPolicy::Process</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition_html_af802bd388c713fc53e804c392391798f"><div class="ttname"><a href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html#af802bd388c713fc53e804c392391798f">o2::framework::MakeRootTreeWriterSpec::TerminationCondition::CheckReady</a></div><div class="ttdeci">std::function&lt; bool(o2::framework::DataRef const  &amp;)&gt; CheckReady</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00220">MakeRootTreeWriterSpec.h:220</a></div></div>
<div class="ttc" id="ConfigParamRegistry_8h_html"><div class="ttname"><a href="../../de/dc6/ConfigParamRegistry_8h.html">ConfigParamRegistry.h</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1RootTreeWriter_html"><div class="ttname"><a href="../../d1/df9/classo2_1_1framework_1_1RootTreeWriter.html">o2::framework::RootTreeWriter</a></div><div class="ttdoc">A generic writer interface for ROOT TTree objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d8d/RootTreeWriter_8h_source.html#l00085">RootTreeWriter.h:85</a></div></div>
<div class="ttc" id="glcorearb_8h_html_afa228d201857b67afdee8292f4cb08a8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#afa228d201857b67afdee8292f4cb08a8">counter</a></div><div class="ttdeci">GLuint counter</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l03987">glcorearb.h:3987</a></div></div>
<div class="ttc" id="CallbackService_8h_html"><div class="ttname"><a href="../../d9/d7f/CallbackService_8h.html">CallbackService.h</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_ac64ec43bdf1e32385e52082c0474861f"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#ac64ec43bdf1e32385e52082c0474861f">def</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events Simulate correct bunch interactions instead of placing only the average number of events A value [n] sets TFlen for [n] collisions in Number of bunches per train Number of bunch trains Instantaneous interaction rate Do not simulate border def(1)) AddOption(nTotalInTFEvents</div></div>
<div class="ttc" id="ControlService_8h_html"><div class="ttname"><a href="../../d2/d43/ControlService_8h.html">ControlService.h</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition_html_acccfa81b6423c9c2c388ea1ea7d5e894"><div class="ttname"><a href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html#acccfa81b6423c9c2c388ea1ea7d5e894">o2::framework::MakeRootTreeWriterSpec::BranchDefinition::BranchDefinition</a></div><div class="ttdeci">BranchDefinition(KeyType &amp;&amp;key, std::string _branchName, int _nofBranches, std::string _optionKey=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00266">MakeRootTreeWriterSpec.h:266</a></div></div>
<div class="ttc" id="RootTreeWriter_8h_html"><div class="ttname"><a href="../../dd/d8d/RootTreeWriter_8h.html">RootTreeWriter.h</a></div><div class="ttdoc">A generic writer for ROOT TTrees. </div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_abf67e94c1f8ed0cc9bd211f753812ad4a318b2739ddc2c16c97b33c9b04b79f3e"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#abf67e94c1f8ed0cc9bd211f753812ad4a318b2739ddc2c16c97b33c9b04b79f3e">o2::framework::QuitRequest::Me</a></div><div class="ttdoc">Only quit this data processor. </div></div>
<div class="ttc" id="structo2_1_1framework_1_1DataRef_html"><div class="ttname"><a href="../../d3/da6/structo2_1_1framework_1_1DataRef.html">o2::framework::DataRef</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfb/DataRef_8h_source.html#l00020">DataRef.h:20</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1RootTreeWriter_1_1BranchDef_html"><div class="ttname"><a href="../../d6/d72/structo2_1_1framework_1_1RootTreeWriter_1_1BranchDef.html">o2::framework::RootTreeWriter::BranchDef</a></div><div class="ttdoc">BranchDef is used to define the mapping between inputs and branches. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d8d/RootTreeWriter_8h_source.html#l00147">RootTreeWriter.h:147</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_abf67e94c1f8ed0cc9bd211f753812ad4ab1c94ca2fbc3e78fc30069c8d0f01680"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#abf67e94c1f8ed0cc9bd211f753812ad4ab1c94ca2fbc3e78fc30069c8d0f01680">o2::framework::QuitRequest::All</a></div><div class="ttdoc">Quit all data processor, regardless of their state. </div></div>
<div class="ttc" id="structo2_1_1framework_1_1InputSpec_html"><div class="ttname"><a href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">o2::framework::InputSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3f/InputSpec_8h_source.html#l00029">InputSpec.h:29</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor_html"><div class="ttname"><a href="../../db/dc0/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1Preprocessor.html">o2::framework::MakeRootTreeWriterSpec::Preprocessor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00226">MakeRootTreeWriterSpec.h:226</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_af99101fa4f6d5dd76f39eb050f2b2d2a"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#af99101fa4f6d5dd76f39eb050f2b2d2a">o2::framework::Outputs</a></div><div class="ttdeci">std::vector&lt; OutputSpec &gt; Outputs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/DataProcessorSpec_8h_source.html#l00027">DataProcessorSpec.h:27</a></div></div>
<div class="ttc" id="DataProcessorSpec_8h_html"><div class="ttname"><a href="../../d0/df4/DataProcessorSpec_8h.html">DataProcessorSpec.h</a></div></div>
<div class="ttc" id="GPUReconstructionKernels_8h_html_ab0127665b2e65e79a1e2523951eb0dbd"><div class="ttname"><a href="../../d4/d54/GPUReconstructionKernels_8h.html#ab0127665b2e65e79a1e2523951eb0dbd">N</a></div><div class="ttdeci">unsigned long size int mode int iSlice int iSlice char nOutput int int char useOrigTrackParam int char char mergeMode int N</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d54/GPUReconstructionKernels_8h_source.html#l00046">GPUReconstructionKernels.h:46</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html_ae1b2394b68627d9e54e9f5a588f00111"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html#ae1b2394b68627d9e54e9f5a588f00111">o2::framework::MakeRootTreeWriterSpec::TerminationPolicyMap</a></div><div class="ttdeci">const std::map&lt; std::string, TerminationPolicy &gt; TerminationPolicyMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00198">MakeRootTreeWriterSpec.h:198</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_bcbb2cf9a3d3d83e5515c82071a07177.html">Framework</a></li><li class="navelem"><a class="el" href="../../dir_86f64936653d09622c529b3cc7c8edcd.html">Utils</a></li><li class="navelem"><a class="el" href="../../dir_de9651cf711cd4bea71a7a8d6bfef94c.html">include</a></li><li class="navelem"><a class="el" href="../../dir_7aebe22961b46cd8502bbaccf48f2fdd.html">DPLUtils</a></li><li class="navelem"><a class="el" href="../../d5/dc8/MakeRootTreeWriterSpec_8h.html">MakeRootTreeWriterSpec.h</a></li>
    <li class="footer">Generated on Thu Jun 4 2020 09:30:33 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
