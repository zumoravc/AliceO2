<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/travis/build/AliceO2Group/AliceO2/Detectors/TPC/workflow/src/ZSSpec.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/dbc/ZSSpec_8cxx_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ZSSpec.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d2/dbc/ZSSpec_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright CERN and copyright holders of ALICE O2. This software is</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// distributed under the terms of the GNU General Public License v3 (GPL</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See http://alice-o2.web.cern.ch/license for full licensing information.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/da1/ZSSpec_8h.html">TPCWorkflow/ZSSpec.h</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/dcd/DataHeader_8h.html">Headers/DataHeader.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/da1/WorkflowSpec_8h.html">Framework/WorkflowSpec.h</a>&quot;</span> <span class="comment">// o2::framework::mergeInputs</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/db8/DataRefUtils_8h.html">Framework/DataRefUtils.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d68/DataSpecUtils_8h.html">Framework/DataSpecUtils.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d43/ControlService_8h.html">Framework/ControlService.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dc6/ConfigParamRegistry_8h.html">Framework/ConfigParamRegistry.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/db4/InputRecordWalker_8h.html">Framework/InputRecordWalker.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d09/TPCSectorHeader_8h.html">DataFormatsTPC/TPCSectorHeader.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d04/ZeroSuppression_8h.html">DataFormatsTPC/ZeroSuppression.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d7c/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Helpers_8h.html">DataFormatsTPC/Helpers.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d64/GPUCATracking_8h.html">TPCReconstruction/GPUCATracking.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d7d/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Digit_8h.html">DataFormatsTPC/Digit.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc5/GPUDataTypes_8h.html">GPUDataTypes.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d20/GPUHostDataTypes_8h.html">GPUHostDataTypes.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/de7/GPUO2InterfaceConfiguration_8h.html">GPUO2InterfaceConfiguration.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/dd6/Sector_8h.html">TPCBase/Sector.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d0c/Parser_8h.html">Algorithm/Parser.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;FairMQLogger.h&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span> <span class="comment">// for make_shared</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d13/GPUParam_8h.html">GPUParam.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/dfa/GPUReconstructionConvert_8h.html">GPUReconstructionConvert.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d08/RawFileWriter_8h.html">DetectorsRaw/RawFileWriter.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/dec/HBFUtils_8h.html">DetectorsRaw/HBFUtils.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/dec/Raw_2include_2DetectorsRaw_2RDHUtils_8h.html">DetectorsRaw/RDHUtils.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d0d/TPC_2base_2include_2TPCBase_2RDHUtils_8h.html">TPCBase/RDHUtils.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d86/ZeroSuppress_8h.html">TPCBase/ZeroSuppress.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/db9/DPLRawParser_8h.html">DPLUtils/DPLRawParser.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html">o2::framework</a>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../de/dd4/namespaceo2_1_1header.html">o2::header</a>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d0/db4/namespaceo2_1_1gpu.html">o2::gpu</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d0/d1f/namespaceo2_1_1base.html">o2::base</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">namespace </span>tpc</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d0/d0a/namespaceo2_1_1tpc.html#aeb9af0151c7770dafa6f85dd294652d3">   55</a></span>&#160;<a class="code" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">DataProcessorSpec</a> <a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#aeb9af0151c7770dafa6f85dd294652d3">getZSEncoderSpec</a>(std::vector&lt;int&gt; <span class="keyword">const</span>&amp; inputIds, <span class="keywordtype">bool</span> zs10bit, <span class="keywordtype">float</span> <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a2b8298cdaa115e10085952184e21fa2f">threshold</a> = 2.<a class="code" href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a>, <span class="keywordtype">bool</span> outRaw = <span class="keyword">false</span>)</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  std::string processorName = <span class="stringliteral">&quot;tpc-zsEncoder&quot;</span>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  constexpr <span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">NSectors</a> = <a class="code" href="../../d0/d0c/classo2_1_1tpc_1_1Sector.html#ac8b33b4c676a81bba75f8c3c5d4dc11e">o2::tpc::Sector::MAXSECTOR</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  constexpr <span class="keyword">static</span> <span class="keywordtype">size_t</span> NEndpoints = o2::gpu::GPUTrackingInOutZS::NENDPOINTS;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keyword">using</span> <a class="code" href="../../df/d6c/convertDigitsToRawZS_8cxx.html#a916fcf3a51816de2e63dda5b66a89d48">DigitArray</a> = std::array&lt;gsl::span&lt;const o2::tpc::Digit&gt;, <a class="code" href="../../d0/d0c/classo2_1_1tpc_1_1Sector.html#ac8b33b4c676a81bba75f8c3c5d4dc11e">o2::tpc::Sector::MAXSECTOR</a>&gt;;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../df/d13/structProcessAttributes.html">ProcessAttributes</a> {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    std::unique_ptr&lt;unsigned long long int[]&gt; zsoutput;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    std::vector&lt;unsigned int&gt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    std::unique_ptr&lt;o2::gpu::GPUReconstructionConvert&gt; zsEncoder;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    std::vector&lt;int&gt; inputIds;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordtype">bool</span> verify = <span class="keyword">false</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">int</span> verbosity = 1;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">bool</span> finished = <span class="keyword">false</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  };</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keyword">auto</span> initFunction = [inputIds, zs10bit, <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a2b8298cdaa115e10085952184e21fa2f">threshold</a>, outRaw](<a class="code" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html">InitContext</a>&amp; ic) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">auto</span> processAttributes = std::make_shared&lt;ProcessAttributes&gt;();</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">auto</span>&amp; zsEncoder = processAttributes-&gt;zsEncoder;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keyword">auto</span>&amp; zsoutput = processAttributes-&gt;zsoutput;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    processAttributes-&gt;inputIds = inputIds;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keyword">auto</span>&amp; verify = processAttributes-&gt;verify;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keyword">auto</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a> = processAttributes-&gt;sizes;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">auto</span>&amp; verbosity = processAttributes-&gt;verbosity;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">auto</span> processingFct = [processAttributes, zs10bit, <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a2b8298cdaa115e10085952184e21fa2f">threshold</a>, outRaw](</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                           <a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">ProcessingContext</a>&amp; pc) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">if</span> (processAttributes-&gt;finished) {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keyword">auto</span>&amp; zsEncoder = processAttributes-&gt;zsEncoder;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keyword">auto</span>&amp; zsoutput = processAttributes-&gt;zsoutput;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keyword">auto</span>&amp; verify = processAttributes-&gt;verify;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keyword">auto</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a> = processAttributes-&gt;sizes;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keyword">auto</span>&amp; verbosity = processAttributes-&gt;verbosity;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      std::array&lt;gsl::span&lt;const o2::tpc::Digit&gt;, NSectors&gt; inputDigits;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      GPUTrackingInOutDigits inDigitsGPU;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      GPUParam _GPUParam;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      _GPUParam.SetDefaults(5.00668);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keyword">const</span> GPUParam mGPUParam = _GPUParam;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordtype">int</span> operation = 0;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      std::vector&lt;InputSpec&gt; <a class="code" href="../../dc/da3/glcorearb_8h.html#ab0762b2c24f4aab7c062c0710f8a3788">filter</a> = {{<span class="stringliteral">&quot;check&quot;</span>, <a class="code" href="../../d7/d2b/structo2_1_1framework_1_1ConcreteDataTypeMatcher.html">ConcreteDataTypeMatcher</a>{<a class="code" href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">gDataOriginTPC</a>, <span class="stringliteral">&quot;DIGITS&quot;</span>}, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>}};</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a> : <a class="code" href="../../d8/d07/classo2_1_1framework_1_1InputRecordWalker.html">InputRecordWalker</a>(pc.inputs(), <a class="code" href="../../dc/da3/glcorearb_8h.html#ab0762b2c24f4aab7c062c0710f8a3788">filter</a>)) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span>* sectorHeader = DataRefUtils::getHeader&lt;o2::tpc::TPCSectorHeader*&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span> (sectorHeader == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;          <span class="comment">// FIXME: think about error policy</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(<a class="code" href="../../d1/df4/namespaceo2_1_1data__flow.html#a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;sector header missing on header stack&quot;</span>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;          <span class="keywordflow">return</span>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; sector = sectorHeader-&gt;sector();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="comment">// the TPCSectorHeader now allows to transport information for more than one sector,</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">// e.g. for transporting clusters in one single data block. Digits are however grouped</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="comment">// on sector level</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span> (sectorHeader-&gt;sector() &gt;= <a class="code" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">TPCSectorHeader::NSectors</a>) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Expecting data for single sectors&quot;</span>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        inputDigits[sector] = pc.inputs().get&lt;gsl::span&lt;o2::tpc::Digit&gt;&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;GOT SPAN FOR SECTOR &quot;</span> &lt;&lt; sector &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                  &lt;&lt; inputDigits[sector].size();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">NSectors</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        inDigitsGPU.tpcDigits[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = inputDigits[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].data();</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        inDigitsGPU.nTPCDigits[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = inputDigits[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].size();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a>.resize(NSectors * NEndpoints);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordtype">bool</span> zs12bit = !zs10bit;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <a class="code" href="../../d1/d21/structo2_1_1InteractionRecord.html">o2::InteractionRecord</a> ir = <a class="code" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#acd640717f419212c67fecff71d876d39">o2::raw::HBFUtils::Instance</a>().<a class="code" href="../../db/df3/structo2_1_1raw_1_1HBFUtils.html#a6f232b764d728ea807b7b11badf7625d">getFirstIR</a>();</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      zsEncoder-&gt;RunZSEncoder&lt;<a class="code" href="../../d1/d46/classo2_1_1tpc_1_1Digit.html">o2::tpc::Digit</a>, <a class="code" href="../../df/d6c/convertDigitsToRawZS_8cxx.html#a916fcf3a51816de2e63dda5b66a89d48">DigitArray</a>&gt;(inputDigits, &amp;zsoutput, <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a>.data(), <span class="keyword">nullptr</span>, &amp;ir, mGPUParam, zs12bit, verify, <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a2b8298cdaa115e10085952184e21fa2f">threshold</a>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <a class="code" href="../../d5/d1b/structo2_1_1tpc_1_1ZeroSuppressedContainer8kb.html">ZeroSuppressedContainer8kb</a>* page = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d5/d1b/structo2_1_1tpc_1_1ZeroSuppressedContainer8kb.html">ZeroSuppressedContainer8kb</a>*<span class="keyword">&gt;</span>(zsoutput.get());</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a8e8a78e36205bada4146dc581c95f82c">offset</a> = 0;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">NSectors</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pageSector = 0;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; NEndpoints; j++) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> * NEndpoints + j] != 0) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            pageSector += <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> * NEndpoints + j];</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        offset += pageSector;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="../../d4/da3/structo2_1_1tpc_1_1TPCSectorHeader.html">o2::tpc::TPCSectorHeader</a> sh{0};</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      gsl::span&lt;ZeroSuppressedContainer8kb&gt; outp(&amp;page[0], offset);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      pc.outputs().snapshot(<a class="code" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<a class="code" href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">gDataOriginTPC</a>, <span class="stringliteral">&quot;TPCZS&quot;</span>, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>, sh}, outp);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      pc.outputs().snapshot(<a class="code" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<a class="code" href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">gDataOriginTPC</a>, <span class="stringliteral">&quot;ZSSIZES&quot;</span>, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>, sh}, <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keywordflow">if</span> (outRaw) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">// ===| set up raw writer |===================================================</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="../../d0/d0d/classo2_1_1raw_1_1RawFileWriter.html">o2::raw::RawFileWriter</a> writer{<span class="stringliteral">&quot;TPC&quot;</span>}; <span class="comment">// to set the RDHv6.sourceID if V6 is used</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        uint32_t rdhV = 4;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        writer.<a class="code" href="../../d0/d0d/classo2_1_1raw_1_1RawFileWriter.html#a16c914adc5aa1926d953601eac0a2ed5">useRDHVersion</a>(rdhV);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        std::string outDir = <span class="stringliteral">&quot;./&quot;</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> defaultLink = rdh_utils::UserLogicLinkID;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">NSectors</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; NEndpoints; j++) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cruInSector = j / 2;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cruID = <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> * 10 + cruInSector;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d3/d5b/namespaceo2_1_1tpc_1_1rdh__utils.html#a42665a9cc0d8132098f2d36794d6923a">rdh_utils::FEEIDType</a> feeid = rdh_utils::getFEEID(cruID, j &amp; 1, defaultLink);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            writer.registerLink(feeid, cruID, defaultLink, j &amp; 1, <a class="code" href="../../dc/da3/glcorearb_8h.html#ae2d3db041c6004a67047659b42f73a44">fmt::format</a>(<span class="stringliteral">&quot;{}cru{}_{}.raw&quot;</span>, outDir, cruID, j &amp; 1));</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;          }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        zsEncoder-&gt;RunZSEncoder&lt;<a class="code" href="../../d1/d46/classo2_1_1tpc_1_1Digit.html">o2::tpc::Digit</a>&gt;(inputDigits, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, &amp;writer, &amp;ir, mGPUParam, zs12bit, <span class="keyword">false</span>, <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a2b8298cdaa115e10085952184e21fa2f">threshold</a>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        writer.writeConfFile(<span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;RAWDATA&quot;</span>, <a class="code" href="../../dc/da3/glcorearb_8h.html#ae2d3db041c6004a67047659b42f73a44">fmt::format</a>(<span class="stringliteral">&quot;{}tpcraw.cfg&quot;</span>, outDir));</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      zsoutput.reset(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a> = {};</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      inputDigits = {};</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    };</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> processingFct;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  };</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keyword">auto</span> createInputSpecs = [inputIds]() {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ae0fa8f5b8c413d923205bbe985f08602">Inputs</a> inputs;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">//    inputs.emplace_back(InputSpec{&quot;input&quot;, ConcreteDataTypeMatcher{gDataOriginTPC, &quot;DIGITS&quot;}, Lifetime::Timeframe});</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    inputs.emplace_back(<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;input&quot;</span>, <a class="code" href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">gDataOriginTPC</a>, <span class="stringliteral">&quot;DIGITS&quot;</span>, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>});</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">return</span> std::move(<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a9ef5348ee14533cea9aeadad2c14ae91">mergeInputs</a>(inputs, inputIds.size(),</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                 [inputIds](<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>&amp; input, <span class="keywordtype">size_t</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                   <span class="comment">// using unique input names for the moment but want to find</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                   <span class="comment">// an input-multiplicity-agnostic way of processing</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                   input.<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html#a25e23e417b5d17858f7be127954a97b8">binding</a> += std::to_string(inputIds[<a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>]);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                   <a class="code" href="../../d3/d7b/structo2_1_1framework_1_1DataSpecUtils.html#ac7d4c73f48b3ab9c413a7c04a896868a">DataSpecUtils::updateMatchingSubspec</a>(input, inputIds[index]);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                 }));</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> inputs;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  };</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keyword">auto</span> createOutputSpecs = []() {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    std::vector&lt;OutputSpec&gt; outputSpecs = {};</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="../../de/d1b/structo2_1_1framework_1_1OutputLabel.html">OutputLabel</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>{<span class="stringliteral">&quot;TPCZS&quot;</span>};</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    constexpr <a class="code" href="../../d9/db3/structo2_1_1header_1_1Descriptor.html">o2::header::DataDescription</a> datadesc(<span class="stringliteral">&quot;TPCZS&quot;</span>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="../../de/d1b/structo2_1_1framework_1_1OutputLabel.html">OutputLabel</a> label2{<span class="stringliteral">&quot;sizes&quot;</span>};</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    constexpr <a class="code" href="../../d9/db3/structo2_1_1header_1_1Descriptor.html">o2::header::DataDescription</a> datadesc2(<span class="stringliteral">&quot;ZSSIZES&quot;</span>);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    outputSpecs.emplace_back(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>, <a class="code" href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">gDataOriginTPC</a>, datadesc, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    outputSpecs.emplace_back(label2, <a class="code" href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">gDataOriginTPC</a>, datadesc2, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> std::move(outputSpecs);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  };</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">DataProcessorSpec</a>{<span class="stringliteral">&quot;tpc-zsEncoder&quot;</span>,</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                           {createInputSpecs()},</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                           {createOutputSpecs()},</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                           <a class="code" href="../../d4/d5e/structo2_1_1framework_1_1AlgorithmSpec.html">AlgorithmSpec</a>(initFunction)};</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;} <span class="comment">//spec end</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="../../d0/d0a/namespaceo2_1_1tpc.html#a97f59b5db534a2ab69f7efe8f7c0a25b">  202</a></span>&#160;<a class="code" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">DataProcessorSpec</a> <a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#a97f59b5db534a2ab69f7efe8f7c0a25b">getZStoDigitsSpec</a>(std::vector&lt;int&gt; <span class="keyword">const</span>&amp; inputIds)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  std::string processorName = <span class="stringliteral">&quot;tpc-zs-to-Digits&quot;</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  constexpr <span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">NSectors</a> = <a class="code" href="../../d0/d0c/classo2_1_1tpc_1_1Sector.html#ac8b33b4c676a81bba75f8c3c5d4dc11e">o2::tpc::Sector::MAXSECTOR</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  constexpr <span class="keyword">static</span> <span class="keywordtype">size_t</span> NEndpoints = o2::gpu::GPUTrackingInOutZS::NENDPOINTS;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../df/d13/structProcessAttributes.html">ProcessAttributes</a> {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    std::array&lt;std::vector&lt;Digit&gt;, NSectors&gt; outDigits;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    std::unique_ptr&lt;unsigned long long int[]&gt; zsinput;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    std::vector&lt;unsigned int&gt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    std::unique_ptr&lt;o2::tpc::ZeroSuppress&gt; decoder;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    std::vector&lt;int&gt; inputIds;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">bool</span> verify = <span class="keyword">false</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">int</span> verbosity = 1;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">bool</span> finished = <span class="keyword">false</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">void</span> sortDigits()</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="comment">// sort digits</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; digits : outDigits) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        std::sort(digits.begin(), digits.end(), [](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../dc/da3/glcorearb_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>.getTimeStamp() &lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>.getTimeStamp())</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <span class="keywordflow">if</span> ((<a class="code" href="../../dc/da3/glcorearb_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>.getTimeStamp() == <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>.getTimeStamp()) &amp;&amp; (<a class="code" href="../../dc/da3/glcorearb_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>.getRow() &lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>.getRow()))</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        });</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  };</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keyword">auto</span> initFunction = [inputIds](<a class="code" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html">InitContext</a>&amp; ic) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">auto</span> processAttributes = std::make_shared&lt;ProcessAttributes&gt;();</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    processAttributes-&gt;inputIds = inputIds;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">auto</span>&amp; outDigits = processAttributes-&gt;outDigits;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keyword">auto</span>&amp; decoder = processAttributes-&gt;decoder;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    decoder = std::make_unique&lt;o2::tpc::ZeroSuppress&gt;();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">auto</span>&amp; verbosity = processAttributes-&gt;verbosity;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keyword">auto</span> processingFct = [processAttributes](</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                           <a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">ProcessingContext</a>&amp; pc) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">if</span> (processAttributes-&gt;finished) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      std::array&lt;unsigned int, NEndpoints * NSectors&gt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      gsl::span&lt;const ZeroSuppressedContainer8kb&gt; inputZS;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      std::array&lt;gsl::span&lt;const ZeroSuppressedContainer8kb&gt;, NSectors&gt; inputZSSector;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keyword">auto</span>&amp; outDigits = processAttributes-&gt;outDigits;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keyword">auto</span>&amp; decoder = processAttributes-&gt;decoder;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keyword">auto</span>&amp; verbosity = processAttributes-&gt;verbosity;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> firstOrbit = 0;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">NSectors</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        outDigits[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].clear();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="../../d1/d21/structo2_1_1InteractionRecord.html">o2::InteractionRecord</a> ir = <a class="code" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#acd640717f419212c67fecff71d876d39">o2::raw::HBFUtils::Instance</a>().<a class="code" href="../../db/df3/structo2_1_1raw_1_1HBFUtils.html#a6f232b764d728ea807b7b11badf7625d">getFirstIR</a>();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      firstOrbit = ir.<a class="code" href="../../d1/d21/structo2_1_1InteractionRecord.html#a2b9e5a5520c4d6dfd8d8df796b50291a">orbit</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      std::vector&lt;InputSpec&gt; <a class="code" href="../../dc/da3/glcorearb_8h.html#ab0762b2c24f4aab7c062c0710f8a3788">filter</a> = {{<span class="stringliteral">&quot;check&quot;</span>, <a class="code" href="../../d7/d2b/structo2_1_1framework_1_1ConcreteDataTypeMatcher.html">ConcreteDataTypeMatcher</a>{<a class="code" href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">gDataOriginTPC</a>, <span class="stringliteral">&quot;RAWDATA&quot;</span>}, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>}};</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a> : <a class="code" href="../../d8/d07/classo2_1_1framework_1_1InputRecordWalker.html">InputRecordWalker</a>(pc.inputs(), <a class="code" href="../../dc/da3/glcorearb_8h.html#ab0762b2c24f4aab7c062c0710f8a3788">filter</a>)) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../db/d87/structo2_1_1header_1_1DataHeader.html">o2::header::DataHeader</a>* dh = DataRefUtils::getHeader&lt;o2::header::DataHeader*&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keyword">const</span> gsl::span&lt;const char&gt; raw = pc.inputs().<a class="code" href="../../d8/dbd/structo2_1_1header_1_1BaseHeader.html#a3f650296c52afea536c6ec9134b235f5">get</a>&lt;gsl::span&lt;char&gt;&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="../../d6/d55/classo2_1_1framework_1_1RawParser.html">o2::framework::RawParser</a> parser(raw.data(), raw.size());</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* ptr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a> = 0;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordtype">int</span> cruID = 0;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="../../d3/d5b/namespaceo2_1_1tpc_1_1rdh__utils.html#a42665a9cc0d8132098f2d36794d6923a">rdh_utils::FEEIDType</a> lastFEE = -1;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordtype">size_t</span> totalSize = 0;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = parser.begin(); it != parser.end(); it++) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* current = it.raw();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d8/d47/structo2_1_1header_1_1RAWDataHeaderV4.html">o2::header::RAWDataHeader</a>* rdh = (<span class="keyword">const</span> <a class="code" href="../../d8/d47/structo2_1_1header_1_1RAWDataHeaderV4.html">o2::header::RAWDataHeader</a>*)current;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          <span class="keywordflow">if</span> (current == <span class="keyword">nullptr</span> || it.size() == 0 || (current - ptr) % TPCZSHDR::TPC_ZS_PAGE_SIZE || o2::raw::RDHUtils::getFEEID(*rdh) != lastFEE) {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">if</span> (count) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;              <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sector = cruID / 10;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;              gsl::span&lt;const ZeroSuppressedContainer8kb&gt; z0in(reinterpret_cast&lt;const ZeroSuppressedContainer8kb*&gt;(ptr), count);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;              decoder-&gt;DecodeZSPages(&amp;z0in, &amp;outDigits[sector], firstOrbit);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            count = 0;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            lastFEE = o2::raw::RDHUtils::getFEEID(*rdh);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            cruID = <a class="code" href="../../d8/de9/qconfigoptions_8h.html#ad08a37964429d340d966dfa679443e8f">int</a>(rdh-&gt;<a class="code" href="../../d8/d47/structo2_1_1header_1_1RAWDataHeaderV4.html#a6a60bb796177863c67a8342731055c14">cruID</a>);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">if</span> (it.size() == 0) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;              ptr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            ptr = current;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;          count++;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">if</span> (count) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sector = cruID / 10;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;          gsl::span&lt;const ZeroSuppressedContainer8kb&gt; z0in(reinterpret_cast&lt;const ZeroSuppressedContainer8kb*&gt;(ptr), count);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;          decoder-&gt;DecodeZSPages(&amp;z0in, &amp;outDigits[sector], firstOrbit);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">NSectors</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;digits in sector &quot;</span> &lt;&lt; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; outDigits[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].size();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="../../d4/da3/structo2_1_1tpc_1_1TPCSectorHeader.html">o2::tpc::TPCSectorHeader</a> sh{<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>};</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        pc.outputs().snapshot(<a class="code" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<a class="code" href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">gDataOriginTPC</a>, <span class="stringliteral">&quot;DIGITS&quot;</span>, (<span class="keywordtype">unsigned</span> <a class="code" href="../../d8/de9/qconfigoptions_8h.html#ad08a37964429d340d966dfa679443e8f">int</a>)<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, Lifetime::Timeframe, sh}, outDigits[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    };</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> processingFct;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  };</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keyword">auto</span> createInputSpecs = []() {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ae0fa8f5b8c413d923205bbe985f08602">Inputs</a> inputs;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    inputs.emplace_back(<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;zsraw&quot;</span>, <a class="code" href="../../d7/d2b/structo2_1_1framework_1_1ConcreteDataTypeMatcher.html">ConcreteDataTypeMatcher</a>{<span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;RAWDATA&quot;</span>}, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>});</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">return</span> std::move(inputs);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  };</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keyword">auto</span> createOutputSpecs = []() {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    std::vector&lt;OutputSpec&gt; outputSpecs = {};</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="../../de/d1b/structo2_1_1framework_1_1OutputLabel.html">OutputLabel</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>{<span class="stringliteral">&quot;tpcdigits&quot;</span>};</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    constexpr <a class="code" href="../../d9/db3/structo2_1_1header_1_1Descriptor.html">o2::header::DataDescription</a> datadesc(<span class="stringliteral">&quot;DIGITS&quot;</span>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">NSectors</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      outputSpecs.emplace_back(<a class="code" href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">gDataOriginTPC</a>, <span class="stringliteral">&quot;DIGITS&quot;</span>, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> std::move(outputSpecs);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  };</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">DataProcessorSpec</a>{<span class="stringliteral">&quot;decode-zs-to-digits&quot;</span>,</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                           {createInputSpecs()},</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                           {createOutputSpecs()},</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                           <a class="code" href="../../d4/d5e/structo2_1_1framework_1_1AlgorithmSpec.html">AlgorithmSpec</a>(initFunction)};</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;} <span class="comment">// spec end</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;} <span class="comment">// namespace tpc</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;} <span class="comment">// namespace o2</span></div><div class="ttc" id="WorkflowSpec_8h_html"><div class="ttname"><a href="../../df/da1/WorkflowSpec_8h.html">WorkflowSpec.h</a></div></div>
<div class="ttc" id="namespaceo2_html"><div class="ttname"><a href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="ttdoc">information complementary to a CCDB object (path, metadata, startTimeValidity, endTimeValidity etc) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d24/BitstreamReader_8h_source.html#l00022">BitstreamReader.h:22</a></div></div>
<div class="ttc" id="GPUReconstructionConvert_8h_html"><div class="ttname"><a href="../../d1/dfa/GPUReconstructionConvert_8h.html">GPUReconstructionConvert.h</a></div></div>
<div class="ttc" id="structProcessAttributes_html"><div class="ttname"><a href="../../df/d13/structProcessAttributes.html">ProcessAttributes</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/convertDigitsToRawZS_8cxx_source.html#l00055">convertDigitsToRawZS.cxx:55</a></div></div>
<div class="ttc" id="GPUCommonLogger_8h_html_aea3d0edfe28fc0325c636b2b33f0527a"><div class="ttname"><a href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a></div><div class="ttdeci">#define LOG(type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5b/GPUCommonLogger_8h_source.html#l00028">GPUCommonLogger.h:28</a></div></div>
<div class="ttc" id="DataHeader_8h_html"><div class="ttname"><a href="../../dc/dcd/DataHeader_8h.html">DataHeader.h</a></div></div>
<div class="ttc" id="structo2_1_1header_1_1DataHeader_html"><div class="ttname"><a href="../../db/d87/structo2_1_1header_1_1DataHeader.html">o2::header::DataHeader</a></div><div class="ttdoc">the main header struct </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcd/DataHeader_8h_source.html#l00659">DataHeader.h:659</a></div></div>
<div class="ttc" id="structo2_1_1header_1_1Descriptor_html"><div class="ttname"><a href="../../d9/db3/structo2_1_1header_1_1Descriptor.html">o2::header::Descriptor&lt; gSizeDataDescriptionString, printDataDescription &gt;</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1ConcreteDataTypeMatcher_html"><div class="ttname"><a href="../../d7/d2b/structo2_1_1framework_1_1ConcreteDataTypeMatcher.html">o2::framework::ConcreteDataTypeMatcher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1b/ConcreteDataMatcher_8h_source.html#l00020">ConcreteDataMatcher.h:20</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1OutputLabel_html"><div class="ttname"><a href="../../de/d1b/structo2_1_1framework_1_1OutputLabel.html">o2::framework::OutputLabel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2d/OutputSpec_8h_source.html#l00022">OutputSpec.h:22</a></div></div>
<div class="ttc" id="structo2_1_1header_1_1RAWDataHeaderV4_html"><div class="ttname"><a href="../../d8/d47/structo2_1_1header_1_1RAWDataHeaderV4.html">o2::header::RAWDataHeaderV4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d78/DataFormats_2Headers_2include_2Headers_2RAWDataHeader_8h_source.html#l00285">RAWDataHeader.h:285</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac8729153468b5dcf13f971b21d84d4e5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a></div><div class="ttdeci">GLboolean GLboolean GLboolean GLboolean a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01233">glcorearb.h:1233</a></div></div>
<div class="ttc" id="namespaceo2_1_1data__flow_html_a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873"><div class="ttname"><a href="../../d1/df4/namespaceo2_1_1data__flow.html#a3a67fd76d9a0e56c332aebc06a41e8e8ad6e1b2dd08ee0161c09b9dffb4f99873">o2::data_flow::ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/TimeframeParser_8cxx_source.html#l00049">TimeframeParser.cxx:49</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1DataProcessorSpec_html"><div class="ttname"><a href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">o2::framework::DataProcessorSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/DataProcessorSpec_8h_source.html#l00033">DataProcessorSpec.h:33</a></div></div>
<div class="ttc" id="TPC_2base_2include_2TPCBase_2RDHUtils_8h_html"><div class="ttname"><a href="../../db/d0d/TPC_2base_2include_2TPCBase_2RDHUtils_8h.html">RDHUtils.h</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1InputRecordWalker_html"><div class="ttname"><a href="../../d8/d07/classo2_1_1framework_1_1InputRecordWalker.html">o2::framework::InputRecordWalker</a></div><div class="ttdoc">A helper class to iteratate over all parts of all input routes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db4/InputRecordWalker_8h_source.html#l00051">InputRecordWalker.h:51</a></div></div>
<div class="ttc" id="GPUDataTypes_8h_html"><div class="ttname"><a href="../../d4/dc5/GPUDataTypes_8h.html">GPUDataTypes.h</a></div></div>
<div class="ttc" id="Parser_8h_html"><div class="ttname"><a href="../../d6/d0c/Parser_8h.html">Parser.h</a></div><div class="ttdoc">Utilities for parsing of data sequences. </div></div>
<div class="ttc" id="ZeroSuppression_8h_html"><div class="ttname"><a href="../../dd/d04/ZeroSuppression_8h.html">ZeroSuppression.h</a></div><div class="ttdoc">Definitions of TPC Zero Suppression Data Headers. </div></div>
<div class="ttc" id="qconfigoptions_8h_html_ad08a37964429d340d966dfa679443e8f"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#ad08a37964429d340d966dfa679443e8f">int</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events int</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00025">qconfigoptions.h:25</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8e8a78e36205bada4146dc581c95f82c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8e8a78e36205bada4146dc581c95f82c">offset</a></div><div class="ttdeci">GLintptr offset</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00660">glcorearb.h:660</a></div></div>
<div class="ttc" id="namespaceo2_1_1header_html"><div class="ttname"><a href="../../de/dd4/namespaceo2_1_1header.html">o2::header</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d34/DAQID_8h_source.html#l00021">DAQID.h:21</a></div></div>
<div class="ttc" id="DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Digit_8h_html"><div class="ttname"><a href="../../d3/d7d/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Digit_8h.html">Digit.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html">o2::framework</a></div><div class="ttdoc">A header which contains some meta-data generated by Data Sampling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/DataFormats_2Detectors_2ITSMFT_2common_2include_2DataFormatsITSMFT_2Cluster_8h_source.html#l00198">Cluster.h:198</a></div></div>
<div class="ttc" id="structo2_1_1InteractionRecord_html_a2b9e5a5520c4d6dfd8d8df796b50291a"><div class="ttname"><a href="../../d1/d21/structo2_1_1InteractionRecord.html#a2b9e5a5520c4d6dfd8d8df796b50291a">o2::InteractionRecord::orbit</a></div><div class="ttdeci">uint32_t orbit</div><div class="ttdoc">LHC orbit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d80/InteractionRecord_8h_source.html#l00031">InteractionRecord.h:31</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_ae0fa8f5b8c413d923205bbe985f08602"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#ae0fa8f5b8c413d923205bbe985f08602">o2::framework::Inputs</a></div><div class="ttdeci">std::vector&lt; InputSpec &gt; Inputs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/DataProcessorSpec_8h_source.html#l00026">DataProcessorSpec.h:26</a></div></div>
<div class="ttc" id="GPUO2InterfaceConfiguration_8h_html"><div class="ttname"><a href="../../d8/de7/GPUO2InterfaceConfiguration_8h.html">GPUO2InterfaceConfiguration.h</a></div></div>
<div class="ttc" id="GPUParam_8h_html"><div class="ttname"><a href="../../df/d13/GPUParam_8h.html">GPUParam.h</a></div></div>
<div class="ttc" id="DataSpecUtils_8h_html"><div class="ttname"><a href="../../d6/d68/DataSpecUtils_8h.html">DataSpecUtils.h</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a1fe2b9d716f80da76adb19505d583dc1"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a1fe2b9d716f80da76adb19505d583dc1">f</a></div><div class="ttdeci">GLdouble f</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00310">glcorearb.h:310</a></div></div>
<div class="ttc" id="namespaceo2_1_1constants_1_1math_html_a0c4e106cb192dc65c6fd29e258f49e66"><div class="ttname"><a href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#a0c4e106cb192dc65c6fd29e258f49e66">o2::constants::math::NSectors</a></div><div class="ttdeci">constexpr int NSectors</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d84/MathConstants_8h_source.html#l00034">MathConstants.h:34</a></div></div>
<div class="ttc" id="structo2_1_1header_1_1BaseHeader_html_a3f650296c52afea536c6ec9134b235f5"><div class="ttname"><a href="../../d8/dbd/structo2_1_1header_1_1BaseHeader.html#a3f650296c52afea536c6ec9134b235f5">o2::header::BaseHeader::get</a></div><div class="ttdeci">static const BaseHeader * get(const o2::byte *b, size_t=0)</div><div class="ttdoc">access header in buffer </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcd/DataHeader_8h_source.html#l00448">DataHeader.h:448</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1AlgorithmSpec_html"><div class="ttname"><a href="../../d4/d5e/structo2_1_1framework_1_1AlgorithmSpec.html">o2::framework::AlgorithmSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d14/AlgorithmSpec_8h_source.html#l00044">AlgorithmSpec.h:44</a></div></div>
<div class="ttc" id="DataRefUtils_8h_html"><div class="ttname"><a href="../../d5/db8/DataRefUtils_8h.html">DataRefUtils.h</a></div></div>
<div class="ttc" id="classo2_1_1raw_1_1RawFileWriter_html"><div class="ttname"><a href="../../d0/d0d/classo2_1_1raw_1_1RawFileWriter.html">o2::raw::RawFileWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d08/RawFileWriter_8h_source.html#l00038">RawFileWriter.h:38</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1ProcessingContext_html"><div class="ttname"><a href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">o2::framework::ProcessingContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6a/ProcessingContext_8h_source.html#l00023">ProcessingContext.h:23</a></div></div>
<div class="ttc" id="structo2_1_1header_1_1RAWDataHeaderV4_html_a6a60bb796177863c67a8342731055c14"><div class="ttname"><a href="../../d8/d47/structo2_1_1header_1_1RAWDataHeaderV4.html#a6a60bb796177863c67a8342731055c14">o2::header::RAWDataHeaderV4::cruID</a></div><div class="ttdeci">uint16_t cruID</div><div class="ttdoc">bit 104 to 111: packet counter </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d78/DataFormats_2Headers_2include_2Headers_2RAWDataHeader_8h_source.html#l00310">RAWDataHeader.h:310</a></div></div>
<div class="ttc" id="namespaceo2_1_1gpu_html"><div class="ttname"><a href="../../d0/db4/namespaceo2_1_1gpu.html">o2::gpu</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dac/MatchTPCITS_8h_source.html#l00074">MatchTPCITS.h:74</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1DataSpecUtils_html_ac7d4c73f48b3ab9c413a7c04a896868a"><div class="ttname"><a href="../../d3/d7b/structo2_1_1framework_1_1DataSpecUtils.html#ac7d4c73f48b3ab9c413a7c04a896868a">o2::framework::DataSpecUtils::updateMatchingSubspec</a></div><div class="ttdeci">static void updateMatchingSubspec(InputSpec &amp;in, header::DataHeader::SubSpecificationType subSpec)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dab/DataSpecUtils_8cxx_source.html#l00135">DataSpecUtils.cxx:135</a></div></div>
<div class="ttc" id="ZeroSuppress_8h_html"><div class="ttname"><a href="../../db/d86/ZeroSuppress_8h.html">ZeroSuppress.h</a></div></div>
<div class="ttc" id="HBFUtils_8h_html"><div class="ttname"><a href="../../d1/dec/HBFUtils_8h.html">HBFUtils.h</a></div></div>
<div class="ttc" id="RawFileWriter_8h_html"><div class="ttname"><a href="../../da/d08/RawFileWriter_8h.html">RawFileWriter.h</a></div><div class="ttdoc">Utility class to write detectors data to (multiple) raw data file(s) respecting CRU format...</div></div>
<div class="ttc" id="glcorearb_8h_html_ad32bdec748ba376f6c0d2df39ab9a95b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a></div><div class="ttdeci">GLint ref</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00291">glcorearb.h:291</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9371a1f53f8067997cd15aaf657c62d0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a></div><div class="ttdeci">GLuint GLsizei const GLchar * label</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l02519">glcorearb.h:2519</a></div></div>
<div class="ttc" id="convertDigitsToRawZS_8cxx_html_a916fcf3a51816de2e63dda5b66a89d48"><div class="ttname"><a href="../../df/d6c/convertDigitsToRawZS_8cxx.html#a916fcf3a51816de2e63dda5b66a89d48">DigitArray</a></div><div class="ttdeci">std::array&lt; gsl::span&lt; const o2::tpc::Digit &gt;, Sector::MAXSECTOR &gt; DigitArray</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/convertDigitsToRawZS_8cxx_source.html#l00052">convertDigitsToRawZS.cxx:52</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1InputSpec_html_a25e23e417b5d17858f7be127954a97b8"><div class="ttname"><a href="../../da/d96/structo2_1_1framework_1_1InputSpec.html#a25e23e417b5d17858f7be127954a97b8">o2::framework::InputSpec::binding</a></div><div class="ttdeci">std::string binding</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3f/InputSpec_8h_source.html#l00040">InputSpec.h:40</a></div></div>
<div class="ttc" id="group__data__description__defines_html_ga530a1998b58f74c71aa806f189c6d360"><div class="ttname"><a href="../../d7/d9b/group__data__description__defines.html#ga530a1998b58f74c71aa806f189c6d360">o2::header::gDataOriginTPC</a></div><div class="ttdeci">constexpr o2::header::DataOrigin gDataOriginTPC</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcd/DataHeader_8h_source.html#l00632">DataHeader.h:632</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1InitContext_html"><div class="ttname"><a href="../../d4/d07/classo2_1_1framework_1_1InitContext.html">o2::framework::InitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2b/InitContext_8h_source.html#l00021">InitContext.h:21</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_html_a97f59b5db534a2ab69f7efe8f7c0a25b"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#a97f59b5db534a2ab69f7efe8f7c0a25b">o2::tpc::getZStoDigitsSpec</a></div><div class="ttdeci">framework::DataProcessorSpec getZStoDigitsSpec(std::vector&lt; int &gt; const &amp;inputIds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbc/ZSSpec_8cxx_source.html#l00202">ZSSpec.cxx:202</a></div></div>
<div class="ttc" id="classo2_1_1raw_1_1RawFileWriter_html_a16c914adc5aa1926d953601eac0a2ed5"><div class="ttname"><a href="../../d0/d0d/classo2_1_1raw_1_1RawFileWriter.html#a16c914adc5aa1926d953601eac0a2ed5">o2::raw::RawFileWriter::useRDHVersion</a></div><div class="ttdeci">void useRDHVersion(int v)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d08/RawFileWriter_8h_source.html#l00282">RawFileWriter.h:282</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">o2::framework::Lifetime::Timeframe</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_a9ef5348ee14533cea9aeadad2c14ae91"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a9ef5348ee14533cea9aeadad2c14ae91">o2::framework::mergeInputs</a></div><div class="ttdeci">Inputs mergeInputs(InputSpec original, size_t maxIndex, std::function&lt; void(InputSpec &amp;, size_t)&gt; amendCallback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d43/WorkflowSpec_8cxx_source.html#l00113">WorkflowSpec.cxx:113</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a6eba317e3cf44d6d26c04a5a8f197dcb"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a></div><div class="ttdeci">GLboolean GLboolean GLboolean b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01233">glcorearb.h:1233</a></div></div>
<div class="ttc" id="GPUCATracking_8h_html"><div class="ttname"><a href="../../d3/d64/GPUCATracking_8h.html">GPUCATracking.h</a></div><div class="ttdoc">Wrapper class for TPC CA Tracker algorithm. </div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1rdh__utils_html_a42665a9cc0d8132098f2d36794d6923a"><div class="ttname"><a href="../../d3/d5b/namespaceo2_1_1tpc_1_1rdh__utils.html#a42665a9cc0d8132098f2d36794d6923a">o2::tpc::rdh_utils::FEEIDType</a></div><div class="ttdeci">uint16_t FEEIDType</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0d/TPC_2base_2include_2TPCBase_2RDHUtils_8h_source.html#l00025">RDHUtils.h:25</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae2d3db041c6004a67047659b42f73a44"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae2d3db041c6004a67047659b42f73a44">format</a></div><div class="ttdeci">GLint GLint GLsizei GLint GLenum format</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00275">glcorearb.h:275</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_html_aeb9af0151c7770dafa6f85dd294652d3"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#aeb9af0151c7770dafa6f85dd294652d3">o2::tpc::getZSEncoderSpec</a></div><div class="ttdeci">framework::DataProcessorSpec getZSEncoderSpec(std::vector&lt; int &gt; const &amp;inputIds, bool zs12bit, float threshold, bool outRaw)</div><div class="ttdoc">create a processor spec </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbc/ZSSpec_8cxx_source.html#l00055">ZSSpec.cxx:55</a></div></div>
<div class="ttc" id="ConfigParamRegistry_8h_html"><div class="ttname"><a href="../../de/dc6/ConfigParamRegistry_8h.html">ConfigParamRegistry.h</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1Output_html"><div class="ttname"><a href="../../d1/dc1/structo2_1_1framework_1_1Output.html">o2::framework::Output</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/Output_8h_source.html#l00028">Output.h:28</a></div></div>
<div class="ttc" id="Sector_8h_html"><div class="ttname"><a href="../../d3/dd6/Sector_8h.html">Sector.h</a></div></div>
<div class="ttc" id="InputRecordWalker_8h_html"><div class="ttname"><a href="../../d1/db4/InputRecordWalker_8h.html">InputRecordWalker.h</a></div><div class="ttdoc">A helper class to iteratate over all parts of all input routes. </div></div>
<div class="ttc" id="ControlService_8h_html"><div class="ttname"><a href="../../d2/d43/ControlService_8h.html">ControlService.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1base_html"><div class="ttname"><a href="../../d0/d1f/namespaceo2_1_1base.html">o2::base</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d74/CachingTF1_8h_source.html#l00021">CachingTF1.h:21</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a57f14e05b1900f16a2da82ade47d0c6d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a></div><div class="ttdeci">GLuint index</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00781">glcorearb.h:781</a></div></div>
<div class="ttc" id="GPUHostDataTypes_8h_html"><div class="ttname"><a href="../../d6/d20/GPUHostDataTypes_8h.html">GPUHostDataTypes.h</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1RawParser_html"><div class="ttname"><a href="../../d6/d55/classo2_1_1framework_1_1RawParser.html">o2::framework::RawParser</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d22/RawParser_8h_source.html#l00351">RawParser.h:351</a></div></div>
<div class="ttc" id="structo2_1_1raw_1_1HBFUtils_html_a6f232b764d728ea807b7b11badf7625d"><div class="ttname"><a href="../../db/df3/structo2_1_1raw_1_1HBFUtils.html#a6f232b764d728ea807b7b11badf7625d">o2::raw::HBFUtils::getFirstIR</a></div><div class="ttdeci">IR getFirstIR() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dec/HBFUtils_8h_source.html#l00046">HBFUtils.h:46</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a47de6d08cc8a4fedb70ca3645aa6f72d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a47de6d08cc8a4fedb70ca3645aa6f72d">sizes</a></div><div class="ttdeci">GLuint GLsizei const GLuint const GLintptr const GLsizeiptr * sizes</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l02595">glcorearb.h:2595</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_a2b8298cdaa115e10085952184e21fa2f"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#a2b8298cdaa115e10085952184e21fa2f">threshold</a></div><div class="ttdeci">Run track merging Number of iterations to Number of iterations to Number of initial iterations excluded from const char Directory with events to Number of OMP threads to Show standalone event Enable tracking Run event generator Use way track fit Create OuterParam Process continuous timeframe data Factor to apply to all memory scalers Automatically register input memory buffers for the GPU Use FIFO realtime Trap on floating point exceptions Field strength of solenoid Bz in kGaus Override max time bin setting for continuous data with max time bin in time frame Apply Zero Suppression when loading digits and remove those below threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00163">qconfigoptions.h:163</a></div></div>
<div class="ttc" id="structo2_1_1InteractionRecord_html"><div class="ttname"><a href="../../d1/d21/structo2_1_1InteractionRecord.html">o2::InteractionRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d80/InteractionRecord_8h_source.html#l00024">InteractionRecord.h:24</a></div></div>
<div class="ttc" id="classo2_1_1tpc_1_1Sector_html_ac8b33b4c676a81bba75f8c3c5d4dc11e"><div class="ttname"><a href="../../d0/d0c/classo2_1_1tpc_1_1Sector.html#ac8b33b4c676a81bba75f8c3c5d4dc11e">o2::tpc::Sector::MAXSECTOR</a></div><div class="ttdeci">static constexpr int MAXSECTOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd6/Sector_8h_source.html#l00043">Sector.h:43</a></div></div>
<div class="ttc" id="DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Helpers_8h_html"><div class="ttname"><a href="../../d9/d7c/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Helpers_8h.html">Helpers.h</a></div></div>
<div class="ttc" id="TPCSectorHeader_8h_html"><div class="ttname"><a href="../../d3/d09/TPCSectorHeader_8h.html">TPCSectorHeader.h</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1InputSpec_html"><div class="ttname"><a href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">o2::framework::InputSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3f/InputSpec_8h_source.html#l00029">InputSpec.h:29</a></div></div>
<div class="ttc" id="GPUCommonAlgorithm_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00385">GPUCommonAlgorithm.h:385</a></div></div>
<div class="ttc" id="Raw_2include_2DetectorsRaw_2RDHUtils_8h_html"><div class="ttname"><a href="../../d6/dec/Raw_2include_2DetectorsRaw_2RDHUtils_8h.html">RDHUtils.h</a></div></div>
<div class="ttc" id="structo2_1_1tpc_1_1TPCSectorHeader_html"><div class="ttname"><a href="../../d4/da3/structo2_1_1tpc_1_1TPCSectorHeader.html">o2::tpc::TPCSectorHeader</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d09/TPCSectorHeader_8h_source.html#l00024">TPCSectorHeader.h:24</a></div></div>
<div class="ttc" id="structo2_1_1tpc_1_1ZeroSuppressedContainer8kb_html"><div class="ttname"><a href="../../d5/d1b/structo2_1_1tpc_1_1ZeroSuppressedContainer8kb.html">o2::tpc::ZeroSuppressedContainer8kb</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7c/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Helpers_8h_source.html#l00059">Helpers.h:59</a></div></div>
<div class="ttc" id="classo2_1_1conf_1_1ConfigurableParamHelper_html_acd640717f419212c67fecff71d876d39"><div class="ttname"><a href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#acd640717f419212c67fecff71d876d39">o2::conf::ConfigurableParamHelper&lt; HBFUtils &gt;::Instance</a></div><div class="ttdeci">static const HBFUtils &amp; Instance()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d6b/ConfigurableParamHelper_8h_source.html#l00073">ConfigurableParamHelper.h:73</a></div></div>
<div class="ttc" id="DPLRawParser_8h_html"><div class="ttname"><a href="../../d4/db9/DPLRawParser_8h.html">DPLRawParser.h</a></div><div class="ttdoc">A raw page parser for DPL input. </div></div>
<div class="ttc" id="classo2_1_1tpc_1_1Digit_html"><div class="ttname"><a href="../../d1/d46/classo2_1_1tpc_1_1Digit.html">o2::tpc::Digit</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d7d/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Digit_8h_source.html#l00034">Digit.h:34</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a31eafbeac9256b106b6acfd78f305200"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a></div><div class="ttdeci">GLint GLsizei count</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00399">glcorearb.h:399</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab0762b2c24f4aab7c062c0710f8a3788"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab0762b2c24f4aab7c062c0710f8a3788">filter</a></div><div class="ttdeci">GLint GLint GLint GLint GLint GLint GLint GLbitfield GLenum filter</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01308">glcorearb.h:1308</a></div></div>
<div class="ttc" id="ZSSpec_8h_html"><div class="ttname"><a href="../../db/da1/ZSSpec_8h.html">ZSSpec.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_051dca18e802f8e9474f2e30d29c04e0.html">Detectors</a></li><li class="navelem"><a class="el" href="../../dir_a597e8e061b11201a1dff411feb10d0b.html">TPC</a></li><li class="navelem"><a class="el" href="../../dir_9cc61f72f781098a662027b321784562.html">workflow</a></li><li class="navelem"><a class="el" href="../../dir_e9646061f272132c5cb2e771d1ee355f.html">src</a></li><li class="navelem"><a class="el" href="../../d2/dbc/ZSSpec_8cxx.html">ZSSpec.cxx</a></li>
    <li class="footer">Generated on Thu Jun 4 2020 09:30:31 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
