<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/travis/build/AliceO2Group/AliceO2/Common/Field/src/MagneticField.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/d78/MagneticField_8cxx_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MagneticField.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d2/d78/MagneticField_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright CERN and copyright holders of ALICE O2. This software is</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// distributed under the terms of the GNU General Public License v3 (GPL</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See http://alice-o2.web.cern.ch/license for full licensing information.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d4b/MagneticField_8h.html">Field/MagneticField.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;TFile.h&gt;</span>      <span class="comment">// for TFile</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;TPRegexp.h&gt;</span>   <span class="comment">// for TPRegexp</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;TSystem.h&gt;</span>    <span class="comment">// for TSystem, gSystem</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;FairLogger.h&quot;</span> <span class="comment">// for FairLogger</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;FairParamList.h&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;FairRun.h&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;FairRuntimeDb.h&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d2/d2e/namespaceo2_1_1field.html">o2::field</a>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<a class="code" href="../../d2/d78/MagneticField_8cxx.html#a74b875b1dfd7a1f5f21f30a2d7f56838">ClassImp</a>(<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html">MagneticField</a>);</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">const</span> Double_t MagneticField::sSolenoidToDipoleZ = -700.;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">const</span> UShort_t MagneticField::sPolarityConvention = <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa63bfafd408c24861e5b289f7b7ac8c97">MagneticField::kConvLHC</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ad10a16d53feef92eb78ed4789ba6fc0f">   64</a></span>&#160;<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ad10a16d53feef92eb78ed4789ba6fc0f">MagneticField::MagneticField</a>()</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  : <a class="code" href="../../dc/ddd/classFairField.html">FairField</a>(),</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    mMeasuredMap(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a>),</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    mFastField(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a>),</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    mMapType(<a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html">MagFieldParam</a>::k5kG),</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    mSolenoid(0),</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    mBeamType(<a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html">MagFieldParam</a>::kNoBeamField),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    mBeamEnergy(0),</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    mDefaultIntegration(0),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    mPrecisionInteg(0),</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    mMultipicativeFactorSolenoid(1.),</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    mMultipicativeFactorDipole(1.),</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    mMaxField(15),</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    mDipoleOnOffFlag(kFALSE),</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    mQuadrupoleGradient(0),</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    mDipoleField(0),</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    mCompensatorField2C(0),</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    mCompensatorField1A(0),</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    mCompensatorField2A(0),</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    mParameterNames(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">   * Default constructor</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  fType = 2; <span class="comment">// flag non-constant field</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a03249796642a62be8fb8242cc06b8f61">   91</a></span>&#160;<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ad10a16d53feef92eb78ed4789ba6fc0f">MagneticField::MagneticField</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* title, Double_t factorSol, Double_t factorDip,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                             <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7">MagFieldParam::BMap_t</a> maptype, <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122">MagFieldParam::BeamType_t</a> bt, Double_t be, Int_t integ,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                             Double_t fmax, <span class="keyword">const</span> std::string <a class="code" href="../../dc/da3/glcorearb_8h.html#ab25d8cd967ccbd19b630d7100ff8f67e">path</a>)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  : <a class="code" href="../../dc/ddd/classFairField.html">FairField</a>(name, title),</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    mMeasuredMap(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a>),</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    mFastField(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a>),</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    mMapType(maptype),</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    mSolenoid(0),</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    mBeamType(bt),</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    mBeamEnergy(be),</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    mDefaultIntegration(integ),</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    mPrecisionInteg(1),</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    mMultipicativeFactorSolenoid(factorSol),</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    mMultipicativeFactorDipole(factorDip),</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    mMaxField(fmax),</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    mDipoleOnOffFlag(factorDip == 0.),</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    mQuadrupoleGradient(0),</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    mDipoleField(0),</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    mCompensatorField2C(0),</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    mCompensatorField1A(0),</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    mCompensatorField2A(0),</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    mParameterNames(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">   * Constructor for human readable params</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a758e785a85f775aa57de775f4c55d2c4">setDataFileName</a>(path.c_str());</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aef1b1bb3a7505b6904302058c6af40d1">CreateField</a>();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#afe7714c9164be3045d779ad6b1e59ee0">  122</a></span>&#160;<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ad10a16d53feef92eb78ed4789ba6fc0f">MagneticField::MagneticField</a>(<span class="keyword">const</span> <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html">MagFieldParam</a>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a>)</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  : <a class="code" href="../../dc/ddd/classFairField.html">FairField</a>(param.GetName(), param.GetTitle()),</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    mMeasuredMap(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a>),</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    mFastField(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a>),</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    mMapType(param.GetMapType()),</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    mSolenoid(0),</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    mBeamType(param.GetBeamType()),</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    mBeamEnergy(param.GetBeamEnergy()),</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    mDefaultIntegration(param.GetDefInt()),</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    mPrecisionInteg(1),</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    mMultipicativeFactorSolenoid(param.GetFactorSol()), <span class="comment">// temporary</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    mMultipicativeFactorDipole(param.GetFactorDip()),   <span class="comment">// temporary</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    mMaxField(param.GetMaxField()),</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    mDipoleOnOffFlag(param.GetFactorDip() == 0.),</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    mQuadrupoleGradient(0),</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    mDipoleField(0),</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    mCompensatorField2C(0),</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    mCompensatorField1A(0),</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    mCompensatorField2A(0),</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    mParameterNames(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">   * Constructor for FairParam derived params</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a758e785a85f775aa57de775f4c55d2c4">setDataFileName</a>(param.<a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a25076d7b7d106e9cb1a66c5a2e4308bd">GetMapPath</a>());</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aef1b1bb3a7505b6904302058c6af40d1">CreateField</a>();</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aef1b1bb3a7505b6904302058c6af40d1">  151</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aef1b1bb3a7505b6904302058c6af40d1">MagneticField::CreateField</a>()</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">   * field initialization</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  fType = 2; <span class="comment">// flag non-constant field</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// does real creation of the field</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">if</span> (mDefaultIntegration &lt; 0 || mDefaultIntegration &gt; 2) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(WARNING) &lt;&lt; <span class="stringliteral">&quot;MagneticField::CreateField: Invalid magnetic field flag: &quot;</span> &lt;&lt; mDefaultIntegration</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;; Helix tracking chosen instead&quot;</span>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    mDefaultIntegration = 2;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">if</span> (mDefaultIntegration == 0)</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    mPrecisionInteg = 0;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">if</span> (mBeamEnergy &lt;= 0 &amp;&amp; mBeamType != <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a154e01fcb58f790792361a5c86006b16">MagFieldParam::kNoBeamField</a>) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (mBeamType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a3d5e40a558880110cdbcf2a0bf065288">MagFieldParam::kBeamTypepp</a>)</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      mBeamEnergy = 7000.; <span class="comment">// max proton energy</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mBeamType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a5ce57498f93415b0c624242d635e765b">MagFieldParam::kBeamTypeAA</a>)</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      mBeamEnergy = 2760; <span class="comment">// max PbPb energy</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mBeamType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a36d2b64337eb002faf75dc958deca3c1">MagFieldParam::kBeamTypepA</a> || mBeamType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122ad8f3c04de06e6520ea800efb657efcb0">MagFieldParam::kBeamTypeAp</a>)</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      mBeamEnergy = 2760; <span class="comment">// same rigitiy max PbPb energy</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;MagneticField::CreateField: Maximim possible beam energy for requested beam is assumed&quot;</span>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* parname = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span> (mMapType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7a183b09bed6a25df4e44316f906a83096">MagFieldParam::k2kG</a>) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    parname = mDipoleOnOffFlag ? <span class="stringliteral">&quot;Sol12_Dip0_Hole&quot;</span> : <span class="stringliteral">&quot;Sol12_Dip6_Hole&quot;</span>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mMapType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7aafb00d424ee7be21c6327d495d643169">MagFieldParam::k5kG</a>) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    parname = mDipoleOnOffFlag ? <span class="stringliteral">&quot;Sol30_Dip0_Hole&quot;</span> : <span class="stringliteral">&quot;Sol30_Dip6_Hole&quot;</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mMapType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7ab707abfae90cb18a20a514c108c9f32f">MagFieldParam::k5kGUniform</a>) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    parname = <span class="stringliteral">&quot;Sol30_Dip6_Uniform&quot;</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(FATAL) &lt;&lt; <span class="stringliteral">&quot;MagneticField::CreateField: Unknown field identifier &quot;</span> &lt;&lt; mMapType &lt;&lt; <span class="stringliteral">&quot; is requested\n&quot;</span>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ac8fc022f14a5042098c433916820dafa">setParameterName</a>(parname);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a5a8c2b72019dce8b95d64131e9e8153e">loadParameterization</a>();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#af8a6385085788cd37d9f0b0296873046">initializeMachineField</a>(mBeamType, mBeamEnergy);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a84402423a9889be551ef394b6c4b4ca1">setFactorSolenoid</a>(mMultipicativeFactorSolenoid);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab53b777598c4735425af2e91be330dc6">setFactorDipole</a>(mMultipicativeFactorDipole);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordtype">double</span> xyz[3] = {0., 0., 0.};</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  mSolenoid = <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a16d5316064da8e097310cb4e3f724b81">getBz</a>(xyz);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ace0f62cca2b2ebd9ee342078f6da1e9f">Print</a>(<span class="stringliteral">&quot;a&quot;</span>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a5a8c2b72019dce8b95d64131e9e8153e">  203</a></span>&#160;Bool_t <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a5a8c2b72019dce8b95d64131e9e8153e">MagneticField::loadParameterization</a>()</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">   * load parametrization for measured field</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">if</span> (mMeasuredMap) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(FATAL) &lt;&lt; <span class="stringliteral">&quot;MagneticField::loadParameterization: Field data &quot;</span> &lt;&lt; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a9a9ffced7bf074a56c9094b0806ab4f4">getParameterName</a>()</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; are already loaded from &quot;</span> &lt;&lt; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a726020e59f32ced5179c5f5dd9906e82">getDataFileName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* fname = gSystem-&gt;ExpandPathName(<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a726020e59f32ced5179c5f5dd9906e82">getDataFileName</a>());</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  TFile* <a class="code" href="../../d6/d13/standalone-cluster-dump-entropy-analysed_8cxx.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a> = TFile::Open(fname);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (!file) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(FATAL) &lt;&lt; <span class="stringliteral">&quot;MagneticField::loadParameterization: Failed to open magnetic field data file &quot;</span> &lt;&lt; fname &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  mMeasuredMap =</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    std::unique_ptr&lt;MagneticWrapperChebyshev&gt;(<span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../db/d53/classo2_1_1field_1_1MagneticWrapperChebyshev.html">MagneticWrapperChebyshev</a>*<span class="keyword">&gt;</span>(file-&gt;Get(<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a9a9ffced7bf074a56c9094b0806ab4f4">getParameterName</a>())));</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">if</span> (!mMeasuredMap) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(FATAL) &lt;&lt; <span class="stringliteral">&quot;MagneticField::loadParameterization: Did not find field &quot;</span> &lt;&lt; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a9a9ffced7bf074a56c9094b0806ab4f4">getParameterName</a>() &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; fname</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;%s\n&quot;</span>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  file-&gt;Close();</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keyword">delete</span> <a class="code" href="../../d6/d13/standalone-cluster-dump-entropy-analysed_8cxx.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">return</span> kTRUE;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab74d7ac9867c658096626607ad7e67e6">  230</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab74d7ac9867c658096626607ad7e67e6">MagneticField::Field</a>(<span class="keyword">const</span> Double_t* __restrict__ xyz, Double_t* __restrict__ <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>)</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">   * query field value at point</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">//  b[0]=b[1]=b[2]=0.0;</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (mFastField &amp;&amp; mFastField-&gt;Field(xyz, b))</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (mMeasuredMap &amp;&amp; xyz[2] &gt; mMeasuredMap-&gt;getMinZ() &amp;&amp; xyz[2] &lt; mMeasuredMap-&gt;getMaxZ()) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    mMeasuredMap-&gt;Field(xyz, b);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (xyz[2] &gt; sSolenoidToDipoleZ || mDipoleOnOffFlag) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 3; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>--;) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        b[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= mMultipicativeFactorSolenoid;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 3; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>--;) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        b[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= mMultipicativeFactorDipole;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a40df828f90c2167739ffba5f467dbea8">MachineField</a>(xyz, b);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a16d5316064da8e097310cb4e3f724b81">  256</a></span>&#160;Double_t <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a16d5316064da8e097310cb4e3f724b81">MagneticField::getBz</a>(<span class="keyword">const</span> Double_t* xyz)<span class="keyword"> const</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">   * query field Bz component at point</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (mFastField) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">double</span> bz = 0;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (mFastField-&gt;GetBz(xyz, bz))</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordflow">return</span> bz;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">if</span> (mMeasuredMap &amp;&amp; xyz[2] &gt; mMeasuredMap-&gt;getMinZ() &amp;&amp; xyz[2] &lt; mMeasuredMap-&gt;getMaxZ()) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">double</span> bz = mMeasuredMap-&gt;getBz(xyz);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">return</span> (xyz[2] &gt; sSolenoidToDipoleZ || mDipoleOnOffFlag) ? bz * mMultipicativeFactorSolenoid</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                                             : bz * mMultipicativeFactorDipole;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">return</span> 0.;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a82ef3806d5eb355a2fd0daaf5611cdef">  276</a></span>&#160;<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html">MagneticField</a>&amp; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a82ef3806d5eb355a2fd0daaf5611cdef">MagneticField::operator=</a>(<span class="keyword">const</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html">MagneticField</a>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">   * assignment operator</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">this</span> != &amp;src) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (src.mMeasuredMap) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      mMeasuredMap.reset(<span class="keyword">new</span> <a class="code" href="../../db/d53/classo2_1_1field_1_1MagneticWrapperChebyshev.html">MagneticWrapperChebyshev</a>(*src.<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a41e0c8a5048bfb52576705bf0f2816e3">getMeasuredMap</a>()));</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    SetName(src.GetName());</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    mSolenoid = src.mSolenoid;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    mBeamType = src.mBeamType;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    mBeamEnergy = src.mBeamEnergy;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    mDefaultIntegration = src.mDefaultIntegration;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    mPrecisionInteg = src.mPrecisionInteg;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    mMultipicativeFactorSolenoid = src.mMultipicativeFactorSolenoid;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    mMultipicativeFactorDipole = src.mMultipicativeFactorDipole;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    mMaxField = src.mMaxField;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    mDipoleOnOffFlag = src.mDipoleOnOffFlag;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    mParameterNames = src.mParameterNames;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    mFastField.reset(src.mFastField ? <span class="keyword">new</span> <a class="code" href="../../d9/dac/classo2_1_1field_1_1MagFieldFast.html">MagFieldFast</a>(*src.<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a13d25f65a8ca4b71d91e6645a5934c8f">getFastField</a>()) : <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#af8a6385085788cd37d9f0b0296873046">  302</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#af8a6385085788cd37d9f0b0296873046">MagneticField::initializeMachineField</a>(<a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122">MagFieldParam::BeamType_t</a> btype, Double_t benergy)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">if</span> (btype == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a154e01fcb58f790792361a5c86006b16">MagFieldParam::kNoBeamField</a>) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    mQuadrupoleGradient = mDipoleField = mCompensatorField2C = mCompensatorField1A = mCompensatorField2A = 0.;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordtype">double</span> rigScale = benergy / 7000.; <span class="comment">// scale according to ratio of E/Enominal</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// for ions assume PbPb (with energy provided per nucleon) and account for A/Z</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">if</span> (btype == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a5ce57498f93415b0c624242d635e765b">MagFieldParam::kBeamTypeAA</a> <span class="comment">/* || btype==kBeamTypepA || btype==kBeamTypeAp */</span>) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    rigScale *= 208. / 82.;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// Attention: in p-Pb the energy recorded in the GRP is the PROTON energy, no rigidity</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// rescaling is needed</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  mQuadrupoleGradient = 22.0002 * rigScale;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  mDipoleField = 37.8781 * rigScale;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">// SIDE C</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  mCompensatorField2C = -9.6980;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// SIDE A</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  mCompensatorField1A = -13.2247;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  mCompensatorField2A = 11.7905;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a40df828f90c2167739ffba5f467dbea8">  327</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a40df828f90c2167739ffba5f467dbea8">MagneticField::MachineField</a>(<span class="keyword">const</span> Double_t* __restrict__ <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, Double_t* __restrict__ <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>)<span class="keyword"> const</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// ---- This is the ZDC part</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// Compansators for Alice Muon Arm Dipole</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keyword">const</span> Double_t kBComp1CZ = 1075., kBComp1hDZ = 260. / 2., kBComp1SqR = 4.0 * 4.0;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keyword">const</span> Double_t kBComp2CZ = 2049., kBComp2hDZ = 153. / 2., kBComp2SqR = 4.5 * 4.5;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keyword">const</span> Double_t kTripQ1CZ = 2615., kTripQ1hDZ = 637. / 2., kTripQ1SqR = 3.5 * 3.5;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keyword">const</span> Double_t kTripQ2CZ = 3480., kTripQ2hDZ = 550. / 2., kTripQ2SqR = 3.5 * 3.5;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keyword">const</span> Double_t kTripQ3CZ = 4130., kTripQ3hDZ = 550. / 2., kTripQ3SqR = 3.5 * 3.5;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keyword">const</span> Double_t kTripQ4CZ = 5015., kTripQ4hDZ = 637. / 2., kTripQ4SqR = 3.5 * 3.5;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keyword">const</span> Double_t kDip1CZ = 6310.8, kDip1hDZ = 945. / 2., kDip1SqRC = 4.5 * 4.5, kDip1SqRA = 3.375 * 3.375;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keyword">const</span> Double_t kDip2CZ = 12640.3, kDip2hDZ = 945. / 2., kDip2SqRC = 4.5 * 4.5, kDip2SqRA = 3.75 * 3.75;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keyword">const</span> Double_t kDip2DXC = 9.7, kDip2DXA = 9.4;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordtype">double</span> rad2 = x[0] * x[0] + x[1] * x[1];</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  b[0] = b[1] = b[2] = 0;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// SIDE C</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">if</span> (x[2] &lt; 0.) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] + kBComp2CZ) &lt; kBComp2hDZ &amp;&amp; rad2 &lt; kBComp2SqR) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      b[0] = mCompensatorField2C * mMultipicativeFactorDipole;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] + kTripQ1CZ) &lt; kTripQ1hDZ &amp;&amp; rad2 &lt; kTripQ1SqR) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      b[0] = mQuadrupoleGradient * x[1];</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      b[1] = mQuadrupoleGradient * x[0];</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] + kTripQ2CZ) &lt; kTripQ2hDZ &amp;&amp; rad2 &lt; kTripQ2SqR) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      b[0] = -mQuadrupoleGradient * x[1];</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      b[1] = -mQuadrupoleGradient * x[0];</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] + kTripQ3CZ) &lt; kTripQ3hDZ &amp;&amp; rad2 &lt; kTripQ3SqR) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      b[0] = -mQuadrupoleGradient * x[1];</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      b[1] = -mQuadrupoleGradient * x[0];</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] + kTripQ4CZ) &lt; kTripQ4hDZ &amp;&amp; rad2 &lt; kTripQ4SqR) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      b[0] = mQuadrupoleGradient * x[1];</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      b[1] = mQuadrupoleGradient * x[0];</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] + kDip1CZ) &lt; kDip1hDZ &amp;&amp; rad2 &lt; kDip1SqRC) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      b[1] = mDipoleField;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] + kDip2CZ) &lt; kDip2hDZ &amp;&amp; rad2 &lt; kDip2SqRC) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordtype">double</span> dxabs = <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[0]) - kDip2DXC;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">if</span> ((dxabs * dxabs + x[1] * x[1]) &lt; kDip2SqRC) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        b[1] = -mDipoleField;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// SIDE A</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] - kBComp1CZ) &lt; kBComp1hDZ &amp;&amp; rad2 &lt; kBComp1SqR) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="comment">// Compensator magnet at z = 1075 m</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      b[0] = mCompensatorField1A * mMultipicativeFactorDipole;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] - kBComp2CZ) &lt; kBComp2hDZ &amp;&amp; rad2 &lt; kBComp2SqR) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      b[0] = mCompensatorField2A * mMultipicativeFactorDipole;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] - kTripQ1CZ) &lt; kTripQ1hDZ &amp;&amp; rad2 &lt; kTripQ1SqR) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      b[0] = -mQuadrupoleGradient * x[1];</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      b[1] = -mQuadrupoleGradient * x[0];</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] - kTripQ2CZ) &lt; kTripQ2hDZ &amp;&amp; rad2 &lt; kTripQ2SqR) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      b[0] = mQuadrupoleGradient * x[1];</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      b[1] = mQuadrupoleGradient * x[0];</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] - kTripQ3CZ) &lt; kTripQ3hDZ &amp;&amp; rad2 &lt; kTripQ3SqR) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      b[0] = mQuadrupoleGradient * x[1];</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      b[1] = mQuadrupoleGradient * x[0];</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] - kTripQ4CZ) &lt; kTripQ4hDZ &amp;&amp; rad2 &lt; kTripQ4SqR) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      b[0] = -mQuadrupoleGradient * x[1];</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      b[1] = -mQuadrupoleGradient * x[0];</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] - kDip1CZ) &lt; kDip1hDZ &amp;&amp; rad2 &lt; kDip1SqRA) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      b[1] = -mDipoleField;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[2] - kDip2CZ) &lt; kDip2hDZ &amp;&amp; rad2 &lt; kDip2SqRA) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordtype">double</span> dxabs = <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(x[0]) - kDip2DXA;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordflow">if</span> ((dxabs * dxabs + x[1] * x[1]) &lt; kDip2SqRA) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        b[1] = mDipoleField;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ac0279b52bb5552616753ccb0a8ac515a">  405</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ac0279b52bb5552616753ccb0a8ac515a">MagneticField::getTPCIntegral</a>(<span class="keyword">const</span> Double_t* xyz, Double_t* <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>)<span class="keyword"> const</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  b[0] = b[1] = b[2] = 0.0;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (mMeasuredMap) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    mMeasuredMap-&gt;getTPCIntegral(xyz, b);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 3; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>--;) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      b[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= mMultipicativeFactorSolenoid;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a6d0616395f5811459834850cd2ec0f60">  416</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a6d0616395f5811459834850cd2ec0f60">MagneticField::getTPCRatIntegral</a>(<span class="keyword">const</span> Double_t* xyz, Double_t* <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>)<span class="keyword"> const</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  b[0] = b[1] = b[2] = 0.0;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">if</span> (mMeasuredMap) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    mMeasuredMap-&gt;getTPCRatIntegral(xyz, b);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    b[2] /= 100;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a706d450d2813bfd66f471556a7a8d4eb">  425</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a706d450d2813bfd66f471556a7a8d4eb">MagneticField::getTPCIntegralCylindrical</a>(<span class="keyword">const</span> Double_t* rphiz, Double_t* <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>)<span class="keyword"> const</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  b[0] = b[1] = b[2] = 0.0;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">if</span> (mMeasuredMap) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    mMeasuredMap-&gt;getTPCIntegralCylindrical(rphiz, b);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 3; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>--;) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      b[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= mMultipicativeFactorSolenoid;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a2c6da44163c1a4da34635c6e9da1f4c3">  436</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a2c6da44163c1a4da34635c6e9da1f4c3">MagneticField::getTPCRatIntegralCylindrical</a>(<span class="keyword">const</span> Double_t* rphiz, Double_t* <a class="code" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>)<span class="keyword"> const</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  b[0] = b[1] = b[2] = 0.0;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">if</span> (mMeasuredMap) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    mMeasuredMap-&gt;getTPCRatIntegralCylindrical(rphiz, b);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    b[2] /= 100;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a84402423a9889be551ef394b6c4b4ca1">  445</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a84402423a9889be551ef394b6c4b4ca1">MagneticField::setFactorSolenoid</a>(<a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> fc)</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;{</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">switch</span> (sPolarityConvention) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa5ceeb3664c126d4540e00ddbc43e6382">kConvDCS2008</a>:</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      mMultipicativeFactorSolenoid = -fc;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa63bfafd408c24861e5b289f7b7ac8c97">kConvLHC</a>:</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      mMultipicativeFactorSolenoid = -fc;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      mMultipicativeFactorSolenoid = fc;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">break</span>; <span class="comment">// case kConvMap2005: mMultipicativeFactorSolenoid =  fc; break;</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> (mFastField)</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    mFastField-&gt;setFactorSol(<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab4ef0c8f0f12dafbde0c322f8dfb9a14">getFactorSolenoid</a>());</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab53b777598c4735425af2e91be330dc6">  462</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab53b777598c4735425af2e91be330dc6">MagneticField::setFactorDipole</a>(<a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> fc)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;{</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordflow">switch</span> (sPolarityConvention) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa5ceeb3664c126d4540e00ddbc43e6382">kConvDCS2008</a>:</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      mMultipicativeFactorDipole = fc;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa63bfafd408c24861e5b289f7b7ac8c97">kConvLHC</a>:</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      mMultipicativeFactorDipole = -fc;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      mMultipicativeFactorDipole = fc;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordflow">break</span>; <span class="comment">// case kConvMap2005: mMultipicativeFactorDipole =  fc; break;</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab4ef0c8f0f12dafbde0c322f8dfb9a14">  477</a></span>&#160;Double_t <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab4ef0c8f0f12dafbde0c322f8dfb9a14">MagneticField::getFactorSolenoid</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">switch</span> (sPolarityConvention) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa5ceeb3664c126d4540e00ddbc43e6382">kConvDCS2008</a>:</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">return</span> -mMultipicativeFactorSolenoid;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa63bfafd408c24861e5b289f7b7ac8c97">kConvLHC</a>:</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">return</span> -mMultipicativeFactorSolenoid;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">return</span> mMultipicativeFactorSolenoid; <span class="comment">//  case kConvMap2005: return  mMultipicativeFactorSolenoid;</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a18da5818857e14d23450e4d93b5cc270">  489</a></span>&#160;Double_t <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a18da5818857e14d23450e4d93b5cc270">MagneticField::getFactorDipole</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keywordflow">switch</span> (sPolarityConvention) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa5ceeb3664c126d4540e00ddbc43e6382">kConvDCS2008</a>:</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">return</span> mMultipicativeFactorDipole;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa63bfafd408c24861e5b289f7b7ac8c97">kConvLHC</a>:</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">return</span> -mMultipicativeFactorDipole;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keywordflow">return</span> mMultipicativeFactorDipole; <span class="comment">//  case kConvMap2005: return  mMultipicativeFactorDipole;</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aef9f97e673c5e1abeeb3cfebb2932c1b">  501</a></span>&#160;<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html">MagneticField</a>* <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aef9f97e673c5e1abeeb3cfebb2932c1b">MagneticField::createFieldMap</a>(<a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> l3Cur, <a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> diCur, Int_t convention, Bool_t uniform,</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                             <a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> beamenergy, <span class="keyword">const</span> Char_t* beamtype, <span class="keyword">const</span> std::string <a class="code" href="../../dc/da3/glcorearb_8h.html#ab25d8cd967ccbd19b630d7100ff8f67e">path</a>)</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;{</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> l3NominalCurrent1 = 30000.f; <span class="comment">// (A)</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> l3NominalCurrent2 = 12000.f; <span class="comment">// (A)</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> diNominalCurrent = 6000.f;   <span class="comment">// (A)</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> tolerance = 0.03; <span class="comment">// relative current tolerance</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> zero = 77.f;      <span class="comment">// &quot;zero&quot; current (A)</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7">MagFieldParam::BMap_t</a> map = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7aafb00d424ee7be21c6327d495d643169">MagFieldParam::k5kG</a>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordtype">double</span> sclL3, sclDip;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> l3Pol = l3Cur &gt; 0 ? 1 : -1;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="../../d9/d7d/classFloat__t.html">Float_t</a> diPol = diCur &gt; 0 ? 1 : -1;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  l3Cur = <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(l3Cur);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  diCur = <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>(diCur);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>((sclDip = diCur / diNominalCurrent) - 1.) &gt; tolerance &amp;&amp; !uniform) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (diCur &lt;= zero) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      sclDip = 0.; <span class="comment">// some small current.. -&gt; Dipole OFF</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(FATAL) &lt;&lt; <span class="stringliteral">&quot;MagneticField::createFieldMap: Wrong dipole current (&quot;</span> &lt;&lt; diCur &lt;&lt; <span class="stringliteral">&quot; A)!&quot;</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">if</span> (uniform) {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="comment">// special treatment of special MC with uniform mag field (normalized to 0.5 T)</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// no check for scaling/polarities are done</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    map = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7ab707abfae90cb18a20a514c108c9f32f">MagFieldParam::k5kGUniform</a>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    sclL3 = l3Cur / l3NominalCurrent1;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>((sclL3 = l3Cur / l3NominalCurrent1) - 1.) &lt; tolerance) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      map = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7aafb00d424ee7be21c6327d495d643169">MagFieldParam::k5kG</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">TMath::Abs</a>((sclL3 = l3Cur / l3NominalCurrent2) - 1.) &lt; tolerance) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      map = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7a183b09bed6a25df4e44316f906a83096">MagFieldParam::k2kG</a>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (l3Cur &lt;= zero &amp;&amp; diCur &lt;= zero) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      sclL3 = 0;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      sclDip = 0;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      map = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7ab707abfae90cb18a20a514c108c9f32f">MagFieldParam::k5kGUniform</a>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(FATAL) &lt;&lt; <span class="stringliteral">&quot;MagneticField::createFieldMap: Wrong L3 current (&quot;</span> &lt;&lt; l3Cur &lt;&lt; <span class="stringliteral">&quot;  A)!&quot;</span>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">if</span> (sclDip != 0 &amp;&amp; map != <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7ab707abfae90cb18a20a514c108c9f32f">MagFieldParam::k5kGUniform</a>) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">if</span> ((l3Cur &lt;= zero) ||</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        ((convention == <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa63bfafd408c24861e5b289f7b7ac8c97">kConvLHC</a> &amp;&amp; l3Pol != diPol) || (convention == <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa5ceeb3664c126d4540e00ddbc43e6382">kConvDCS2008</a> &amp;&amp; l3Pol == diPol))) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(FATAL) &lt;&lt; <span class="stringliteral">&quot;MagneticField::createFieldMap: Wrong combination for L3/Dipole polarities (&quot;</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                 &lt;&lt; (l3Pol &gt; 0 ? <span class="charliteral">&#39;+&#39;</span> : <span class="charliteral">&#39;-&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; (diPol &gt; 0 ? <span class="charliteral">&#39;+&#39;</span> : <span class="charliteral">&#39;-&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;) for convention &quot;</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                 &lt;&lt; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab6da9c9b74c7350cfee4507280c34364">getPolarityConvention</a>();</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">if</span> (l3Pol &lt; 0) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    sclL3 = -sclL3;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> (diPol &lt; 0) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    sclDip = -sclDip;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122">MagFieldParam::BeamType_t</a> btype = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a154e01fcb58f790792361a5c86006b16">MagFieldParam::kNoBeamField</a>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  TString btypestr = beamtype;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  btypestr.ToLower();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  TPRegexp protonBeam(R<span class="stringliteral">&quot;((proton|p)\s*-?\s*\1)&quot;);</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="stringliteral">  TPRegexp ionBeam(R</span><span class="stringliteral">&quot;((lead|pb|ion|a|A)\s*-?\s*\1)&quot;);</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="stringliteral">  TPRegexp protonionBeam(R</span><span class="stringliteral">&quot;((proton|p)\s*-?\s*(lead|pb|ion|a|A))&quot;);</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="stringliteral">  TPRegexp ionprotonBeam(R</span><span class="stringliteral">&quot;((lead|pb|ion|a|A)\s*-?\s*(proton|p))&quot;);</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="stringliteral">  </span><span class="keywordflow">if</span> (btypestr.Contains(ionBeam)) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    btype = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a5ce57498f93415b0c624242d635e765b">MagFieldParam::kBeamTypeAA</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (btypestr.Contains(protonBeam)) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    btype = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a3d5e40a558880110cdbcf2a0bf065288">MagFieldParam::kBeamTypepp</a>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (btypestr.Contains(protonionBeam)) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    btype = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a36d2b64337eb002faf75dc958deca3c1">MagFieldParam::kBeamTypepA</a>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (btypestr.Contains(ionprotonBeam)) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    btype = <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122ad8f3c04de06e6520ea800efb657efcb0">MagFieldParam::kBeamTypeAp</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;Assume no LHC magnet field for the beam type &quot;</span> &lt;&lt; beamtype;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordtype">char</span> ttl[80];</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  snprintf(ttl, 79, <span class="stringliteral">&quot;L3: %+5d Dip: %+4d kA; %s | Polarities in %s convention&quot;</span>, (<span class="keywordtype">int</span>)TMath::Sign(l3Cur, <span class="keywordtype">float</span>(sclL3)),</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;           (<span class="keywordtype">int</span>)TMath::Sign(diCur, <span class="keywordtype">float</span>(sclDip)), uniform ? <span class="stringliteral">&quot; Constant&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;           convention == <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa63bfafd408c24861e5b289f7b7ac8c97">kConvLHC</a> ? <span class="stringliteral">&quot;LHC&quot;</span> : <span class="stringliteral">&quot;DCS2008&quot;</span>);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// LHC and DCS08 conventions have opposite dipole polarities</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab6da9c9b74c7350cfee4507280c34364">getPolarityConvention</a>() != convention) {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    sclDip = -sclDip;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ad10a16d53feef92eb78ed4789ba6fc0f">MagneticField</a>(<span class="stringliteral">&quot;MagneticFieldMap&quot;</span>, ttl, sclL3, sclDip, map, btype, beamenergy, 2, 10., path);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;}</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a54543143ef4b3f339d87653e55a7ffde">  593</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a54543143ef4b3f339d87653e55a7ffde">MagneticField::getBeamTypeText</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* beamNA = <span class="stringliteral">&quot;No Beam&quot;</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* beamPP = <span class="stringliteral">&quot;p-p&quot;</span>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* beamPbPb = <span class="stringliteral">&quot;A-A&quot;</span>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* beamPPb = <span class="stringliteral">&quot;p-A&quot;</span>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* beamPbP = <span class="stringliteral">&quot;A-p&quot;</span>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">switch</span> (mBeamType) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a3d5e40a558880110cdbcf2a0bf065288">MagFieldParam::kBeamTypepp</a>:</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">return</span> beamPP;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a5ce57498f93415b0c624242d635e765b">MagFieldParam::kBeamTypeAA</a>:</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">return</span> beamPbPb;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a36d2b64337eb002faf75dc958deca3c1">MagFieldParam::kBeamTypepA</a>:</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">return</span> beamPPb;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122ad8f3c04de06e6520ea800efb657efcb0">MagFieldParam::kBeamTypeAp</a>:</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">return</span> beamPbP;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a154e01fcb58f790792361a5c86006b16">MagFieldParam::kNoBeamField</a>:</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">return</span> beamNA;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ace0f62cca2b2ebd9ee342078f6da1e9f">  615</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ace0f62cca2b2ebd9ee342078f6da1e9f">MagneticField::Print</a>(Option_t* opt)<span class="keyword"> const</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  TString opts = opt;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  opts.ToLower();</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;MagneticField::Print: &quot;</span> &lt;&lt; GetName() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; GetTitle();</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;MagneticField::Print: Solenoid (&quot;</span> &lt;&lt; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab4ef0c8f0f12dafbde0c322f8dfb9a14">getFactorSolenoid</a>() &lt;&lt; <span class="stringliteral">&quot;*)&quot;</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            &lt;&lt; ((mMapType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7aafb00d424ee7be21c6327d495d643169">MagFieldParam::k5kG</a> || mMapType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7ab707abfae90cb18a20a514c108c9f32f">MagFieldParam::k5kGUniform</a>) ? 5. : 2) &lt;&lt; <span class="stringliteral">&quot; kG, Dipole &quot;</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            &lt;&lt; (mDipoleOnOffFlag ? <span class="stringliteral">&quot;OFF&quot;</span> : <span class="stringliteral">&quot;ON&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a18da5818857e14d23450e4d93b5cc270">getFactorDipole</a>() &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            &lt;&lt; (mMapType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7ab707abfae90cb18a20a514c108c9f32f">MagFieldParam::k5kGUniform</a> ? <span class="stringliteral">&quot; |Constant Field!&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordflow">if</span> (opts.Contains(<span class="stringliteral">&quot;a&quot;</span>)) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;MagneticField::Print: Machine B fields for &quot;</span> &lt;&lt; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a54543143ef4b3f339d87653e55a7ffde">getBeamTypeText</a>() &lt;&lt; <span class="stringliteral">&quot;  beam (&quot;</span> &lt;&lt; mBeamEnergy</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; GeV): QGrad: &quot;</span> &lt;&lt; mQuadrupoleGradient &lt;&lt; <span class="stringliteral">&quot; Dipole: &quot;</span> &lt;&lt; mDipoleField;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;MagneticField::Print: Uses &quot;</span> &lt;&lt; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a9a9ffced7bf074a56c9094b0806ab4f4">getParameterName</a>() &lt;&lt; <span class="stringliteral">&quot;  of &quot;</span> &lt;&lt; <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a726020e59f32ced5179c5f5dd9906e82">getDataFileName</a>();</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aaec98a2c34ffeb7f96a8fc9be8a99824">  631</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aaec98a2c34ffeb7f96a8fc9be8a99824">MagneticField::FillParContainer</a>()</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;{</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// fill field parameters</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  FairRun* fRun = FairRun::Instance();</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  FairRuntimeDb* rtdb = fRun-&gt;GetRuntimeDb();</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html">MagFieldParam</a>* par = <span class="keyword">static_cast&lt;</span><a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html">MagFieldParam</a>*<span class="keyword">&gt;</span>(rtdb-&gt;getContainer(<span class="stringliteral">&quot;MagFieldParam&quot;</span>));</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  par-&gt;<a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#acf6fc64dcefe302f8db94ef58c32bb15">SetParam</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  par-&gt;setChanged();</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">//_____________________________________________________________________________</span></div><div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a90b638c7739a9d39f9d211d91dffa0ee">  642</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a90b638c7739a9d39f9d211d91dffa0ee">MagneticField::AllowFastField</a>(<span class="keywordtype">bool</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;{</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">if</span> (v) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (!mFastField)</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      mFastField = std::make_unique&lt;MagFieldFast&gt;(<a class="code" href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab4ef0c8f0f12dafbde0c322f8dfb9a14">getFactorSolenoid</a>(), mMapType == <a class="code" href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7a183b09bed6a25df4e44316f906a83096">MagFieldParam::k2kG</a> ? 2 : 5);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    mFastField.reset(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div><div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a18da5818857e14d23450e4d93b5cc270"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a18da5818857e14d23450e4d93b5cc270">o2::field::MagneticField::getFactorDipole</a></div><div class="ttdeci">Double_t getFactorDipole() const</div><div class="ttdoc">Return the sign*scale of the current in the Dipole according to sPolarityConventionthe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00489">MagneticField.cxx:489</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a9a9ffced7bf074a56c9094b0806ab4f4"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a9a9ffced7bf074a56c9094b0806ab4f4">o2::field::MagneticField::getParameterName</a></div><div class="ttdeci">Char_t * getParameterName() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00179">MagneticField.h:179</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_ac090de95840268977a1ce46969bc9122ad8f3c04de06e6520ea800efb657efcb0"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122ad8f3c04de06e6520ea800efb657efcb0">o2::field::MagFieldParam::kBeamTypeAp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00044">MagFieldParam.h:44</a></div></div>
<div class="ttc" id="MagneticField_8cxx_html_a74b875b1dfd7a1f5f21f30a2d7f56838"><div class="ttname"><a href="../../d2/d78/MagneticField_8cxx.html#a74b875b1dfd7a1f5f21f30a2d7f56838">ClassImp</a></div><div class="ttdeci">ClassImp(MagneticField)</div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_ab6da9c9b74c7350cfee4507280c34364"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab6da9c9b74c7350cfee4507280c34364">o2::field::MagneticField::getPolarityConvention</a></div><div class="ttdeci">static Int_t getPolarityConvention()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00190">MagneticField.h:190</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a643c92238c3535a7614fbb22d0dd870fa63bfafd408c24861e5b289f7b7ac8c97"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa63bfafd408c24861e5b289f7b7ac8c97">o2::field::MagneticField::kConvLHC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00048">MagneticField.h:48</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac7c896d55e93a6cf7ff8524005b4e7b4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a></div><div class="ttdeci">GLenum GLfloat param</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00271">glcorearb.h:271</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_a4e97b838ac96d726227da91ec35a9650"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events Simulate correct bunch interactions instead of placing only the average number of events A value [n] sets TFlen for [n] collisions in Number of bunches per train Number of bunch trains Instantaneous interaction rate Do not simulate border Total number of collisions to be placed in the interior of all time Do not select random but walk over array of events in stride steps h QA settings const char Legend entries for data from comparison histogram files const char nullptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00044">qconfigoptions.h:44</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a726020e59f32ced5179c5f5dd9906e82"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a726020e59f32ced5179c5f5dd9906e82">o2::field::MagneticField::getDataFileName</a></div><div class="ttdeci">Char_t * getDataFileName() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00177">MagneticField.h:177</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a2c6da44163c1a4da34635c6e9da1f4c3"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a2c6da44163c1a4da34635c6e9da1f4c3">o2::field::MagneticField::getTPCRatIntegralCylindrical</a></div><div class="ttdeci">void getTPCRatIntegralCylindrical(const Double_t *rphiz, Double_t *b) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00436">MagneticField.cxx:436</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a41e0c8a5048bfb52576705bf0f2816e3"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a41e0c8a5048bfb52576705bf0f2816e3">o2::field::MagneticField::getMeasuredMap</a></div><div class="ttdeci">MagneticWrapperChebyshev * getMeasuredMap() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00128">MagneticField.h:128</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_a75c442ddbac0a07507bb1aa34be9d3b7ab707abfae90cb18a20a514c108c9f32f"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7ab707abfae90cb18a20a514c108c9f32f">o2::field::MagFieldParam::k5kGUniform</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00036">MagFieldParam.h:36</a></div></div>
<div class="ttc" id="GPUCommonLogger_8h_html_aea3d0edfe28fc0325c636b2b33f0527a"><div class="ttname"><a href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a></div><div class="ttdeci">#define LOG(type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5b/GPUCommonLogger_8h_source.html#l00028">GPUCommonLogger.h:28</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4568fc090febc136eed4577a600739ca"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a></div><div class="ttdeci">const GLdouble * v</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00832">glcorearb.h:832</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a706d450d2813bfd66f471556a7a8d4eb"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a706d450d2813bfd66f471556a7a8d4eb">o2::field::MagneticField::getTPCIntegralCylindrical</a></div><div class="ttdeci">void getTPCIntegralCylindrical(const Double_t *rphiz, Double_t *b) const</div><div class="ttdoc">Method to calculate the integral_0^z of br,bt,bz in cylindrical coordinates ( -pi&lt;phi&lt;pi convention )...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00425">MagneticField.cxx:425</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_ac8fc022f14a5042098c433916820dafa"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ac8fc022f14a5042098c433916820dafa">o2::field::MagneticField::setParameterName</a></div><div class="ttdeci">void setParameterName(const Char_t *nm)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00183">MagneticField.h:183</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab25d8cd967ccbd19b630d7100ff8f67e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab25d8cd967ccbd19b630d7100ff8f67e">path</a></div><div class="ttdeci">GLsizei const GLchar *const  * path</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l03591">glcorearb.h:3591</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_ac090de95840268977a1ce46969bc9122a36d2b64337eb002faf75dc958deca3c1"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a36d2b64337eb002faf75dc958deca3c1">o2::field::MagFieldParam::kBeamTypepA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00043">MagFieldParam.h:43</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_ac090de95840268977a1ce46969bc9122a5ce57498f93415b0c624242d635e765b"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a5ce57498f93415b0c624242d635e765b">o2::field::MagFieldParam::kBeamTypeAA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00042">MagFieldParam.h:42</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_ac090de95840268977a1ce46969bc9122a3d5e40a558880110cdbcf2a0bf065288"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a3d5e40a558880110cdbcf2a0bf065288">o2::field::MagFieldParam::kBeamTypepp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00041">MagFieldParam.h:41</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_ab53b777598c4735425af2e91be330dc6"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab53b777598c4735425af2e91be330dc6">o2::field::MagneticField::setFactorDipole</a></div><div class="ttdeci">void setFactorDipole(Float_t fc=1.)</div><div class="ttdoc">Sets the sign*scale of the current in the Dipole according to sPolarityConvention. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00462">MagneticField.cxx:462</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5c4947d4516dd7cfa3505ce3a648a4ef"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a></div><div class="ttdeci">GLuint const GLchar * name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00781">glcorearb.h:781</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_ace0f62cca2b2ebd9ee342078f6da1e9f"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ace0f62cca2b2ebd9ee342078f6da1e9f">o2::field::MagneticField::Print</a></div><div class="ttdeci">void Print(Option_t *opt) const override</div><div class="ttdoc">Prints short or long info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00615">MagneticField.cxx:615</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_aef9f97e673c5e1abeeb3cfebb2932c1b"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aef9f97e673c5e1abeeb3cfebb2932c1b">o2::field::MagneticField::createFieldMap</a></div><div class="ttdeci">static MagneticField * createFieldMap(Float_t l3Current=-30000., Float_t diCurrent=-6000., Int_t convention=0, Bool_t uniform=kFALSE, Float_t beamenergy=7000, const Char_t *btype=&quot;pp&quot;, const std::string path=std::string(gSystem-&gt;Getenv(&quot;VMCWORKDIR&quot;))+std::string(&quot;/Common/maps/mfchebKGI_sym.root&quot;))</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00501">MagneticField.cxx:501</a></div></div>
<div class="ttc" id="MagneticField_8h_html"><div class="ttname"><a href="../../db/d4b/MagneticField_8h.html">MagneticField.h</a></div><div class="ttdoc">Definition of the MagF class. </div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_a75c442ddbac0a07507bb1aa34be9d3b7a183b09bed6a25df4e44316f906a83096"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7a183b09bed6a25df4e44316f906a83096">o2::field::MagFieldParam::k2kG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00034">MagFieldParam.h:34</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_ab4ef0c8f0f12dafbde0c322f8dfb9a14"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab4ef0c8f0f12dafbde0c322f8dfb9a14">o2::field::MagneticField::getFactorSolenoid</a></div><div class="ttdeci">Double_t getFactorSolenoid() const</div><div class="ttdoc">Returns the sign*scale of the current in the Dipole according to sPolarityConventionthe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00477">MagneticField.cxx:477</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html">o2::field::MagFieldParam</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00030">MagFieldParam.h:30</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html">o2::field::MagneticField</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00044">MagneticField.h:44</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_ab74d7ac9867c658096626607ad7e67e6"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ab74d7ac9867c658096626607ad7e67e6">o2::field::MagneticField::Field</a></div><div class="ttdeci">void Field(const Double_t *__restrict__ point, Double_t *__restrict__ bField) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00230">MagneticField.cxx:230</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_a75c442ddbac0a07507bb1aa34be9d3b7"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7">o2::field::MagFieldParam::BMap_t</a></div><div class="ttdeci">BMap_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00033">MagFieldParam.h:33</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a90b638c7739a9d39f9d211d91dffa0ee"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a90b638c7739a9d39f9d211d91dffa0ee">o2::field::MagneticField::AllowFastField</a></div><div class="ttdeci">void AllowFastField(bool v=true)</div><div class="ttdoc">allow fast field param </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00642">MagneticField.cxx:642</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticWrapperChebyshev_html"><div class="ttname"><a href="../../db/d53/classo2_1_1field_1_1MagneticWrapperChebyshev.html">o2::field::MagneticWrapperChebyshev</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfb/MagneticWrapperChebyshev_8h_source.html#l00051">MagneticWrapperChebyshev.h:51</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a5a8c2b72019dce8b95d64131e9e8153e"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a5a8c2b72019dce8b95d64131e9e8153e">o2::field::MagneticField::loadParameterization</a></div><div class="ttdeci">Bool_t loadParameterization()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00203">MagneticField.cxx:203</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_af8a6385085788cd37d9f0b0296873046"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#af8a6385085788cd37d9f0b0296873046">o2::field::MagneticField::initializeMachineField</a></div><div class="ttdeci">void initializeMachineField(MagFieldParam::BeamType_t btype, Double_t benergy)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00302">MagneticField.cxx:302</a></div></div>
<div class="ttc" id="namespaceo2_1_1field_html"><div class="ttname"><a href="../../d2/d2e/namespaceo2_1_1field.html">o2::field</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d21/MagFieldContFact_8h_source.html#l00025">MagFieldContFact.h:25</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_ac090de95840268977a1ce46969bc9122"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122">o2::field::MagFieldParam::BeamType_t</a></div><div class="ttdeci">BeamType_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00039">MagFieldParam.h:39</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_ad10a16d53feef92eb78ed4789ba6fc0f"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ad10a16d53feef92eb78ed4789ba6fc0f">o2::field::MagneticField::MagneticField</a></div><div class="ttdeci">MagneticField()</div><div class="ttdoc">Default constructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00064">MagneticField.cxx:64</a></div></div>
<div class="ttc" id="classFloat__t_html"><div class="ttname"><a href="../../d9/d7d/classFloat__t.html">Float_t</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_acf6fc64dcefe302f8db94ef58c32bb15"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#acf6fc64dcefe302f8db94ef58c32bb15">o2::field::MagFieldParam::SetParam</a></div><div class="ttdeci">void SetParam(const MagneticField *field)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d54/MagFieldParam_8cxx_source.html#l00032">MagFieldParam.cxx:32</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldFast_html"><div class="ttname"><a href="../../d9/dac/classo2_1_1field_1_1MagFieldFast.html">o2::field::MagFieldFast</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/df4/MagFieldFast_8h_source.html#l00028">MagFieldFast.h:28</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_aaec98a2c34ffeb7f96a8fc9be8a99824"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aaec98a2c34ffeb7f96a8fc9be8a99824">o2::field::MagneticField::FillParContainer</a></div><div class="ttdeci">void FillParContainer() override</div><div class="ttdoc">Fill Paramater. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00631">MagneticField.cxx:631</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a82ef3806d5eb355a2fd0daaf5611cdef"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a82ef3806d5eb355a2fd0daaf5611cdef">o2::field::MagneticField::operator=</a></div><div class="ttdeci">MagneticField &amp; operator=(const MagneticField &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00276">MagneticField.cxx:276</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a6eba317e3cf44d6d26c04a5a8f197dcb"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a></div><div class="ttdeci">GLboolean GLboolean GLboolean b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01233">glcorearb.h:1233</a></div></div>
<div class="ttc" id="standalone-cluster-dump-entropy-analysed_8cxx_html_af0baa3ccdd9d2a6adf03b72e2bea5789"><div class="ttname"><a href="../../d6/d13/standalone-cluster-dump-entropy-analysed_8cxx.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a></div><div class="ttdeci">const char * file</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/standalone-cluster-dump-entropy-analysed_8cxx_source.html#l00051">standalone-cluster-dump-entropy-analysed.cxx:51</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_ac090de95840268977a1ce46969bc9122a154e01fcb58f790792361a5c86006b16"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#ac090de95840268977a1ce46969bc9122a154e01fcb58f790792361a5c86006b16">o2::field::MagFieldParam::kNoBeamField</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00040">MagFieldParam.h:40</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a16d5316064da8e097310cb4e3f724b81"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a16d5316064da8e097310cb4e3f724b81">o2::field::MagneticField::getBz</a></div><div class="ttdeci">Double_t getBz(const Double_t *xyz) const</div><div class="ttdoc">Method to calculate the field at point xyz. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00256">MagneticField.cxx:256</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_a25076d7b7d106e9cb1a66c5a2e4308bd"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a25076d7b7d106e9cb1a66c5a2e4308bd">o2::field::MagFieldParam::GetMapPath</a></div><div class="ttdeci">const char * GetMapPath() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00058">MagFieldParam.h:58</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_ac0279b52bb5552616753ccb0a8ac515a"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#ac0279b52bb5552616753ccb0a8ac515a">o2::field::MagneticField::getTPCIntegral</a></div><div class="ttdeci">void getTPCIntegral(const Double_t *xyz, Double_t *b) const</div><div class="ttdoc">Method to calculate the integral_0^z of br,bt,bz. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00405">MagneticField.cxx:405</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a758e785a85f775aa57de775f4c55d2c4"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a758e785a85f775aa57de775f4c55d2c4">o2::field::MagneticField::setDataFileName</a></div><div class="ttdeci">void setDataFileName(const Char_t *nm)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00181">MagneticField.h:181</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739abefe0c00d6dfe8c719309ff450205215">o2::framework::Abs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc2/BasicOps_8h_source.html#l00031">BasicOps.h:31</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a6d0616395f5811459834850cd2ec0f60"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a6d0616395f5811459834850cd2ec0f60">o2::field::MagneticField::getTPCRatIntegral</a></div><div class="ttdeci">void getTPCRatIntegral(const Double_t *xyz, Double_t *b) const</div><div class="ttdoc">Method to calculate the integral_0^z of br,bt,bz. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00416">MagneticField.cxx:416</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagFieldParam_html_a75c442ddbac0a07507bb1aa34be9d3b7aafb00d424ee7be21c6327d495d643169"><div class="ttname"><a href="../../df/dcd/classo2_1_1field_1_1MagFieldParam.html#a75c442ddbac0a07507bb1aa34be9d3b7aafb00d424ee7be21c6327d495d643169">o2::field::MagFieldParam::k5kG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/MagFieldParam_8h_source.html#l00035">MagFieldParam.h:35</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a0cdec8e97a75ee9458b23d152bf962d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00403">glcorearb.h:403</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a54543143ef4b3f339d87653e55a7ffde"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a54543143ef4b3f339d87653e55a7ffde">o2::field::MagneticField::getBeamTypeText</a></div><div class="ttdeci">const char * getBeamTypeText() const</div><div class="ttdoc">Returns beam type in text form. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00593">MagneticField.cxx:593</a></div></div>
<div class="ttc" id="classFairField_html"><div class="ttname"><a href="../../dc/ddd/classFairField.html">FairField</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a40df828f90c2167739ffba5f467dbea8"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a40df828f90c2167739ffba5f467dbea8">o2::field::MagneticField::MachineField</a></div><div class="ttdeci">void MachineField(const Double_t *__restrict__ x, Double_t *__restrict__ b) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00327">MagneticField.cxx:327</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a643c92238c3535a7614fbb22d0dd870fa5ceeb3664c126d4540e00ddbc43e6382"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a643c92238c3535a7614fbb22d0dd870fa5ceeb3664c126d4540e00ddbc43e6382">o2::field::MagneticField::kConvDCS2008</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00049">MagneticField.h:49</a></div></div>
<div class="ttc" id="GPUCommonAlgorithm_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00385">GPUCommonAlgorithm.h:385</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_aef1b1bb3a7505b6904302058c6af40d1"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#aef1b1bb3a7505b6904302058c6af40d1">o2::field::MagneticField::CreateField</a></div><div class="ttdeci">void CreateField()</div><div class="ttdoc">real field creation is here </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00151">MagneticField.cxx:151</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a13d25f65a8ca4b71d91e6645a5934c8f"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a13d25f65a8ca4b71d91e6645a5934c8f">o2::field::MagneticField::getFastField</a></div><div class="ttdeci">const MagFieldFast * getFastField() const</div><div class="ttdoc">get fast field direct pointer </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4b/MagneticField_8h_source.html#l00131">MagneticField.h:131</a></div></div>
<div class="ttc" id="classo2_1_1field_1_1MagneticField_html_a84402423a9889be551ef394b6c4b4ca1"><div class="ttname"><a href="../../d2/da0/classo2_1_1field_1_1MagneticField.html#a84402423a9889be551ef394b6c4b4ca1">o2::field::MagneticField::setFactorSolenoid</a></div><div class="ttdeci">void setFactorSolenoid(Float_t fc=1.)</div><div class="ttdoc">Sets the sign/scale of the current in the L3 according to sPolarityConvention. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/MagneticField_8cxx_source.html#l00445">MagneticField.cxx:445</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a2a98ddb6f79ec1048ff9e15cdd2422ba"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a></div><div class="ttdeci">GLenum src</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01767">glcorearb.h:1767</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_4ab6b4cc6a7edbff49100e9123df213f.html">Common</a></li><li class="navelem"><a class="el" href="../../dir_91c9f7c5ec503f33747eecaa76c19aa0.html">Field</a></li><li class="navelem"><a class="el" href="../../dir_43838c4b39018742caa88523ee39d462.html">src</a></li><li class="navelem"><a class="el" href="../../d2/d78/MagneticField_8cxx.html">MagneticField.cxx</a></li>
    <li class="footer">Generated on Thu Jun 4 2020 09:30:21 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
