<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/travis/build/AliceO2Group/AliceO2/Detectors/FIT/FV0/base/src/Geometry.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Geometry.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright CERN and copyright holders of ALICE O2. This software is</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// distributed under the terms of the GNU General Public License v3 (GPL</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See http://alice-o2.web.cern.ch/license for full licensing information.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h.html">FV0Base/Geometry.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;FairLogger.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;TGeoBBox.h&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;TGeoCompositeShape.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;TGeoCone.h&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;TGeoManager.h&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;TGeoMatrix.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;TGeoMedium.h&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;TGeoTube.h&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;TGeoVolume.h&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<a class="code" href="../../d2/d9f/CPV_2base_2src_2Geometry_8cxx.html#a9656853246f0006a0378c587bc75e5aa">ClassImp</a>(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html">o2::fv0::Geometry</a>);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d8/d41/namespaceo2_1_1fv0.html">o2::fv0</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad0cfa018c1e7a1fb433bac3bf6b218e2">Geometry::Geometry</a>(EGeoType initType) : mGeometryType(initType)</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  initializeCellCenters();</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  initializeReadoutCenters();</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">if</span> (initType != eUninitialized) {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    initializeGeometry();</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  }</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a6ec6852de5f2b924ab8f42111b3d296f">   45</a></span>&#160;<a class="code" href="../../d1/db6/classo2_1_1ft0_1_1Geometry.html#a4c301c163c63d21ed08c17b0f4e131d3">Geometry::Geometry</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html">Geometry</a>&amp; geometry) : mGeometryType(geometry.mGeometryType), mLeftTransformation(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a>), mRightTransformation(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a>)</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  this-&gt;mEnabledComponents = geometry.mEnabledComponents;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad55e832122ab3a2833dcaa6507867678">   50</a></span>&#160;<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad55e832122ab3a2833dcaa6507867678">Geometry::~Geometry</a>()</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">if</span> (mRightTransformation) {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">delete</span> mRightTransformation;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">if</span> (mLeftTransformation) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">delete</span> mLeftTransformation;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  }</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#af2b2268bcbc0edb2727845a15c4bb6d1">   60</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#af2b2268bcbc0edb2727845a15c4bb6d1">Geometry::getCurrentCellId</a>(<span class="keyword">const</span> TVirtualMC* fMC)<span class="keyword"> const</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordtype">int</span> detectorHalfID = -1;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">int</span> sectorID = -1;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordtype">int</span> ringID = -1;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  fMC-&gt;CurrentVolOffID(2, detectorHalfID);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  fMC-&gt;CurrentVolOffID(1, sectorID);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  fMC-&gt;CurrentVolOffID(0, ringID);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  sectorID += detectorHalfID * sNumberOfCellSectors;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;FV0 Geometry::getCurrentCellId(): \n&quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Half id:     &quot;</span> &lt;&lt; detectorHalfID &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Half name:   &quot;</span> &lt;&lt; fMC-&gt;CurrentVolOffName(2) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Sector id:   &quot;</span> &lt;&lt; sectorID &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Sector name: &quot;</span> &lt;&lt; fMC-&gt;CurrentVolOffName(1) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Ring id:     &quot;</span> &lt;&lt; ringID &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Ring name:   &quot;</span> &lt;&lt; fMC-&gt;CurrentVolOffName(0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Cell id :    &quot;</span> &lt;&lt; sectorID + 8 * ringID &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">return</span> sectorID + 8 * ringID;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#aff71e9a73c93b68c44716e824bc6982a">   84</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#aff71e9a73c93b68c44716e824bc6982a">Geometry::enableComponent</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573">EGeoComponent</a> component, <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ab0b5c7de20095d30091485d2c60a3dd5">enable</a>)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">if</span> (mEnabledComponents.find(component) == mEnabledComponents.end()) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;FV0 Geometry::enableComponent(): Component not initialized and cannot be enabled/disabled!&quot;</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">return</span> mEnabledComponents[component] = <a class="code" href="../../dc/da3/glcorearb_8h.html#ab0b5c7de20095d30091485d2c60a3dd5">enable</a>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a172fd95bfbeb66bd7409ddab898190f9">   94</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a172fd95bfbeb66bd7409ddab898190f9">Geometry::buildGeometry</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  TGeoVolume* vALIC = gGeoManager-&gt;GetVolume(<span class="stringliteral">&quot;cave&quot;</span>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (!vALIC) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(FATAL) &lt;&lt; <span class="stringliteral">&quot;FV0: Could not find the top volume&quot;</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// Top volume of FV0 detector</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  TGeoVolumeAssembly* vFV0 = <span class="keyword">new</span> TGeoVolumeAssembly(sDetectorName.c_str());</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;FV0: Building geometry. FV0 volume name is &#39;&quot;</span> &lt;&lt; vFV0-&gt;GetName() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  assembleSensVols(vFV0);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  assembleNonSensVols(vFV0);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// TODO: What should the copy_no be? Currently assigned to &#39;1&#39;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  vALIC-&gt;AddNode(vFV0, 1, <span class="keyword">new</span> TGeoTranslation(sXGlobal, sYGlobal, sZGlobal));</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#af8d3990e2a587a421de439b001aa7e97">  112</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#af8d3990e2a587a421de439b001aa7e97">Geometry::getGlobalPosition</a>(<span class="keywordtype">float</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <span class="keywordtype">float</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <span class="keywordtype">float</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a>)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  x = sXGlobal;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  y = sYGlobal;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  z = sZGlobal;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a4894f157e70dfe7643c45f7eb15aee80">  119</a></span>&#160;<a class="code" href="../../d5/daf/classROOT_1_1Math_1_1PositionVector3D.html">Point3D&lt;float&gt;</a>&amp; <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a4894f157e70dfe7643c45f7eb15aee80">Geometry::getCellCenter</a>(UInt_t cellId)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;{</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">return</span> mCellCenter.at(cellId);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a97cdc676fdc9c8e182e8debdda0c4db1">  124</a></span>&#160;<a class="code" href="../../d5/daf/classROOT_1_1Math_1_1PositionVector3D.html">Point3D&lt;float&gt;</a>&amp; <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a97cdc676fdc9c8e182e8debdda0c4db1">Geometry::getReadoutCenter</a>(UInt_t cellId)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">return</span> mReadoutCenter.at(cellId);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad88d3cce29aec1231f633844211d5d98">  129</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad88d3cce29aec1231f633844211d5d98">Geometry::isRing5</a>(UInt_t cellId)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">return</span> cellId &gt;= (sNumberOfCellRings - 1) * sNumberOfCellSectors * 2;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keywordtype">void</span> Geometry::initializeGeometry()</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  initializeMaps();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  initializeVectors();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  initializeTransformations();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  initializeSensVols();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  initializeNonSensVols();</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keywordtype">void</span> Geometry::initializeMaps()</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> isFull = mGeometryType == <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#abc44c220ba61424c5c5ee5a7983dcc2aa6282ea317e8e429b6e0b8a9fdccc46e8">eFull</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> isRough = isFull || mGeometryType == <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#abc44c220ba61424c5c5ee5a7983dcc2aaf481a82be49be9e5f4754ce57134f0bf">eRough</a>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> hasScint = isRough || mGeometryType == <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#abc44c220ba61424c5c5ee5a7983dcc2aa699cfef3c856ea7f78e325509a158022">eOnlySensitive</a>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  mEnabledComponents.insert(std::pair&lt;EGeoComponent, bool&gt;(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a4d272d9bdbb6c3b7418f251c618f3f8a">eScintillator</a>, hasScint));</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  mEnabledComponents.insert(std::pair&lt;EGeoComponent, bool&gt;(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a7ebc27b5b7c02de6c6ad904a4169b8e9">ePlastics</a>, isRough));</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  mEnabledComponents.insert(std::pair&lt;EGeoComponent, bool&gt;(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a2c0afe361825752b9df3d6fe7e013527">eFibers</a>, isFull));</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  mEnabledComponents.insert(std::pair&lt;EGeoComponent, bool&gt;(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a85ee913a777f2e7c5e68f322f320c435">eScrews</a>, isFull));</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  mEnabledComponents.insert(std::pair&lt;EGeoComponent, bool&gt;(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a0feac39771da091f414ba8852a7d93d1">eRods</a>, isFull));</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  mEnabledComponents.insert(std::pair&lt;EGeoComponent, bool&gt;(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a68cf524ac7f9178b4b64c47f314427a0">eContainer</a>, isRough));</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keywordtype">void</span> Geometry::initializeVectors()</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  initializeCellRingRadii();</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  initializeSectorTransformations();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  initializeFiberVolumeRadii();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  initializeFiberMedium();</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  initializeScrewAndRodRadii();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  initializeScrewTypeMedium();</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  initializeRodTypeMedium();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  initializeScrewAndRodPositionsAndDimensions();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="keywordtype">void</span> Geometry::initializeCellRingRadii()</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// Index of mRAvgRing is NOT linked directly to any ring number</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  mRAvgRing.assign(sCellRingRadii, sCellRingRadii + sNumberOfCellRings + 1);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// Set real scintillator radii (reduced by paint thickness and separation gap)</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mRAvgRing.size() - 1; ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    mRMinScintillator.push_back(mRAvgRing[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] + sDrSeparationScint);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    mRMaxScintillator.push_back(mRAvgRing[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] - sDrSeparationScint);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// Now indices of mRMinScint and mRMaxScint correspond to the same ring</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keywordtype">void</span> Geometry::initializeSectorTransformations()</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSector = 0; iSector &lt; sNumberOfCellSectors; ++iSector) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// iSector = 0 corresponds to the first sector clockwise from the y-axis</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// iSector = 1 corresponds to the next sector in clockwise direction and so on</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    TGeoRotation* trans = createAndRegisterRot(sDetectorName + sSectorName + std::to_string(iSector) + <span class="stringliteral">&quot;TRANS&quot;</span>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (iSector == 2 || iSector == 3) {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="comment">// &quot;a&quot; and &quot;b&quot; mirrors.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="comment">// The reference to &quot;a&quot; and &quot;b&quot; can be understood with the CAD drawings of the detector.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      trans-&gt;ReflectY(<span class="keyword">true</span>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    mSectorTrans.push_back(trans);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keywordtype">void</span> Geometry::initializeFiberVolumeRadii()</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  mRMinFiber.push_back(0);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  mRMinFiber.push_back(sDrMinContainerCone + sEpsilon);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  mRMinFiber.push_back(sDrMinContainerFront + sEpsilon);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  mRMaxFiber.push_back(sDrMinContainerCone);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  mRMaxFiber.push_back(sDrMinContainerFront);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  mRMaxFiber.push_back(mRMaxScintillator.back());</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keywordtype">void</span> Geometry::initializeFiberMedium()</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// There are no further checks if the medium is actually found</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  mMediumFiber.push_back(gGeoManager-&gt;GetMedium(<span class="stringliteral">&quot;FV0_FiberInner$&quot;</span>));</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  mMediumFiber.push_back(gGeoManager-&gt;GetMedium(<span class="stringliteral">&quot;FV0_FiberMiddle$&quot;</span>));</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  mMediumFiber.push_back(gGeoManager-&gt;GetMedium(<span class="stringliteral">&quot;FV0_FiberOuter$&quot;</span>));</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="keywordtype">void</span> Geometry::initializeScrewAndRodRadii()</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;{</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  mRScrewAndRod.push_back(mRAvgRing[1]);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  mRScrewAndRod.push_back(mRAvgRing[2]);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  mRScrewAndRod.push_back(mRAvgRing[3]);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  mRScrewAndRod.push_back(mRAvgRing[4]);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  mRScrewAndRod.push_back((mRAvgRing[4] + mRAvgRing[5]) / 2);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  mRScrewAndRod.push_back(mRAvgRing[5]);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="keywordtype">void</span> Geometry::initializeScrewTypeMedium()</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// There are no further checks if the medium is actually found</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  TGeoMedium* medium = gGeoManager-&gt;GetMedium(<span class="stringliteral">&quot;FV0_Titanium$&quot;</span>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sNumberOfScrewTypes; ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    mMediumScrewTypes.push_back(medium);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keywordtype">void</span> Geometry::initializeRodTypeMedium()</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// There are no further checks if the medium is actually found</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  TGeoMedium* medium = gGeoManager-&gt;GetMedium(<span class="stringliteral">&quot;FV0_Aluminium$&quot;</span>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sNumberOfRodTypes; ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    mMediumRodTypes.push_back(medium);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="keywordtype">void</span> Geometry::addScrewProperties(<span class="keyword">const</span> <span class="keywordtype">int</span> screwTypeID, <span class="keyword">const</span> <span class="keywordtype">int</span> iRing, <span class="keyword">const</span> <span class="keywordtype">float</span> phi)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;{</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a> = mRScrewAndRod[iRing];</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  mScrewTypeIDs.push_back(screwTypeID);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  mScrewPos.push_back(std::vector&lt;float&gt;{cosf(phi * M_PI / 180) * <a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a>,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                         sinf(phi * M_PI / 180) * <a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a>,</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                         sZScintillator - sDzScintillator / 2 + sZShiftScrew + sDzMaxScrewTypes[screwTypeID] / 2});</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  mDrMinScrews.push_back(sDrMinScrewTypes[screwTypeID]);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  mDrMaxScrews.push_back(sDrMaxScrewTypes[screwTypeID]);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  mDzMaxScrews.push_back(sDzMaxScrewTypes[screwTypeID]);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  mDzMinScrews.push_back(sDzMinScrewTypes[screwTypeID]);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="keywordtype">void</span> Geometry::addRodProperties(<span class="keyword">const</span> <span class="keywordtype">int</span> rodTypeID, <span class="keyword">const</span> <span class="keywordtype">int</span> iRing)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  mRodTypeIDs.push_back(rodTypeID);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  mRodPos.push_back(std::vector&lt;float&gt;{sDxMinRodTypes[rodTypeID] / 2,</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                       mRScrewAndRod[iRing],</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                       sZScintillator - sDzScintillator / 2 + sZShiftRod + sDzMaxRodTypes[rodTypeID] / 2});</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  mDxMinRods.push_back(sDxMinRodTypes[rodTypeID]);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  mDzMaxRods.push_back(sDxMaxRodTypes[rodTypeID]);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  mDyMinRods.push_back(sDyMinRodTypes[rodTypeID]);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  mDyMaxRods.push_back(sDyMaxRodTypes[rodTypeID]);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  mDzMaxRods.push_back(sDzMaxRodTypes[rodTypeID]);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  mDzMinRods.push_back(sDzMinRodTypes[rodTypeID]);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  mRodTypeIDs.push_back(rodTypeID);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  mRodPos.push_back(std::vector&lt;float&gt;{sDxMinRodTypes[rodTypeID] / 2,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                       -mRScrewAndRod[iRing],</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                       sZScintillator - sDzScintillator / 2 + sZShiftRod + sDzMaxRodTypes[rodTypeID] / 2});</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  mDxMinRods.push_back(sDxMinRodTypes[rodTypeID]);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  mDzMaxRods.push_back(sDxMaxRodTypes[rodTypeID]);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  mDyMinRods.push_back(sDyMinRodTypes[rodTypeID]);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  mDyMaxRods.push_back(sDyMaxRodTypes[rodTypeID]);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  mDzMaxRods.push_back(sDzMaxRodTypes[rodTypeID]);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  mDzMinRods.push_back(sDzMinRodTypes[rodTypeID]);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="keywordtype">void</span> Geometry::initializeScrewAndRodPositionsAndDimensions()</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iRing = 0; iRing &lt; mRScrewAndRod.size(); ++iRing) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">switch</span> (iRing) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        addRodProperties(0, iRing);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">float</span> phi = 45; phi &gt;= -45; phi -= 45) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;          addScrewProperties(0, iRing, phi);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        addRodProperties(0, iRing);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">float</span> phi = 45; phi &gt;= -45; phi -= 45) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;          addScrewProperties(1, iRing, phi);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        addRodProperties(1, iRing);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">float</span> phi = 67.5; phi &gt;= -67.5; phi -= 22.5) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;          addScrewProperties(2, iRing, phi);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        addRodProperties(2, iRing);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">float</span> phi = 67.5; phi &gt;= -67.5; phi -= 22.5) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;          addScrewProperties(3, iRing, phi);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        addRodProperties(3, iRing);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">float</span> phi = 45; phi &gt;= -45; phi -= 45) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          addScrewProperties(4, iRing, phi);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">case</span> 5:</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        addRodProperties(3, iRing);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">float</span> phi = 67.5; phi &gt;= -67.5; phi -= 22.5) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          addScrewProperties(5, iRing, phi);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="keywordtype">void</span> Geometry::initializeTransformations()</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  TGeoTranslation leftTranslation(-sDxHalvesSeparation / 2, 0, 0);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  TGeoRotation leftRotation;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  leftRotation.ReflectX(<span class="keyword">true</span>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  TGeoHMatrix leftTotalTransformation = leftTranslation * leftRotation;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  mLeftTransformation = <span class="keyword">new</span> TGeoHMatrix(leftTotalTransformation);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  mRightTransformation = <span class="keyword">new</span> TGeoTranslation(sDxHalvesSeparation / 2, sDyHalvesSeparation, sDzHalvesSeparation);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="keywordtype">void</span> Geometry::initializeSensVols()</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  initializeScintCells();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="keywordtype">void</span> Geometry::initializeNonSensVols()</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  initializeScrewHoles();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  initializeRodHoles();</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  initializePlasticCells();</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  initializeFibers();</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  initializeScrews();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  initializeRods();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  initializeMetalContainer();</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="keywordtype">void</span> Geometry::initializeScrewHoles()</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;{</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  std::string boolFormula = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mScrewPos.size(); ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    std::string holeShapeName = sDetectorName + sScrewName + <span class="stringliteral">&quot;HOLE&quot;</span> + std::to_string(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    std::string holeTransName = sDetectorName + sScrewName + <span class="stringliteral">&quot;HOLETRANS&quot;</span> + std::to_string(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    createScrewShape(holeShapeName, mScrewTypeIDs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], sEpsilon, sEpsilon);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    createAndRegisterTrans(holeTransName, mScrewPos[i][0] + sXShiftScrews, mScrewPos[i][1], mScrewPos[i][2]);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    boolFormula += ((i != 0) ? <span class="stringliteral">&quot;+&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) + holeShapeName + <span class="stringliteral">&quot;:&quot;</span> + holeTransName;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keyword">new</span> TGeoCompositeShape(sScrewHolesCSName.c_str(), boolFormula.c_str());</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="keywordtype">void</span> Geometry::initializeRodHoles()</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  std::string boolFormula = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mRodPos.size(); ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    std::string holeShapeName = sDetectorName + sRodName + <span class="stringliteral">&quot;HOLE&quot;</span> + std::to_string(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    std::string holeTransName = sDetectorName + sRodName + <span class="stringliteral">&quot;HOLETRANS&quot;</span> + std::to_string(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    createRodShape(holeShapeName, mRodTypeIDs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], sEpsilon, sEpsilon);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    createAndRegisterTrans(holeTransName, mRodPos[i][0] + sXShiftScrews, mRodPos[i][1], mRodPos[i][2]);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    boolFormula += ((i != 0) ? <span class="stringliteral">&quot;+&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) + holeShapeName + <span class="stringliteral">&quot;:&quot;</span> + holeTransName;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keyword">new</span> TGeoCompositeShape(sRodHolesCSName.c_str(), boolFormula.c_str());</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="keywordtype">void</span> Geometry::initializeCells(<span class="keyword">const</span> std::string&amp; cellType, <span class="keyword">const</span> <span class="keywordtype">float</span> zThickness, <span class="keyword">const</span> TGeoMedium* medium,</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">bool</span> isSensitive)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// Creating the two types of cells, &quot;a&quot; and &quot;b&quot;, for each ring.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// All sectors can be assembled with these cells.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// The reference to &quot;a&quot; and &quot;b&quot; can be understood with the CAD drawings of the detector.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dxHoleCut = sDxHoleExtensionScintillator; <span class="comment">// width of extension of hole 1, 2 and 7 in the &quot;a&quot; cell</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> xHole = sDrSeparationScint + dxHoleCut;   <span class="comment">// x-placement of holes 1, 2 and 7 in the &quot;a&quot; cell</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// Sector separation gap shape</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keyword">const</span> std::string secSepShapeName = <span class="stringliteral">&quot;FV0_&quot;</span> + cellType + <span class="stringliteral">&quot;SectorSeparation&quot;</span>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keyword">new</span> TGeoBBox(secSepShapeName.c_str(), mRMaxScintillator.back() + sEpsilon, sDrSeparationScint, zThickness / 2);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// Sector separation gap rotations</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keyword">const</span> std::string secSepRot45Name = <span class="stringliteral">&quot;FV0_&quot;</span> + cellType + <span class="stringliteral">&quot;SecSepRot45&quot;</span>;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keyword">const</span> std::string secSepRot90Name = <span class="stringliteral">&quot;FV0_&quot;</span> + cellType + <span class="stringliteral">&quot;SecSepRot90&quot;</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  createAndRegisterRot(secSepRot45Name, 45, 0, 0);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  createAndRegisterRot(secSepRot90Name, 90, 0, 0);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">// Hole shapes</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keyword">const</span> std::string holeSmallName = <span class="stringliteral">&quot;FV0_&quot;</span> + cellType + <span class="stringliteral">&quot;HoleSmall&quot;</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keyword">const</span> std::string holeLargeName = <span class="stringliteral">&quot;FV0_&quot;</span> + cellType + <span class="stringliteral">&quot;HoleLarge&quot;</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keyword">const</span> std::string holeSmallCutName = <span class="stringliteral">&quot;FV0_&quot;</span> + cellType + <span class="stringliteral">&quot;HoleSmallCut&quot;</span>;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keyword">const</span> std::string holeLargeCutName = <span class="stringliteral">&quot;FV0_&quot;</span> + cellType + <span class="stringliteral">&quot;HoleLargeCut&quot;</span>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keyword">new</span> TGeoTube(holeSmallName.c_str(), 0, sDrHoleSmallScintillator, zThickness / 2);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keyword">new</span> TGeoTube(holeLargeName.c_str(), 0, sDrHoleLargeScintillator, zThickness / 2);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keyword">new</span> TGeoBBox(holeSmallCutName.c_str(), dxHoleCut, sDrHoleSmallScintillator, zThickness / 2);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keyword">new</span> TGeoBBox(holeLargeCutName.c_str(), dxHoleCut, sDrHoleLargeScintillator, zThickness / 2);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ir = 0; ir &lt; sNumberOfCellRings; ++ir) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// Radii without separation</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> rMin = mRAvgRing[ir];</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> rMax = mRAvgRing[ir + 1];</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> rMid = rMin + (rMax - rMin) / 2;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// &quot;a&quot;-type cell</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// Initial placement:</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// y</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// ^</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// |  1******</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// |  ************5</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// |  7*****************</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// |  *********************3</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// |  *******************</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// |  2**************8</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// |      6********</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// |        **4</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">// |</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// |</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// |  O</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// ------------------------&gt; x</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// * = cell volume</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// numbers = hole numbers (as numbered in the code below)</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// O = beam pipe</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keyword">const</span> std::string aCellName = createVolumeName(cellType + sCellName + <span class="stringliteral">&quot;a&quot;</span>, ir);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Base shape</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">const</span> std::string aCellShapeName = aCellName + <span class="stringliteral">&quot;Shape&quot;</span>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">// The cells in the innermost ring have a slightly shifted inner radius origin.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (ir == 0) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="comment">// The innermost &quot;a&quot;-type cell</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keyword">const</span> std::string a1CellShapeFullName = aCellShapeName + <span class="stringliteral">&quot;Full&quot;</span>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keyword">const</span> std::string a1CellShapeHoleCutName = aCellShapeName + <span class="stringliteral">&quot;HoleCut&quot;</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keyword">const</span> std::string a1CellShapeHoleCutTransName = a1CellShapeHoleCutName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keyword">new</span> TGeoTubeSeg(a1CellShapeFullName.c_str(), 0, mRMaxScintillator[ir], zThickness / 2 - sEpsilon, 45, 90);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keyword">new</span> TGeoTube(a1CellShapeHoleCutName.c_str(), 0, mRMinScintillator[ir], zThickness);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      createAndRegisterTrans(a1CellShapeHoleCutTransName, sXShiftInnerRadiusScintillator, 0, 0);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keyword">const</span> std::string a1BoolFormula = a1CellShapeFullName + <span class="stringliteral">&quot;-&quot;</span> + a1CellShapeHoleCutName + <span class="stringliteral">&quot;:&quot;</span> + a1CellShapeHoleCutTransName;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keyword">new</span> TGeoCompositeShape(aCellShapeName.c_str(), a1BoolFormula.c_str());</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="comment">// The rest of the &quot;a&quot;-type cells</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keyword">new</span> TGeoTubeSeg(aCellShapeName.c_str(), mRMinScintillator[ir], mRMaxScintillator[ir], zThickness / 2, 45, 90);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// Translations for screw holes (inner = rmin, half-length = rmid, outer = rmax)</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// 1 = outer left</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">// 2 = inner left</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// 3 = outer right</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// 4 = inner right</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// 5 = outer middle</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// 6 = inner middle</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// 7 = half-length left</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// 8 = half-length right</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// holes 1, 2 and 7 are slightly shifted along the rim of the cell</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keyword">const</span> std::string aHole1TransName = aCellName + <span class="stringliteral">&quot;Hole1Trans&quot;</span>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keyword">const</span> std::string aHole2TransName = aCellName + <span class="stringliteral">&quot;Hole2Trans&quot;</span>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keyword">const</span> std::string aHole3TransName = aCellName + <span class="stringliteral">&quot;Hole3Trans&quot;</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keyword">const</span> std::string aHole4TransName = aCellName + <span class="stringliteral">&quot;Hole4Trans&quot;</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keyword">const</span> std::string aHole5TransName = aCellName + <span class="stringliteral">&quot;Hole5Trans&quot;</span>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keyword">const</span> std::string aHole6TransName = aCellName + <span class="stringliteral">&quot;Hole6Trans&quot;</span>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keyword">const</span> std::string aHole7TransName = aCellName + <span class="stringliteral">&quot;Hole7Trans&quot;</span>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keyword">const</span> std::string aHole8TransName = aCellName + <span class="stringliteral">&quot;Hole8Trans&quot;</span>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keyword">const</span> std::string aHole1CutTransName = aCellName + <span class="stringliteral">&quot;Hole1CutTrans&quot;</span>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keyword">const</span> std::string aHole2CutTransName = aCellName + <span class="stringliteral">&quot;Hole2CutTrans&quot;</span>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">const</span> std::string aHole7CutTransName = aCellName + <span class="stringliteral">&quot;Hole7CutTrans&quot;</span>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    createAndRegisterTrans(aHole1TransName, xHole, cos(asin(xHole / rMax)) * rMax, 0);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    createAndRegisterTrans(aHole2TransName, xHole, cos(asin(xHole / rMin)) * rMin, 0);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    createAndRegisterTrans(aHole3TransName, sin(45 * M_PI / 180) * rMax, cos(45 * M_PI / 180) * rMax, 0);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    createAndRegisterTrans(aHole4TransName, sin(45 * M_PI / 180) * rMin, cos(45 * M_PI / 180) * rMin, 0);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    createAndRegisterTrans(aHole5TransName, sin(22.5 * M_PI / 180) * rMax, cos(22.5 * M_PI / 180) * rMax, 0);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    createAndRegisterTrans(aHole6TransName, sin(22.5 * M_PI / 180) * rMin, cos(22.5 * M_PI / 180) * rMin, 0);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    createAndRegisterTrans(aHole7TransName, xHole, cos(asin(xHole / rMid)) * rMid, 0);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    createAndRegisterTrans(aHole8TransName, sin(45 * M_PI / 180) * rMid, cos(45 * M_PI / 180) * rMid, 0);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    createAndRegisterTrans(aHole1CutTransName, 0, cos(asin(xHole / rMax)) * rMax, 0);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    createAndRegisterTrans(aHole2CutTransName, 0, cos(asin(xHole / rMin)) * rMin, 0);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    createAndRegisterTrans(aHole7CutTransName, 0, cos(asin(xHole / rMid)) * rMid, 0);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// Composite shape</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    std::string aBoolFormula = aCellShapeName;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// sector separation</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + secSepShapeName + <span class="stringliteral">&quot;:&quot;</span> + secSepRot45Name;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + secSepShapeName + <span class="stringliteral">&quot;:&quot;</span> + secSepRot90Name;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">// outer holes</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + ((ir &lt; 2) ? holeSmallName : holeLargeName) + <span class="stringliteral">&quot;:&quot;</span> + aHole1TransName;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + ((ir &lt; 2) ? holeSmallCutName : holeLargeCutName) + <span class="stringliteral">&quot;:&quot;</span> + aHole1CutTransName;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + ((ir &lt; 2) ? holeSmallName : holeLargeName) + <span class="stringliteral">&quot;:&quot;</span> + aHole3TransName;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">// inner holes</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">if</span> (ir &gt; 0) {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keyword">const</span> std::string screwHoleName = (ir &lt; 3) ? holeSmallName : holeLargeName;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keyword">const</span> std::string screwHoleCutName = (ir &lt; 3) ? holeSmallCutName : holeLargeCutName;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + screwHoleName + <span class="stringliteral">&quot;:&quot;</span> + aHole2TransName;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + screwHoleCutName + <span class="stringliteral">&quot;:&quot;</span> + aHole2CutTransName;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + screwHoleName + <span class="stringliteral">&quot;:&quot;</span> + aHole4TransName;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">// outer middle hole</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> (ir &gt; 1) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeLargeName + <span class="stringliteral">&quot;:&quot;</span> + aHole5TransName;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">// inner middle hole</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (ir &gt; 2) {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeLargeName + <span class="stringliteral">&quot;:&quot;</span> + aHole6TransName;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">// half-length holes</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span> (ir == 4) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeLargeName + <span class="stringliteral">&quot;:&quot;</span> + aHole7TransName;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeLargeCutName + <span class="stringliteral">&quot;:&quot;</span> + aHole7CutTransName;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      aBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeLargeName + <span class="stringliteral">&quot;:&quot;</span> + aHole8TransName;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keyword">const</span> std::string aCellCSName = aCellName + <span class="stringliteral">&quot;CS&quot;</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keyword">const</span> TGeoCompositeShape* aCellCs = <span class="keyword">new</span> TGeoCompositeShape(aCellCSName.c_str(), aBoolFormula.c_str());</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// Cell volume</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keyword">const</span> TGeoVolume* aCell = <span class="keyword">new</span> TGeoVolume(aCellName.c_str(), aCellCs, medium);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="comment">// &quot;b&quot;-type cell</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="comment">// Initial placement:</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">// y</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">// ^</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="comment">// |                    1</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">// |                 *****</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">// |               *********</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// |            7*************</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">// |          ****************5</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// |        2*******************</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">// |           6*****************</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// |            *****************</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// |  O          4*******8******3</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">// |</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// ------------------------------&gt; x</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// * = cell volume</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">// numbers = number of holes (as numbered in the code below)</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// O = beam pipe</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keyword">const</span> std::string bCellName = createVolumeName(cellType + sCellName + <span class="stringliteral">&quot;b&quot;</span>, ir);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// Base shape</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keyword">const</span> std::string bCellShapeName = bCellName + <span class="stringliteral">&quot;Shape&quot;</span>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// The cells in the innermost ring are slightly different than the rest</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (ir == 0) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="comment">// The innermost &quot;b&quot;-type cell</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keyword">const</span> std::string b1CellShapeFullName = bCellShapeName + <span class="stringliteral">&quot;Full&quot;</span>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keyword">const</span> std::string b1CellShapeHoleCutName = bCellShapeName + <span class="stringliteral">&quot;Cut&quot;</span>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keyword">const</span> std::string b1CellShapeHoleCutTransName = b1CellShapeHoleCutName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keyword">new</span> TGeoTubeSeg(b1CellShapeFullName.c_str(), 0, mRMaxScintillator[ir], zThickness / 2 - sEpsilon, 0, 45);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keyword">new</span> TGeoTube(b1CellShapeHoleCutName.c_str(), 0, mRMinScintillator[ir], zThickness);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      createAndRegisterTrans(b1CellShapeHoleCutTransName, sXShiftInnerRadiusScintillator, 0, 0);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keyword">const</span> std::string b1BoolFormula = b1CellShapeFullName + <span class="stringliteral">&quot;-&quot;</span> + b1CellShapeHoleCutName + <span class="stringliteral">&quot;:&quot;</span> + b1CellShapeHoleCutTransName;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="keyword">new</span> TGeoCompositeShape(bCellShapeName.c_str(), b1BoolFormula.c_str());</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="comment">// The rest of the &quot;b&quot;-type cells</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keyword">new</span> TGeoTubeSeg(bCellShapeName.c_str(), mRMinScintillator[ir], mRMaxScintillator[ir], zThickness / 2, 0, 45);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">// Translations for holes</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// 1 = outer left</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment">// 2 = inner left</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="comment">// 3 = outer right</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="comment">// 4 = inner right</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">// 5 = outer middle</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// 6 = inner middle</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">// 7 = half-lenght left</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// 8 = half-length right</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keyword">const</span> std::string bHole1TransName = bCellName + <span class="stringliteral">&quot;Hole1Trans&quot;</span>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keyword">const</span> std::string bHole2TransName = bCellName + <span class="stringliteral">&quot;Hole2Trans&quot;</span>;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keyword">const</span> std::string bHole3TransName = bCellName + <span class="stringliteral">&quot;Hole3Trans&quot;</span>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keyword">const</span> std::string bHole4TransName = bCellName + <span class="stringliteral">&quot;Hole4Trans&quot;</span>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keyword">const</span> std::string bHole5TransName = bCellName + <span class="stringliteral">&quot;Hole5Trans&quot;</span>;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keyword">const</span> std::string bHole6TransName = bCellName + <span class="stringliteral">&quot;Hole6Trans&quot;</span>;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keyword">const</span> std::string bHole7TransName = bCellName + <span class="stringliteral">&quot;Hole7Trans&quot;</span>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keyword">const</span> std::string bHole8TransName = bCellName + <span class="stringliteral">&quot;Hole8Trans&quot;</span>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    createAndRegisterTrans(bHole1TransName, sin(45 * M_PI / 180) * rMax, cos(45 * M_PI / 180) * rMax, 0);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    createAndRegisterTrans(bHole2TransName, sin(45 * M_PI / 180) * rMin, cos(45 * M_PI / 180) * rMin, 0);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    createAndRegisterTrans(bHole3TransName, rMax, 0, 0);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    createAndRegisterTrans(bHole4TransName, rMin, 0, 0);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    createAndRegisterTrans(bHole5TransName, cos(22.5 * M_PI / 180) * rMax, sin(22.5 * M_PI / 180) * rMax, 0);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    createAndRegisterTrans(bHole6TransName, cos(22.5 * M_PI / 180) * rMin, sin(22.5 * M_PI / 180) * rMin, 0);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    createAndRegisterTrans(bHole7TransName, sin(45 * M_PI / 180) * rMid, cos(45 * M_PI / 180) * rMid, 0);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    createAndRegisterTrans(bHole8TransName, rMid, 0, 0);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">// Composite shape</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    std::string bBoolFormula = bCellShapeName;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// sector separation</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + secSepShapeName;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + secSepShapeName + <span class="stringliteral">&quot;:&quot;</span> + secSepRot45Name;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">// outer holes</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + ((ir &lt; 2) ? holeSmallName : holeLargeName) + <span class="stringliteral">&quot;:&quot;</span> + bHole1TransName;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + ((ir &lt; 2) ? holeSmallName : holeLargeName) + <span class="stringliteral">&quot;:&quot;</span> + bHole3TransName;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// inner holes</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">if</span> (ir &gt; 0) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="keyword">const</span> std::string holeName = (ir &lt; 3) ? holeSmallName : holeLargeName;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeName + <span class="stringliteral">&quot;:&quot;</span> + bHole2TransName;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeName + <span class="stringliteral">&quot;:&quot;</span> + bHole4TransName;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="comment">// outer middle hole</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span> (ir &gt; 1) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeLargeName + <span class="stringliteral">&quot;:&quot;</span> + bHole5TransName;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// inner middle hole</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">if</span> (ir &gt; 2) {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeLargeName + <span class="stringliteral">&quot;:&quot;</span> + bHole6TransName;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// half-lenght holes</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span> (ir == 4) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeLargeName + <span class="stringliteral">&quot;:&quot;</span> + bHole7TransName;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      bBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + holeLargeName + <span class="stringliteral">&quot;:&quot;</span> + bHole8TransName;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keyword">const</span> std::string bCellCSName = bCellName + <span class="stringliteral">&quot;CS&quot;</span>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keyword">const</span> TGeoCompositeShape* bCellCs = <span class="keyword">new</span> TGeoCompositeShape(bCellCSName.c_str(), bBoolFormula.c_str());</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="comment">// Cell volume</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keyword">const</span> TGeoVolume* bCell = <span class="keyword">new</span> TGeoVolume(bCellName.c_str(), bCellCs, medium);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">if</span> (isSensitive) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      mSensitiveVolumeNames.push_back(aCell-&gt;GetName());</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      mSensitiveVolumeNames.push_back(bCell-&gt;GetName());</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="keywordtype">void</span> Geometry::initializeScintCells()</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;{</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keyword">const</span> TGeoMedium* medium = gGeoManager-&gt;GetMedium(<span class="stringliteral">&quot;FV0_Scintillator$&quot;</span>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  initializeCells(sScintillatorName, sDzScintillator, medium, <span class="keyword">true</span>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="keywordtype">void</span> Geometry::initializePlasticCells()</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;{</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keyword">const</span> TGeoMedium* medium = gGeoManager-&gt;GetMedium(<span class="stringliteral">&quot;FV0_Plastic$&quot;</span>);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  initializeCells(sPlasticName, sDzPlastic, medium, <span class="keyword">false</span>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="keywordtype">void</span> Geometry::initializeFibers()</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;{</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// depth of the fiber volumes</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzFibers = sDzContainer - sDzContainerBack - sDzContainerFront - sDzScintillator - sDzPlastic - 2 * sEpsilon;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keyword">const</span> std::string fiberName = <span class="stringliteral">&quot;FV0_Fibers&quot;</span>; <span class="comment">// No volume with this name</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keyword">const</span> std::string fiberSepCutName = fiberName + <span class="stringliteral">&quot;SepCut&quot;</span>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keyword">const</span> std::string fiberConeCutName = fiberName + <span class="stringliteral">&quot;ConeCut&quot;</span>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keyword">const</span> std::string fiberHoleCutName = fiberName + <span class="stringliteral">&quot;HoleCut&quot;</span>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keyword">const</span> std::string fiberTransName = fiberName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keyword">const</span> std::string fiberConeCutTransName = fiberConeCutName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keyword">const</span> std::string fiberHoleCutTransName = fiberHoleCutName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keyword">new</span> TGeoBBox(fiberSepCutName.c_str(), sDrSeparationScint, mRMaxFiber.back() + sEpsilon, dzFibers / 2 + sEpsilon);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keyword">new</span> TGeoConeSeg(fiberConeCutName.c_str(), sDzContainerCone / 2 + sEpsilon, 0,</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                  sDrMinContainerCone + sXYThicknessContainerCone + sEpsilon, 0, sDrMinContainerFront + sEpsilon, -90, 90);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keyword">new</span> TGeoTube(fiberHoleCutName.c_str(), 0, mRMinScintillator.front(), dzFibers / 2 + sEpsilon);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  createAndRegisterTrans(fiberTransName, sXScintillator, 0, sZFiber);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  createAndRegisterTrans(fiberConeCutTransName, sXScintillator, 0, sZCone);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  createAndRegisterTrans(fiberHoleCutTransName, sXScintillator + sXShiftInnerRadiusScintillator, 0, sZFiber);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mRMinFiber.size(); ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keyword">const</span> std::string fiberShapeName = fiberName + std::to_string(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keyword">new</span> TGeoTubeSeg(fiberShapeName.c_str(), mRMinFiber[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], mRMaxFiber[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] - sEpsilon, dzFibers / 2, -90, 90);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="comment">// Composite shape</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    std::string boolFormula = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    boolFormula += fiberShapeName + <span class="stringliteral">&quot;:&quot;</span> + fiberTransName;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    boolFormula += <span class="stringliteral">&quot;-&quot;</span> + fiberSepCutName + <span class="stringliteral">&quot;:&quot;</span> + fiberTransName;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    boolFormula += <span class="stringliteral">&quot;-&quot;</span> + fiberConeCutName + <span class="stringliteral">&quot;:&quot;</span> + fiberConeCutTransName;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="comment">// Cut out the hole in the innermost fiber volume</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      boolFormula += <span class="stringliteral">&quot;-&quot;</span> + fiberHoleCutName + <span class="stringliteral">&quot;:&quot;</span> + fiberHoleCutTransName;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// Remove holes for screws and rods</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    boolFormula += <span class="stringliteral">&quot;-&quot;</span> + sScrewHolesCSName;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    boolFormula += <span class="stringliteral">&quot;-&quot;</span> + sRodHolesCSName;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keyword">const</span> TGeoCompositeShape* fiberCS = <span class="keyword">new</span> TGeoCompositeShape((fiberShapeName + <span class="stringliteral">&quot;CS&quot;</span>).c_str(), boolFormula.c_str());</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">// If modifying materials, make sure the appropriate initialization is done in initializeXxxMedium() methods</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keyword">new</span> TGeoVolume(createVolumeName(sFiberName, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>).c_str(), fiberCS, mMediumFiber[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;}</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="keywordtype">void</span> Geometry::initializeScrews()</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;{</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sNumberOfScrewTypes; ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keyword">const</span> std::string screwName = createVolumeName(sScrewName, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keyword">const</span> TGeoShape* screwShape = createScrewShape(screwName + <span class="stringliteral">&quot;Shape&quot;</span>, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, 0, 0, 0);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="comment">// If modifying materials, make sure the appropriate initialization is done in initializeXxxMedium() methods</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keyword">new</span> TGeoVolume(screwName.c_str(), screwShape, mMediumScrewTypes[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;}</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="keywordtype">void</span> Geometry::initializeRods()</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;{</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sNumberOfRodTypes; ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keyword">const</span> std::string rodName = createVolumeName(sRodName, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keyword">const</span> TGeoShape* rodShape = createRodShape(rodName + <span class="stringliteral">&quot;Shape&quot;</span>, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, -sEpsilon, -sEpsilon);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">// If modifying materials, make sure the appropriate initialization is done in initializeXxxMedium() methods</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keyword">new</span> TGeoVolume(rodName.c_str(), rodShape, mMediumRodTypes[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;}</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="keywordtype">void</span> Geometry::initializeMetalContainer()</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;{</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// The metal container is constructed starting from the backplate. The backplate is positioned first, relative to</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// the scintillator cells. The rest of the container parts are positioned relative to the backplate.</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="comment">// Caution: some position variables are in global coords, and some are relative to some other part of the container</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">// Backplate</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="keyword">const</span> std::string backPlateName = <span class="stringliteral">&quot;FV0_BackPlate&quot;</span>;                        <span class="comment">// the full backplate</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keyword">const</span> std::string backPlateStandName = backPlateName + <span class="stringliteral">&quot;Stand&quot;</span>;           <span class="comment">// the stand part of the backplate</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keyword">const</span> std::string backPlateHoleName = backPlateName + <span class="stringliteral">&quot;Hole&quot;</span>;             <span class="comment">// the hole in the middle of the backplate</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keyword">const</span> std::string backPlateHoleCutName = backPlateHoleName + <span class="stringliteral">&quot;Cut&quot;</span>;       <span class="comment">// extension of the hole</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keyword">const</span> std::string backPlateStandTransName = backPlateStandName + <span class="stringliteral">&quot;Trans&quot;</span>; <span class="comment">// shift of the backplate stand</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keyword">const</span> std::string backPlateHoleTransName = backPlateHoleName + <span class="stringliteral">&quot;Trans&quot;</span>;   <span class="comment">// shift of the backplate inner radius</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keyword">new</span> TGeoTubeSeg(backPlateName.c_str(), 0, sDrMaxContainerBack, sDzContainerBack / 2, -90, 90);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keyword">new</span> TGeoBBox(backPlateStandName.c_str(), sDxContainerStand / 2, (sDrMaxContainerBack + sDyContainerStand) / 2,</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;               sDzContainerBack / 2);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keyword">new</span> TGeoTubeSeg(backPlateHoleName.c_str(), 0, sDrContainerHole, sDzContainerBack / 2, -90, 90);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="keyword">new</span> TGeoBBox(backPlateHoleCutName.c_str(), -sXShiftContainerHole, sDrContainerHole, sDzContainerBack);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  createAndRegisterTrans(backPlateStandTransName, sDxContainerStand / 2,</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                         -(sDrMaxContainerBack + sDyContainerStand) / 2, 0);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  createAndRegisterTrans(backPlateHoleTransName, sXShiftContainerHole, 0, 0);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">// Backplate composite shape</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  std::string backPlateBoolFormula = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  backPlateBoolFormula += backPlateName;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  backPlateBoolFormula += <span class="stringliteral">&quot;+&quot;</span> + backPlateStandName + <span class="stringliteral">&quot;:&quot;</span> + backPlateStandTransName;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  backPlateBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + backPlateHoleName + <span class="stringliteral">&quot;:&quot;</span> + backPlateHoleTransName;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  backPlateBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + backPlateHoleCutName;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keyword">const</span> std::string backPlateCSName = backPlateName + <span class="stringliteral">&quot;CS&quot;</span>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keyword">const</span> std::string backPlateCSTransName = backPlateCSName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keyword">new</span> TGeoCompositeShape(backPlateCSName.c_str(), backPlateBoolFormula.c_str());</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  createAndRegisterTrans(backPlateCSTransName, 0, 0, sZContainerBack);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// Frontplate</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// the z-position o the frontplate</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> zPosFrontPlate = sZContainerFront;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">// the height of the total stand overlapping with the rest of the plate</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dyFrontPlateStand = sDyContainerStand + (sDrMaxContainerFront - sDrMinContainerFront) / 2;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// the y-position of the total stand</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> yPosFrontPlateStand = -sDrMaxContainerFront - sDyContainerStand + dyFrontPlateStand / 2;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keyword">const</span> std::string frontPlateName = <span class="stringliteral">&quot;FV0_FrontPlate&quot;</span>;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keyword">const</span> std::string frontPlateStandName = frontPlateName + <span class="stringliteral">&quot;Stand&quot;</span>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keyword">const</span> std::string frontPlateTransName = frontPlateName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keyword">const</span> std::string frontPlateStandTransName = frontPlateStandName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keyword">new</span> TGeoTubeSeg(frontPlateName.c_str(), sDrMinContainerFront, sDrMaxContainerFront, sDzContainerFront / 2, -90, 90);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keyword">new</span> TGeoBBox(frontPlateStandName.c_str(), sDxContainerStand / 2, dyFrontPlateStand / 2, sDzContainerBack / 2);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  createAndRegisterTrans(frontPlateTransName, 0, 0, zPosFrontPlate);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  createAndRegisterTrans(frontPlateStandTransName, sDxContainerStand / 2, yPosFrontPlateStand, 0);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// Frontplate cone composite shape</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  std::string frontPlateBoolFormula = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  frontPlateBoolFormula += frontPlateName;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  frontPlateBoolFormula += <span class="stringliteral">&quot;+&quot;</span> + frontPlateStandName + <span class="stringliteral">&quot;:&quot;</span> + frontPlateStandTransName;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keyword">const</span> std::string frontPlateCSName = frontPlateName + <span class="stringliteral">&quot;CS&quot;</span>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keyword">new</span> TGeoCompositeShape(frontPlateCSName.c_str(), frontPlateBoolFormula.c_str());</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">// Frontplate cone</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="comment">// radial thickness of frontplate cone in the xy-plane</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> thicknessFrontPlateCone = sXYThicknessContainerCone;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// z-position of the frontplate cone relative to the frontplate</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> zPosCone = sDzContainerFront / 2 - sDzContainerCone / 2;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keyword">const</span> std::string frontPlateConeName = <span class="stringliteral">&quot;FV0_FrontPlateCone&quot;</span>;                <span class="comment">// no volume with this name</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keyword">const</span> std::string frontPlateConeShieldName = frontPlateConeName + <span class="stringliteral">&quot;Shield&quot;</span>; <span class="comment">// the &quot;sides&quot; of the cone</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keyword">const</span> std::string frontPlateConeShieldTransName = frontPlateConeShieldName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keyword">new</span> TGeoConeSeg(frontPlateConeShieldName.c_str(), sDzContainerCone / 2, sDrMinContainerCone,</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                  sDrMinContainerCone + thicknessFrontPlateCone, sDrMinContainerFront - thicknessFrontPlateCone,</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                  sDrMinContainerFront,</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                  -90, 90);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  createAndRegisterTrans(frontPlateConeShieldTransName, 0, 0, zPosCone);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">// Frontplate cone &quot;bottom&quot;</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">// z-position of the cone bottom relative to the frontplate</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> zPosConePlate = sDzContainerFront / 2 - sDzContainerCone + thicknessFrontPlateCone / 2;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// the bottom of the cone</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keyword">const</span> std::string frontPlateConePlateName = frontPlateConeName + <span class="stringliteral">&quot;Plate&quot;</span>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keyword">new</span> TGeoTubeSeg(frontPlateConePlateName.c_str(), 0, sDrMinContainerCone + thicknessFrontPlateCone,</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                  thicknessFrontPlateCone / 2, -90, 90);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="comment">// Frontplate cone bottom composite shape</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  std::string frontPlateConePlateCSBoolFormula;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  frontPlateConePlateCSBoolFormula += frontPlateConePlateName;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  frontPlateConePlateCSBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + backPlateHoleName + <span class="stringliteral">&quot;:&quot;</span> + backPlateHoleTransName;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keyword">const</span> std::string frontPlateConePlateCSName = frontPlateConePlateName + <span class="stringliteral">&quot;CS&quot;</span>;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keyword">const</span> std::string frontPlateConePlateCSTransName = frontPlateConePlateCSName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keyword">new</span> TGeoCompositeShape(frontPlateConePlateCSName.c_str(), frontPlateConePlateCSBoolFormula.c_str());</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  createAndRegisterTrans(frontPlateConePlateCSTransName, 0, 0, zPosConePlate);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="comment">// Frontplate cone composite shape</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  std::string frontPlateConeCSBoolFormula = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  frontPlateConeCSBoolFormula += frontPlateConeShieldName + <span class="stringliteral">&quot;:&quot;</span> + frontPlateConeShieldTransName;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  frontPlateConeCSBoolFormula += <span class="stringliteral">&quot;+&quot;</span> + frontPlateConePlateCSName + <span class="stringliteral">&quot;:&quot;</span> + frontPlateConePlateCSTransName;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="keyword">const</span> std::string frontPlateConeCSName = frontPlateConeName + <span class="stringliteral">&quot;CS&quot;</span>;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keyword">new</span> TGeoCompositeShape(frontPlateConeCSName.c_str(), frontPlateConeCSBoolFormula.c_str());</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="comment">// Shields</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzShieldGap = 0.7;                         <span class="comment">// z-distance between the shields and the front- and backplate outer edges (in z-direction)</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzShield = sDzContainer - 2 * dzShieldGap; <span class="comment">// depth of the shields</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// Outer shield</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> zPosOuterShield = (sZContainerBack + sZContainerFront) / 2; <span class="comment">// z-position of the outer shield</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="keyword">const</span> std::string outerShieldName = <span class="stringliteral">&quot;FV0_OuterShield&quot;</span>;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keyword">const</span> std::string outerShieldTransName = outerShieldName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keyword">new</span> TGeoTubeSeg(outerShieldName.c_str(), sDrMinContainerOuterShield, sDrMaxContainerOuterShield, dzShield / 2, -90,</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                  90);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  createAndRegisterTrans(outerShieldTransName, 0, 0, zPosOuterShield);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">// Inner shield</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzInnerShield = sDzContainer - sDzContainerCone - dzShieldGap;                              <span class="comment">// depth of the inner shield</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> zPosInnerShield = sZContainerBack - sDzContainerBack / 2 + dzShieldGap + dzInnerShield / 2; <span class="comment">// z-position of the inner shield relative to the backplate</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keyword">const</span> std::string innerShieldName = <span class="stringliteral">&quot;FV0_InnerShield&quot;</span>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keyword">const</span> std::string innerShieldCutName = innerShieldName + <span class="stringliteral">&quot;Cut&quot;</span>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keyword">new</span> TGeoTubeSeg(innerShieldName.c_str(), sDrMinContainerInnerShield, sDrMaxContainerInnerShield, dzInnerShield / 2, -90, 90);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keyword">new</span> TGeoBBox(innerShieldCutName.c_str(), fabs(sXShiftContainerHole), sDrMaxContainerInnerShield, dzInnerShield / 2);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// Inner shield composite shape</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  std::string innerShieldCSBoolFormula;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  innerShieldCSBoolFormula = innerShieldName;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  innerShieldCSBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + innerShieldCutName;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keyword">const</span> std::string innerShieldCSName = innerShieldName + <span class="stringliteral">&quot;CS&quot;</span>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="keyword">const</span> std::string innerShieldCSTransName = innerShieldCSName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keyword">new</span> TGeoCompositeShape(innerShieldCSName.c_str(), innerShieldCSBoolFormula.c_str());</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  createAndRegisterTrans(innerShieldCSTransName, sXShiftContainerHole, 0, zPosInnerShield);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// Cover</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzCover = sDzContainer;                       <span class="comment">// Depth of the covers</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> zPosCoverConeCut = zPosFrontPlate + zPosCone; <span class="comment">// Set the cone cut relative to the frontplate so that the exact position of the aluminium cone part can be used.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="keyword">const</span> std::string coverName = <span class="stringliteral">&quot;FV0_Cover&quot;</span>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keyword">const</span> std::string coverConeCutName = coverName + <span class="stringliteral">&quot;ConeCut&quot;</span>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keyword">const</span> std::string coverHoleCutName = coverName + <span class="stringliteral">&quot;HoleCut&quot;</span>;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keyword">new</span> TGeoBBox(coverName.c_str(), sDxContainerCover / 2, sDrMaxContainerOuterShield, dzCover / 2);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keyword">new</span> TGeoCone(coverConeCutName.c_str(), sDzContainerCone / 2, 0, sDrMinContainerCone + thicknessFrontPlateCone, 0,</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;               sDrMinContainerFront);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keyword">new</span> TGeoTubeSeg(coverHoleCutName.c_str(), 0, sDrMinContainerInnerShield, dzCover / 2, 0, 360);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="keyword">const</span> std::string coverTransName = coverName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keyword">const</span> std::string coverConeCutTransName = coverConeCutName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keyword">const</span> std::string coverHoleCutTransName = coverHoleCutName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  createAndRegisterTrans(coverTransName, sDxContainerCover / 2, 0, zPosOuterShield);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  createAndRegisterTrans(coverConeCutTransName, 0, 0, zPosCoverConeCut);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  createAndRegisterTrans(coverHoleCutTransName.c_str(), sXShiftContainerHole, 0, zPosOuterShield);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// Cover composite shape</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  std::string coverCSBoolFormula = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  coverCSBoolFormula += coverName + <span class="stringliteral">&quot;:&quot;</span> + coverTransName;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  coverCSBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + coverConeCutName + <span class="stringliteral">&quot;:&quot;</span> + coverConeCutTransName;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  coverCSBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + coverHoleCutName + <span class="stringliteral">&quot;:&quot;</span> + coverHoleCutTransName;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keyword">const</span> std::string coverCSName = coverName + <span class="stringliteral">&quot;CS&quot;</span>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keyword">new</span> TGeoCompositeShape(coverCSName.c_str(), coverCSBoolFormula.c_str());</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="comment">// Stand bottom</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzStandBottom = sDzContainer - sDzContainerBack - sDzContainerFront;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dyStandBottomGap = 0.5; <span class="comment">// This bottom part is not vertically aligned with the &quot;front and backplate stands&quot;</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dxStandBottomHole = 9.4;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzStandBottomHole = 20.4;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dxStandBottomHoleSpacing = 3.1;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keyword">const</span> std::string standName = <span class="stringliteral">&quot;FV0_StandBottom&quot;</span>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keyword">const</span> std::string standHoleName = standName + <span class="stringliteral">&quot;Hole&quot;</span>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keyword">new</span> TGeoBBox(standName.c_str(), sDxContainerStandBottom / 2, sDyContainerStandBottom / 2, dzStandBottom / 2);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keyword">new</span> TGeoBBox(standHoleName.c_str(), dxStandBottomHole / 2, sDyContainerStandBottom / 2 + sEpsilon,</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;               dzStandBottomHole / 2);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keyword">const</span> std::string standHoleTrans1Name = standHoleName + <span class="stringliteral">&quot;Trans1&quot;</span>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keyword">const</span> std::string standHoleTrans2Name = standHoleName + <span class="stringliteral">&quot;Trans2&quot;</span>;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keyword">const</span> std::string standHoleTrans3Name = standHoleName + <span class="stringliteral">&quot;Trans3&quot;</span>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  createAndRegisterTrans(standHoleTrans1Name, -dxStandBottomHoleSpacing - dxStandBottomHole, 0, 0);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  createAndRegisterTrans(standHoleTrans2Name, 0, 0, 0);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  createAndRegisterTrans(standHoleTrans3Name, dxStandBottomHoleSpacing + dxStandBottomHole, 0, 0);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="comment">// Stand bottom composite shape</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keyword">const</span> std::string standCSName = standName + <span class="stringliteral">&quot;CS&quot;</span>;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  std::string standBoolFormula = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  standBoolFormula += standName;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  standBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + standHoleName + <span class="stringliteral">&quot;:&quot;</span> + standHoleTrans1Name;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  standBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + standHoleName + <span class="stringliteral">&quot;:&quot;</span> + standHoleTrans2Name;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  standBoolFormula += <span class="stringliteral">&quot;-&quot;</span> + standHoleName + <span class="stringliteral">&quot;:&quot;</span> + standHoleTrans3Name;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="keyword">new</span> TGeoCompositeShape(standCSName.c_str(), standBoolFormula.c_str());</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="keyword">const</span> std::string standCSTransName = standCSName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  createAndRegisterTrans(standCSTransName.c_str(),</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                         sDxContainerStand - sDxContainerStandBottom / 2,</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                         -(sDrMaxContainerBack + sDyContainerStand) + sDyContainerStandBottom / 2 + dyStandBottomGap,</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                         sZContainerMid);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="comment">// Composite shape</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  std::string boolFormula = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  boolFormula += backPlateCSName + <span class="stringliteral">&quot;:&quot;</span> + backPlateCSTransName;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  boolFormula += <span class="stringliteral">&quot;+&quot;</span> + frontPlateCSName + <span class="stringliteral">&quot;:&quot;</span> + frontPlateTransName;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  boolFormula += <span class="stringliteral">&quot;+&quot;</span> + frontPlateConeCSName + <span class="stringliteral">&quot;:&quot;</span> + frontPlateTransName;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  boolFormula += <span class="stringliteral">&quot;+&quot;</span> + outerShieldName + <span class="stringliteral">&quot;:&quot;</span> + outerShieldTransName;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  boolFormula += <span class="stringliteral">&quot;+&quot;</span> + innerShieldCSName + <span class="stringliteral">&quot;:&quot;</span> + innerShieldCSTransName;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  boolFormula += <span class="stringliteral">&quot;+&quot;</span> + coverCSName;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  boolFormula += <span class="stringliteral">&quot;+&quot;</span> + standCSName + <span class="stringliteral">&quot;:&quot;</span> + standCSTransName;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  boolFormula += <span class="stringliteral">&quot;-&quot;</span> + sScrewHolesCSName; <span class="comment">// Remove holes for screws</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  boolFormula += <span class="stringliteral">&quot;-&quot;</span> + sRodHolesCSName;   <span class="comment">// Remove holes for rods</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keyword">const</span> std::string aluContCSName = <span class="stringliteral">&quot;FV0_AluContCS&quot;</span>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keyword">const</span> TGeoCompositeShape* aluContCS = <span class="keyword">new</span> TGeoCompositeShape(aluContCSName.c_str(), boolFormula.c_str());</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// Volume</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keyword">const</span> std::string aluContName = createVolumeName(sContainerName);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keyword">const</span> TGeoMedium* medium = gGeoManager-&gt;GetMedium(<span class="stringliteral">&quot;FV0_Aluminium$&quot;</span>);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keyword">new</span> TGeoVolume(aluContName.c_str(), aluContCS, medium);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;}</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="keywordtype">void</span> Geometry::assembleSensVols(TGeoVolume* vFV0)<span class="keyword"> const</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keywordflow">if</span> (mEnabledComponents.at(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a4d272d9bdbb6c3b7418f251c618f3f8a">eScintillator</a>)) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    assembleScintSectors(vFV0);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;}</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="keywordtype">void</span> Geometry::assembleNonSensVols(TGeoVolume* vFV0)<span class="keyword"> const</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordflow">if</span> (mEnabledComponents.at(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a7ebc27b5b7c02de6c6ad904a4169b8e9">ePlastics</a>)) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    assemblePlasticSectors(vFV0);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordflow">if</span> (mEnabledComponents.at(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a2c0afe361825752b9df3d6fe7e013527">eFibers</a>)) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    assembleFibers(vFV0);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  }</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keywordflow">if</span> (mEnabledComponents.at(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a85ee913a777f2e7c5e68f322f320c435">eScrews</a>)) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    assembleScrews(vFV0);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  }</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">if</span> (mEnabledComponents.at(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a0feac39771da091f414ba8852a7d93d1">eRods</a>)) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    assembleRods(vFV0);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">if</span> (mEnabledComponents.at(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a68cf524ac7f9178b4b64c47f314427a0">eContainer</a>)) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    assembleMetalContainer(vFV0);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  }</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="keywordtype">void</span> Geometry::assembleScintSectors(TGeoVolume* vFV0)<span class="keyword"> const</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  TGeoVolumeAssembly* sectors = buildSectorAssembly(sScintillatorName);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  vFV0-&gt;AddNode(sectors, 0, mRightTransformation);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  vFV0-&gt;AddNode(sectors, 1, mLeftTransformation);</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;}</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="keywordtype">void</span> Geometry::assemblePlasticSectors(TGeoVolume* vFV0)<span class="keyword"> const</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  TGeoVolumeAssembly* sectors = buildSectorAssembly(sPlasticName);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// Move the plastic cells next to the scintillator cells</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  TGeoHMatrix* leftTrans = <span class="keyword">new</span> TGeoHMatrix(*mLeftTransformation);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  leftTrans-&gt;SetDz(leftTrans-&gt;GetTranslation()[2] + sZPlastic);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  TGeoMatrix* rightTrans = <span class="keyword">new</span> TGeoHMatrix(*mRightTransformation);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  rightTrans-&gt;SetDz(rightTrans-&gt;GetTranslation()[2] + sZPlastic);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  vFV0-&gt;AddNode(sectors, 0, rightTrans);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  vFV0-&gt;AddNode(sectors, 1, leftTrans);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;}</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="keywordtype">void</span> Geometry::assembleFibers(TGeoVolume* vFV0)<span class="keyword"> const</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  TGeoVolumeAssembly* fibers = <span class="keyword">new</span> TGeoVolumeAssembly(createVolumeName(<span class="stringliteral">&quot;FIBERS&quot;</span>).c_str());</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mRMinFiber.size(); ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    TGeoVolume* fiber = gGeoManager-&gt;GetVolume(createVolumeName(sFiberName, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>).c_str());</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">if</span> (!fiber) {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(WARNING) &lt;&lt; <span class="stringliteral">&quot;FV0 Geometry::assembleFibers(): Fiber volume no. &quot;</span> &lt;&lt; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="stringliteral">&quot; not found.&quot;</span>;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    fibers-&gt;AddNode(fiber, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  vFV0-&gt;AddNode(fibers, 1, mLeftTransformation);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  vFV0-&gt;AddNode(fibers, 2, mRightTransformation);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;}</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="keywordtype">void</span> Geometry::assembleScrews(TGeoVolume* vFV0)<span class="keyword"> const</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  TGeoVolumeAssembly* screws = <span class="keyword">new</span> TGeoVolumeAssembly(createVolumeName(<span class="stringliteral">&quot;SCREWS&quot;</span>).c_str());</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="comment">// If modifying something here, make sure screw initialization is OK</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mScrewPos.size(); ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    TGeoVolume* screw = gGeoManager-&gt;GetVolume(createVolumeName(sScrewName, mScrewTypeIDs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]).c_str());</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">if</span> (!screw) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(WARNING) &lt;&lt; <span class="stringliteral">&quot;FV0 Geometry::assembleScrews(): Screw no. &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; not found&quot;</span>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      screws-&gt;AddNode(screw, i, <span class="keyword">new</span> TGeoTranslation(mScrewPos[i][0] + sXShiftScrews, mScrewPos[i][1], mScrewPos[i][2]));</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    }</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  vFV0-&gt;AddNode(screws, 1, mLeftTransformation);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  vFV0-&gt;AddNode(screws, 2, mRightTransformation);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;}</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="keywordtype">void</span> Geometry::assembleRods(TGeoVolume* vFV0)<span class="keyword"> const</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  TGeoVolumeAssembly* rods = <span class="keyword">new</span> TGeoVolumeAssembly(createVolumeName(<span class="stringliteral">&quot;RODS&quot;</span>).c_str());</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="comment">// If modifying something here, make sure rod initialization is OK</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mRodPos.size(); ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    TGeoVolume* rod = gGeoManager-&gt;GetVolume(createVolumeName(sRodName, mRodTypeIDs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]).c_str());</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">if</span> (!rod) {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;FV0 Geometry::assembleRods(): Rod no. &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; not found&quot;</span>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      rods-&gt;AddNode(rod, i, <span class="keyword">new</span> TGeoTranslation(mRodPos[i][0] + sXShiftScrews, mRodPos[i][1], mRodPos[i][2]));</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  vFV0-&gt;AddNode(rods, 1, mLeftTransformation);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  vFV0-&gt;AddNode(rods, 2, mRightTransformation);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="keywordtype">void</span> Geometry::assembleMetalContainer(TGeoVolume* volV0)<span class="keyword"> const</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  TGeoVolume* container = gGeoManager-&gt;GetVolume(createVolumeName(sContainerName).c_str());</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="keywordflow">if</span> (!container) {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(WARNING) &lt;&lt; <span class="stringliteral">&quot;FV0: Could not find container volume&quot;</span>;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    volV0-&gt;AddNode(container, 1, mLeftTransformation);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    volV0-&gt;AddNode(container, 2, mRightTransformation);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;}</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;TGeoVolumeAssembly* Geometry::buildSectorAssembly(<span class="keyword">const</span> std::string&amp; cellName)<span class="keyword"> const</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  TGeoVolumeAssembly* assembly = <span class="keyword">new</span> TGeoVolumeAssembly(createVolumeName(cellName).c_str());</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSector = 0; iSector &lt; mSectorTrans.size(); ++iSector) {</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    TGeoVolumeAssembly* sector = buildSector(cellName, iSector);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    assembly-&gt;AddNode(sector, iSector, mSectorTrans[iSector]);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  }</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordflow">return</span> assembly;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;}</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;TGeoVolumeAssembly* Geometry::buildSector(<span class="keyword">const</span> std::string&amp; cellType, <span class="keyword">const</span> <span class="keywordtype">int</span> iSector)<span class="keyword"> const</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  TGeoVolumeAssembly* sector = <span class="keyword">new</span> TGeoVolumeAssembly(createVolumeName(cellType + sSectorName, iSector).c_str());</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sNumberOfCellRings; ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    TGeoVolume* cell = gGeoManager-&gt;GetVolume(createVolumeName(cellType + sCellName + sCellTypes[iSector], <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>).c_str());</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">if</span> (!cell) {</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(WARNING) &lt;&lt; <span class="stringliteral">&quot;FV0 Geometry::buildSector(): Couldn&#39;t find cell volume no. &quot;</span> &lt;&lt; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      sector-&gt;AddNode(cell, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keyword">new</span> TGeoTranslation(sXScintillator, 0, 0));</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">return</span> sector;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;}</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;TGeoShape* Geometry::createScrewShape(<span class="keyword">const</span> std::string&amp; shapeName, <span class="keyword">const</span> <span class="keywordtype">int</span> screwTypeID, <span class="keyword">const</span> <span class="keywordtype">float</span> xEpsilon,</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                                      <span class="keyword">const</span> <span class="keywordtype">float</span> yEpsilon, <span class="keyword">const</span> <span class="keywordtype">float</span> zEpsilon)<span class="keyword"> const</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> xyEpsilon = (fabs(xEpsilon) &gt; fabs(yEpsilon)) ? xEpsilon : yEpsilon;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzMax = sDzMaxScrewTypes[screwTypeID] / 2 + zEpsilon;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzMin = sDzMinScrewTypes[screwTypeID] / 2 + zEpsilon;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="keyword">const</span> std::string thinPartName = shapeName + <span class="stringliteral">&quot;Thin&quot;</span>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="keyword">const</span> std::string thickPartName = shapeName + <span class="stringliteral">&quot;Thick&quot;</span>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keyword">const</span> std::string thickPartTransName = thickPartName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">if</span> ((screwTypeID == 0) || (screwTypeID == 5)) { <span class="comment">// for screw types 0 and 5 there is no thick part</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> TGeoTube(shapeName.c_str(), 0, sDrMinScrewTypes[screwTypeID] + xyEpsilon, dzMax);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keyword">new</span> TGeoTube(thinPartName.c_str(), 0, sDrMinScrewTypes[screwTypeID] + xyEpsilon, dzMax);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keyword">new</span> TGeoTube(thickPartName.c_str(), 0, sDrMaxScrewTypes[screwTypeID] + xyEpsilon, dzMin);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    createAndRegisterTrans(thickPartTransName, 0, 0, -dzMax - sZShiftScrew + sDzScintillator + sDzPlastic + dzMin);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    std::string boolFormula = thinPartName;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    boolFormula += <span class="stringliteral">&quot;+&quot;</span> + thickPartName + <span class="stringliteral">&quot;:&quot;</span> + thickPartTransName;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> TGeoCompositeShape(shapeName.c_str(), boolFormula.c_str());</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;}</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;TGeoShape* Geometry::createRodShape(<span class="keyword">const</span> std::string&amp; shapeName, <span class="keyword">const</span> <span class="keywordtype">int</span> rodTypeID, <span class="keyword">const</span> <span class="keywordtype">float</span> xEpsilon,</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">float</span> yEpsilon, <span class="keyword">const</span> <span class="keywordtype">float</span> zEpsilon)<span class="keyword"> const</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dxMin = sDxMinRodTypes[rodTypeID] / 2 + xEpsilon;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dxMax = sDxMaxRodTypes[rodTypeID] / 2 + xEpsilon;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dyMin = sDyMinRodTypes[rodTypeID] / 2 + yEpsilon;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dyMax = sDyMaxRodTypes[rodTypeID] / 2 + yEpsilon;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzMax = sDzMaxRodTypes[rodTypeID] / 2 + zEpsilon;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dzMin = sDzMinRodTypes[rodTypeID] / 2 + zEpsilon;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keyword">const</span> std::string thinPartName = shapeName + <span class="stringliteral">&quot;Thin&quot;</span>;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keyword">const</span> std::string thickPartName = shapeName + <span class="stringliteral">&quot;Thick&quot;</span>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keyword">const</span> std::string thickPartTransName = thickPartName + <span class="stringliteral">&quot;Trans&quot;</span>;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keyword">new</span> TGeoBBox(thinPartName.c_str(), dxMin, dyMin, dzMax);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keyword">new</span> TGeoBBox(thickPartName.c_str(), dxMax, dyMax, dzMin);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  createAndRegisterTrans(thickPartTransName, dxMax - dxMin, 0,</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                         -dzMax - sZShiftRod + sDzScintillator + sDzPlastic + dzMin);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  std::string boolFormula = thinPartName;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  boolFormula += <span class="stringliteral">&quot;+&quot;</span> + thickPartName + <span class="stringliteral">&quot;:&quot;</span> + thickPartTransName;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  TGeoCompositeShape* rodShape = <span class="keyword">new</span> TGeoCompositeShape(shapeName.c_str(), boolFormula.c_str());</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordflow">return</span> rodShape;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;}</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;TGeoTranslation* Geometry::createAndRegisterTrans(<span class="keyword">const</span> std::string&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>, <span class="keyword">const</span> <span class="keywordtype">double</span> dx, <span class="keyword">const</span> <span class="keywordtype">double</span> dy,</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                                                  <span class="keyword">const</span> <span class="keywordtype">double</span> dz)<span class="keyword"> const</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  TGeoTranslation* trans = <span class="keyword">new</span> TGeoTranslation(name.c_str(), dx, dy, dz);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  trans-&gt;RegisterYourself();</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="keywordflow">return</span> trans;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;}</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;TGeoRotation* Geometry::createAndRegisterRot(<span class="keyword">const</span> std::string&amp; name, <span class="keyword">const</span> <span class="keywordtype">double</span> phi, <span class="keyword">const</span> <span class="keywordtype">double</span> theta,</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                                             <span class="keyword">const</span> <span class="keywordtype">double</span> psi)<span class="keyword"> const</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  TGeoRotation* rot = <span class="keyword">new</span> TGeoRotation(name.c_str(), phi, theta, psi);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  rot-&gt;RegisterYourself();</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">return</span> rot;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;}</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="keyword">const</span> std::string Geometry::createVolumeName(<span class="keyword">const</span> std::string&amp; volumeType, <span class="keyword">const</span> <span class="keywordtype">int</span> number)<span class="keyword"> const</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keywordflow">return</span> sDetectorName + volumeType + ((number &gt;= 0) ? std::to_string(number) : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="keywordtype">void</span> Geometry::initializeCellCenters()</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;{</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> phi0 = 67.5 * TMath::DegToRad(); <span class="comment">// starting phi of one of the sectors</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> dphi = 45. * TMath::DegToRad();  <span class="comment">// phi difference between neighbouring sectors</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> lutSect2Phi[sNumberOfCellSectors * 2] = {phi0, phi0 - dphi, phi0 - 2 * dphi, phi0 - 3 * dphi, phi0 + dphi, phi0 + 2 * dphi, phi0 + 3 * dphi, phi0 + 4 * dphi};</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> cellId = 0; cellId &lt; sNumberOfCells; cellId++) {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a> = 0.5 * (sCellRingRadii[sCellToRing[cellId]] + sCellRingRadii[sCellToRing[cellId] + 1]);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a> = sXGlobal + r * TMath::Cos(lutSect2Phi[sCellToSector[cellId]]);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a> = sYGlobal + r * TMath::Sin(lutSect2Phi[sCellToSector[cellId]]);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="../../d5/daf/classROOT_1_1Math_1_1PositionVector3D.html">Point3D&lt;float&gt;</a>* p = &amp;mCellCenter.at(cellId);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    p-&gt;SetCoordinates(x, y, sZGlobal);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  }</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="keywordtype">void</span> Geometry::initializeReadoutCenters()</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;{</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> channelId = 0; channelId &lt; sNumberOfReadoutChannels; channelId++) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <a class="code" href="../../d5/daf/classROOT_1_1Math_1_1PositionVector3D.html">Point3D&lt;float&gt;</a>* p = &amp;mReadoutCenter.at(channelId);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad88d3cce29aec1231f633844211d5d98">isRing5</a>(channelId)) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      p-&gt;SetCoordinates(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a4894f157e70dfe7643c45f7eb15aee80">getCellCenter</a>(channelId).<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a77854b1fceea9fca2fa33736d20fae6a">X</a>(), <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a4894f157e70dfe7643c45f7eb15aee80">getCellCenter</a>(channelId).Y(), <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a4894f157e70dfe7643c45f7eb15aee80">getCellCenter</a>(channelId).Z());</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> numberOfSectorsR5 = sNumberOfCellSectors * 4; <span class="comment">// from both halves of the detector</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span> phi0 = 78.75 * TMath::DegToRad();           <span class="comment">// starting phi of one of the sectors</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span> dphi = 22.5 * TMath::DegToRad();            <span class="comment">// phi difference between neighbouring sectors</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span> lutReadoutSect2Phi[numberOfSectorsR5] =</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        {phi0 - 0 * dphi, phi0 - 1 * dphi, phi0 - 2 * dphi, phi0 - 3 * dphi,</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;         phi0 - 4 * dphi, phi0 - 5 * dphi, phi0 - 6 * dphi, phi0 - 7 * dphi,</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;         phi0 + 1 * dphi, phi0 + 2 * dphi, phi0 + 3 * dphi, phi0 + 4 * dphi,</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;         phi0 + 5 * dphi, phi0 + 6 * dphi, phi0 + 7 * dphi, phi0 + 8 * dphi};</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordtype">int</span> iReadoutSector = channelId - ((sNumberOfCellRings - 1) * sNumberOfCellSectors * 2);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a> = 0.5 * (sCellRingRadii[4] + sCellRingRadii[5]);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a> = sXGlobal + r * TMath::Cos(lutReadoutSect2Phi[iReadoutSector]);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a> = sYGlobal + r * TMath::Sin(lutReadoutSect2Phi[iReadoutSector]);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      p-&gt;SetCoordinates(x, y, sZGlobal);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;}</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html">Geometry</a>* Geometry::sInstance = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">//Singleton access</span></div><div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a74e632460f2136465c8433721cea4602"> 1258</a></span>&#160;<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html">Geometry</a>* <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a74e632460f2136465c8433721cea4602">Geometry::instance</a>(<a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#abc44c220ba61424c5c5ee5a7983dcc2a">EGeoType</a> initType)</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;{</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="keywordflow">if</span> (!sInstance)</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;FV0 geometry instance created&quot;</span>;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  sInstance = <span class="keyword">new</span> <a class="code" href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad0cfa018c1e7a1fb433bac3bf6b218e2">Geometry</a>(initType);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordflow">return</span> sInstance;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div><div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_aff71e9a73c93b68c44716e824bc6982a"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#aff71e9a73c93b68c44716e824bc6982a">o2::fv0::Geometry::enableComponent</a></div><div class="ttdeci">const bool enableComponent(EGeoComponent component, bool enable=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html#l00084">Geometry.cxx:84</a></div></div>
<div class="ttc" id="namespaceo2_1_1fv0_html"><div class="ttname"><a href="../../d8/d41/namespaceo2_1_1fv0.html">o2::fv0</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbc/SimTraits_8h_source.html#l00136">SimTraits.h:136</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ad88d3cce29aec1231f633844211d5d98"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad88d3cce29aec1231f633844211d5d98">o2::fv0::Geometry::isRing5</a></div><div class="ttdeci">bool isRing5(UInt_t cellId)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html#l00129">Geometry.cxx:129</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_a4e97b838ac96d726227da91ec35a9650"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#a4e97b838ac96d726227da91ec35a9650">nullptr</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events Simulate correct bunch interactions instead of placing only the average number of events A value [n] sets TFlen for [n] collisions in Number of bunches per train Number of bunch trains Instantaneous interaction rate Do not simulate border Total number of collisions to be placed in the interior of all time Do not select random but walk over array of events in stride steps h QA settings const char Legend entries for data from comparison histogram files const char nullptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00044">qconfigoptions.h:44</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_a4894f157e70dfe7643c45f7eb15aee80"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a4894f157e70dfe7643c45f7eb15aee80">o2::fv0::Geometry::getCellCenter</a></div><div class="ttdeci">Point3D&lt; float &gt; &amp; getCellCenter(UInt_t cellId)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html#l00119">Geometry.cxx:119</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_abc44c220ba61424c5c5ee5a7983dcc2aa699cfef3c856ea7f78e325509a158022"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#abc44c220ba61424c5c5ee5a7983dcc2aa699cfef3c856ea7f78e325509a158022">o2::fv0::Geometry::eOnlySensitive</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00044">Geometry.h:44</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aee38b51639b577753f6a92029fb92000"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aee38b51639b577753f6a92029fb92000">z</a></div><div class="ttdeci">GLdouble GLdouble GLdouble z</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00843">glcorearb.h:843</a></div></div>
<div class="ttc" id="GPUCommonLogger_8h_html_aea3d0edfe28fc0325c636b2b33f0527a"><div class="ttname"><a href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a></div><div class="ttdeci">#define LOG(type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5b/GPUCommonLogger_8h_source.html#l00028">GPUCommonLogger.h:28</a></div></div>
<div class="ttc" id="classROOT_1_1Math_1_1PositionVector3D_html"><div class="ttname"><a href="../../d5/daf/classROOT_1_1Math_1_1PositionVector3D.html">ROOT::Math::PositionVector3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8b/DataFormats_2Reconstruction_2include_2ReconstructionDataFormats_2Track_8h_source.html#l00050">Track.h:50</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ad55e832122ab3a2833dcaa6507867678"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad55e832122ab3a2833dcaa6507867678">o2::fv0::Geometry::~Geometry</a></div><div class="ttdeci">~Geometry()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html#l00050">Geometry.cxx:50</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab0b5c7de20095d30091485d2c60a3dd5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab0b5c7de20095d30091485d2c60a3dd5">enable</a></div><div class="ttdeci">GLboolean enable</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l03991">glcorearb.h:3991</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5c4947d4516dd7cfa3505ce3a648a4ef"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a></div><div class="ttdeci">GLuint const GLchar * name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00781">glcorearb.h:781</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ae348d8b543a1fe1c35b9a2214752a573"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573">o2::fv0::Geometry::EGeoComponent</a></div><div class="ttdeci">EGeoComponent</div><div class="ttdoc">Geometry components possible to be enabled/disabled. Only enabled components will be created...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00050">Geometry.h:50</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_a97cdc676fdc9c8e182e8debdda0c4db1"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a97cdc676fdc9c8e182e8debdda0c4db1">o2::fv0::Geometry::getReadoutCenter</a></div><div class="ttdeci">Point3D&lt; float &gt; &amp; getReadoutCenter(UInt_t cellId)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html#l00124">Geometry.cxx:124</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ad0cfa018c1e7a1fb433bac3bf6b218e2"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ad0cfa018c1e7a1fb433bac3bf6b218e2">o2::fv0::Geometry::Geometry</a></div><div class="ttdeci">Geometry()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00062">Geometry.h:62</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_a74e632460f2136465c8433721cea4602"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a74e632460f2136465c8433721cea4602">o2::fv0::Geometry::instance</a></div><div class="ttdeci">static Geometry * instance(EGeoType initType=eUninitialized)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html#l01258">Geometry.cxx:1258</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ae348d8b543a1fe1c35b9a2214752a573a68cf524ac7f9178b4b64c47f314427a0"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a68cf524ac7f9178b4b64c47f314427a0">o2::fv0::Geometry::eContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00056">Geometry.h:56</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_af2b2268bcbc0edb2727845a15c4bb6d1"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#af2b2268bcbc0edb2727845a15c4bb6d1">o2::fv0::Geometry::getCurrentCellId</a></div><div class="ttdeci">const int getCurrentCellId(const TVirtualMC *fMC) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html#l00060">Geometry.cxx:60</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_a77854b1fceea9fca2fa33736d20fae6a"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#a77854b1fceea9fca2fa33736d20fae6a">X</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events Simulate correct bunch interactions instead of placing only the average number of events A value [n] sets TFlen for [n] collisions in Number of bunches per train Number of bunch trains Instantaneous interaction rate Do not simulate border Total number of collisions to be placed in the interior of all time Do not select random but walk over array of events in stride steps h QA settings const char Legend entries for data from comparison histogram files const char Store histograms in output root Do not run but just create PDFs from input root files Set cut for Q Compute the efficiency including impure tracks with fake contamination Maxmimum X(~radius) for reconstructed track position to take into accound for resolution QA in cm&quot;) AddOption(resPrimaries</div></div>
<div class="ttc" id="CPV_2base_2src_2Geometry_8cxx_html_a9656853246f0006a0378c587bc75e5aa"><div class="ttname"><a href="../../d2/d9f/CPV_2base_2src_2Geometry_8cxx.html#a9656853246f0006a0378c587bc75e5aa">ClassImp</a></div><div class="ttdeci">ClassImp(Geometry)</div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html">o2::fv0::Geometry</a></div><div class="ttdoc">FV0 Geometry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00033">Geometry.h:33</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_af8d3990e2a587a421de439b001aa7e97"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#af8d3990e2a587a421de439b001aa7e97">o2::fv0::Geometry::getGlobalPosition</a></div><div class="ttdeci">void getGlobalPosition(float &amp;x, float &amp;y, float &amp;z)</div><div class="ttdoc">Utility functions to be accessed externally. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html#l00112">Geometry.cxx:112</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ae348d8b543a1fe1c35b9a2214752a573a85ee913a777f2e7c5e68f322f320c435"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a85ee913a777f2e7c5e68f322f320c435">o2::fv0::Geometry::eScrews</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00054">Geometry.h:54</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_abc44c220ba61424c5c5ee5a7983dcc2aaf481a82be49be9e5f4754ce57134f0bf"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#abc44c220ba61424c5c5ee5a7983dcc2aaf481a82be49be9e5f4754ce57134f0bf">o2::fv0::Geometry::eRough</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00045">Geometry.h:45</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ae348d8b543a1fe1c35b9a2214752a573a7ebc27b5b7c02de6c6ad904a4169b8e9"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a7ebc27b5b7c02de6c6ad904a4169b8e9">o2::fv0::Geometry::ePlastics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00052">Geometry.h:52</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ae348d8b543a1fe1c35b9a2214752a573a0feac39771da091f414ba8852a7d93d1"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a0feac39771da091f414ba8852a7d93d1">o2::fv0::Geometry::eRods</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00055">Geometry.h:55</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_a172fd95bfbeb66bd7409ddab898190f9"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#a172fd95bfbeb66bd7409ddab898190f9">o2::fv0::Geometry::buildGeometry</a></div><div class="ttdeci">void buildGeometry() const</div><div class="ttdoc">Build the geometry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx_source.html#l00094">Geometry.cxx:94</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ae348d8b543a1fe1c35b9a2214752a573a4d272d9bdbb6c3b7418f251c618f3f8a"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a4d272d9bdbb6c3b7418f251c618f3f8a">o2::fv0::Geometry::eScintillator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00051">Geometry.h:51</a></div></div>
<div class="ttc" id="classo2_1_1ft0_1_1Geometry_html_a4c301c163c63d21ed08c17b0f4e131d3"><div class="ttname"><a href="../../d1/db6/classo2_1_1ft0_1_1Geometry.html#a4c301c163c63d21ed08c17b0f4e131d3">o2::ft0::Geometry::Geometry</a></div><div class="ttdeci">Geometry()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d6b/FIT_2FT0_2base_2src_2Geometry_8cxx_source.html#l00021">Geometry.cxx:21</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a0cdec8e97a75ee9458b23d152bf962d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00403">glcorearb.h:403</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a74d80fd479c0f6d0153c709949a089ef"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a></div><div class="ttdeci">GLint y</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00270">glcorearb.h:270</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_abc44c220ba61424c5c5ee5a7983dcc2a"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#abc44c220ba61424c5c5ee5a7983dcc2a">o2::fv0::Geometry::EGeoType</a></div><div class="ttdeci">EGeoType</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00042">Geometry.h:42</a></div></div>
<div class="ttc" id="glcorearb_8h_html_abe08814c2f72843fde4d8df41440d5a0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a></div><div class="ttdeci">GLboolean r</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01233">glcorearb.h:1233</a></div></div>
<div class="ttc" id="GPUCommonAlgorithm_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00385">GPUCommonAlgorithm.h:385</a></div></div>
<div class="ttc" id="FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_html"><div class="ttname"><a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h.html">Geometry.h</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_ae348d8b543a1fe1c35b9a2214752a573a2c0afe361825752b9df3d6fe7e013527"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#ae348d8b543a1fe1c35b9a2214752a573a2c0afe361825752b9df3d6fe7e013527">o2::fv0::Geometry::eFibers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00053">Geometry.h:53</a></div></div>
<div class="ttc" id="classo2_1_1fv0_1_1Geometry_html_abc44c220ba61424c5c5ee5a7983dcc2aa6282ea317e8e429b6e0b8a9fdccc46e8"><div class="ttname"><a href="../../d1/d13/classo2_1_1fv0_1_1Geometry.html#abc44c220ba61424c5c5ee5a7983dcc2aa6282ea317e8e429b6e0b8a9fdccc46e8">o2::fv0::Geometry::eFull</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/FIT_2FV0_2base_2include_2FV0Base_2Geometry_8h_source.html#l00046">Geometry.h:46</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_051dca18e802f8e9474f2e30d29c04e0.html">Detectors</a></li><li class="navelem"><a class="el" href="../../dir_d14e88a79bca429480864605ee348cef.html">FIT</a></li><li class="navelem"><a class="el" href="../../dir_47779a59737632a3da2336a4e8799b86.html">FV0</a></li><li class="navelem"><a class="el" href="../../dir_33a453ce68726fac67bcc8248d4ab430.html">base</a></li><li class="navelem"><a class="el" href="../../dir_eed9b8d4a6168776d7ef7f227d4173e4.html">src</a></li><li class="navelem"><a class="el" href="../../d9/dbf/FIT_2FV0_2base_2src_2Geometry_8cxx.html">Geometry.cxx</a></li>
    <li class="footer">Generated on Thu Jun 4 2020 09:30:22 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
