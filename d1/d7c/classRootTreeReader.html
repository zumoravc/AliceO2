<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: RootTreeReader Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d1/d7c/classRootTreeReader.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RootTreeReader Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../d2/d88/classA.html">A</a> generic reader interface for <a class="el" href="../../d0/d10/namespaceROOT.html">ROOT</a> TTrees.  
 <a href="../../d1/d7c/classRootTreeReader.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../df/db5/RootTreeReader_8h_source.html">RootTreeReader.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for RootTreeReader:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d7f/classRootTreeReader__coll__graph.svg" width="134" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../d2/d88/classA.html">A</a> generic reader interface for <a class="el" href="../../d0/d10/namespaceROOT.html">ROOT</a> TTrees. </p>
<p>The reader interfaces one TTree specified by its name, and supports this tree to be distributed over multiple files.</p>
<p>The class uses a KeyType to define sinks for specific branches, the default key type is DPL framework::Output. Branches are defined for processing by either pairs of key type and branch name, or by struct BranchDefinition. The latter allows strong typing, the type is specified as template parameter and the DPL IO decides upon serialization method.</p>
<p>Output data is always <a class="el" href="../../d0/d10/namespaceROOT.html">ROOT</a> serialized if no type is specified.</p>
<dl class="section user"><dt>Usage, with some KeyType:</dt><dd>The first argument is the tree name, the list of files is variable, all files must be passed before the first key-branchname pair. <pre class="fragment">RootTreeReader(treename,
               filename1, filename2, ...,
               KeyType{...}, branchname1,
               BranchDefinition&lt;type&gt;{KeyType{...}, branchname2},
              ) reader;
auto processSomething = [] (auto&amp; key, auto&amp; object) {
  // do something
};
while (reader.next()) {
  reader.process(processSomething);
}
</pre></dd></dl>
<dl class="section user"><dt>Further optional constructor arguments</dt><dd>Optional arguments can follow in arbitrary sequence, but all arguments must be passed before the first branch definition.<ul>
<li>number of entries <em>n</em> (<code>int</code>)</li>
<li>publishing mode, PublishingMode</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Integration into DPL:</dt><dd>The class defines the functor operator which takes the DPL ProcessingContext as argument and optionally an argument pack of headers which inherit from BaseHeader, the latter will form the header stack of the message. <pre class="fragment">auto reader = std::make_shared&lt;RootTreeReader&gt;(treename,
                                               filename1, filename2, ...,
                                               Output{...}, branchname1,
                                               BranchDefinition&lt;type&gt;{Output{...}, branchname2},
                                              );
// In the DPL AlgorithmSpec, the processing lambda can simply look like:
// (note that the shared pointer is propagated by copy)
auto processingFct = [reader](ProcessingContext&amp; pc) {
  // increment the reader and invoke it for the processing context
  if (reader-&gt;next()) {
    SomeHeader specificHeader;
    reader(pc, specificHeader);
  } else {
    // no more data
  }
}

// another example, simply incrementing by operator++ and providing additional
// custom header
auto someOtherProcessingFct = [reader](ProcessingContext&amp; pc) {
  // increment the reader and invoke it for the processing context
  SomeHeader specificHeader;
  if ((++reader)(pc, specificHeader) == false) {
    // no more data
  }
}
</pre></dd></dl>
<dl class="section user"><dt>Binary format:</dt><dd>The reader supports the binary format of the RootTreeWriter as counterpart. Binary data is stored as vector of char alongside with a branch storing the size, as both indicator and consistency check.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>In the examples, <code>reader</code> has to be set up in the init callback and it must be static there to persist. It can also be a shared_pointer, which then requires additional dereferencing in the syntax. The processing lambda has to capture the shared pointer instance by copy. </dd></dl>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/travis/build/AliceO2Group/AliceO2/Framework/Utils/include/DPLUtils/<a class="el" href="../../df/db5/RootTreeReader_8h_source.html">RootTreeReader.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d1/d7c/classRootTreeReader.html">RootTreeReader</a></li>
    <li class="footer">Generated on Thu Jun 4 2020 09:30:41 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
